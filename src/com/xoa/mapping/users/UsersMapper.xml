<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xoa.dao.users.UsersMapper">
    <resultMap id="UserResultMap" type="com.xoa.model.users.Users">
        <id column="UID" property="uid" javaType="int"/>
        <result column="USER_ID" property="userId" javaType="string"/>
        <result column="USER_NAME" property="userName" javaType="string"/>
        <result column="USER_NAME_INDEX" property="userNameIndex"
                javaType="string"/>
        <result column="BYNAME" property="byname" javaType="string"/>
        <result column="USEING_KEY" property="useingKey" javaType="string"/>
        <result column="USING_FINGER" property="usingFinger" javaType="string"/>
        <result column="PASSWORD" property="password" javaType="string"/>
        <result column="KEY_SN" property="keySn" javaType="string"/>
        <result column="SECURE_KEY_SN" property="secureKeySn" javaType="string"/>
        <result column="USER_PRIV" property="userPriv" javaType="int"/>
        <result column="USER_PRIV_NO" property="userPrivNo" javaType="short"/>
        <result column="USER_PRIV_NAME" property="userPrivName"
                javaType="string"/>
        <result column="POST_PRIV" property="postPriv" javaType="string"/>
        <result column="POST_DEPT" property="postDept" javaType="string"/>
        <result column="DEPT_ID" property="deptId" javaType="int"/>
        <result column="DEPT_ID_OTHER" property="deptIdOther" javaType="string"/>
        <result column="LEAVE_DEPT" property="leaveDept" javaType="int"/>
        <result column="SEX" property="sex" javaType="string"/>
        <result column="BIRTHDAY" property="birthday"/>
        <result column="IS_LUNAR" property="isLunar" javaType="string"/>
        <result column="TEL_NO_DEPT" property="telNoDept" javaType="string"/>
        <result column="FAX_NO_DEPT" property="faxNoDept" javaType="string"/>
        <result column="ADD_HOME" property="addHome" javaType="string"/>
        <result column="POST_NO_HOME" property="postNoHome" javaType="string"/>
        <result column="TEL_NO_HOME" property="telNoHome" javaType="string"/>
        <result column="MOBIL_NO" property="mobilNo" javaType="string"/>
        <result column="BP_NO" property="bpNo" javaType="string"/>
        <result column="EMAIL" property="email" javaType="string"/>
        <result column="OICQ_NO" property="oicqNo" javaType="string"/>
        <result column="ICQ_NO" property="icqNo" javaType="string"/>
        <result column="MSN" property="msn" javaType="string"/>
        <result column="AVATAR" property="avatar" javaType="string"/>
        <result column="AVATAR_128" property="avatar128" javaType="string"/>
        <result column="SIGN_IMAGE_ID" property="signImageId" javaType="string"/>
        <result column="SIGN_IMAGE_NAME" property="signImageName" javaType="string"/>
        <result column="CALL_SOUND" property="callSound" javaType="string"/>
        <result column="LAST_VISIT_TIME" property="lastVisitTime"
                javaType="java.sql.Timestamp"/>
        <result column="SMS_ON" property="smsOn" javaType="string"/>
        <result column="MENU_TYPE" property="menuType" javaType="string"/>
        <result column="LAST_PASS_TIME" property="lastPassTime"
                javaType="java.sql.Timestamp"/>
        <result column="THEME" property="theme" javaType="java.lang.Integer"/>
        <result column="PORTAL" property="portal" javaType="string"/>
        <result column="PANEL" property="panel" javaType="string"/>
        <result column="ONLINE" property="online" javaType="int"/>
        <result column="ON_STATUS" property="onStatus" javaType="string"/>
        <result column="ATTEND_STATUS" property="attendStatus"
                javaType="string"/>
        <result column="MOBIL_NO_HIDDEN" property="mobilNoHidden"
                javaType="string"/>
        <result column="MYTABLE_LEFT" property="mytableLeft" javaType="string"/>
        <result column="MYTABLE_RIGHT" property="mytableRight"
                javaType="string"/>
        <result column="USER_PRIV_OTHER" property="userPrivOther"
                javaType="string"/>
        <result column="USER_NO" property="userNo" javaType="int"/>
        <result column="NOT_LOGIN" property="notLogin" javaType="java.lang.Integer"/>
        <result column="NOT_VIEW_USER" property="notViewUser" javaType="string"/>
        <result column="NOT_VIEW_TABLE" property="notViewTable"
                javaType="string"/>
        <result column="NOT_SEARCH" property="notSearch" javaType="string"/>
        <result column="BKGROUND" property="bkground" javaType="string"/>
        <result column="BIND_IP" property="bindIp" javaType="string"/>
        <result column="LAST_VISIT_IP" property="lastVisitIp" javaType="string"/>
        <result column="MENU_IMAGE" property="menuImage" javaType="string"/>
        <result column="WEATHER_CITY" property="weatherCity" javaType="string"/>
        <result column="SHOW_RSS" property="showRss" javaType="string"/>
        <result column="MENU_EXPAND" property="menuExpand" javaType="string"/>
        <result column="MY_STATUS" property="myStatus" javaType="string"/>
        <result column="LIMIT_LOGIN" property="limitLogin" javaType="string"/>
        <result column="PHOTO" property="photo" javaType="string"/>
        <result column="IM_RANGE" property="imRange" javaType="java.lang.Integer"/>
        <result column="LEAVE_TIME" property="leaveTime" javaType="java.sql.Timestamp"/>
        <result column="SECRET_LEVEL" property="secretLevel" javaType="int"/>
        <result column="NOT_MOBILE_LOGIN" property="notMobileLogin"
        />
        <result column="MANAGE_MODULE_TYPE" property="manageModuleType"
                javaType="string"/>
        <result column="USER_PRIV_TYPE" property="userPrivType" javaType="java.lang.Integer"
        />
        <result column="USER_MANAGE_ORGS" property="userManageOrgs"
                javaType="string"/>
        <result column="SHORTCUT" property="shortcut" jdbcType="LONGVARCHAR"
                javaType="string"/>
        <result column="MY_RSS" property="myRss" javaType="string"/>
        <result column="REMARK" property="remark" javaType="string"/>
        <result column="USER_PARA" property="userPara" javaType="string"/>
        <result column="DEPT_NAME" property="deptName" javaType="string"/>
        <result column="DUTY_TYPE" property="dutyType"/>
        <result column="ID_NUMBER" property="idNumber" javaType="string"/>
        <result column="TRA_NUMBER" property="traNumber" javaType="string"/>
        <result column="SUBJECT" property="subject" javaType="string"/>
        <result column="POST" property="post" javaType="string"/>
        <result column="SETTLEMENT_NO" property="settlementNo" javaType="string"/>
        <result column="deptName" property="deptName" jdbcType="VARCHAR"/>
        <result column="POST_ID" property="postId" javaType="int"/>
        <result column="POST_NAME" property="postName" javaType="string"/>
        <result column="JOB_ID" property="jobId" javaType="int"/>
        <result column="JOB_NAME" property="jobName" javaType="string"/>
        <result column="ROOM_NUM" property="roomNum" javaType="string"/>
        <result column="DEPT_YJ" property="deptYj" javaType="string"/>
        <result column="MOBILE_TYPE" property="mobileType" javaType="string"/>
        <result column="MH_ORG" property="mhOrg" javaType="string" />
        <result column="SIMPLE_INTERFACE" property="simpleInterface" javaType="string" />
        <result column="user_func_id_str" property="funcIdStr" jdbcType="VARCHAR"  javaType="string"/>
        <result column="DUTY_TYPE_NAME" property="dutyTypeName" javaType="string"/>
        <result column="USER_SECRECY" property="userSecrecy" javaType="string"/>
        <association property="dep"
                     javaType="com.xoa.model.department.Department">
            <id column="DEPT_ID" property="deptId"/>
            <result column="DEPT_NAME" property="deptName" jdbcType="VARCHAR"/>
            <result column="TEL_NO" property="telNo" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="FAX_NO" property="faxNo" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="DEPT_ADDRESS" property="deptAddress" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="DEPT_NO" property="deptNo" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="DEPT_PARENT" property="deptParent" jdbcType="INTEGER"
                    javaType="int"/>
            <result column="IS_ORG" property="isOrg" jdbcType="CHAR"
                    javaType="string"/>
            <result column="ORG_ADMIN" property="orgAdmin" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="DEPT_EMAIL_AUDITS_IDS" property="deptEmailAuditsIds"
                    jdbcType="VARCHAR" javaType="string"/>
            <result column="WEIXIN_DEPT_ID" property="weixinDeptId"
                    jdbcType="INTEGER" javaType="int"/>
            <result column="DINGDING_DEPT_ID" property="dingdingDeptId"
                    jdbcType="INTEGER" javaType="int"/>
            <result column="G_DEPT" property="gDept" javaType="java.lang.Integer"/>
            <result column="MANAGER" property="manager" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="ASSISTANT_ID" property="assistantId" jdbcType="LONGVARCHAR"
                    javaType="string"/>
            <result column="LEADER1" property="leader1" jdbcType="LONGVARCHAR"
                    javaType="string"/>
            <result column="LEADER2" property="leader2" jdbcType="LONGVARCHAR"
                    javaType="string"/>
            <result column="DEPT_FUNC" property="deptFunc" jdbcType="LONGVARCHAR"
                    javaType="string"/>
        </association>
        <association property="role" javaType="com.xoa.model.role.Role">
            <id column="USER_PRIV" property="userPriv" jdbcType="INTEGER"
                javaType="int"/>
            <result column="PRIV_NAME" property="privName" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="PRIV_NO" property="privNo" jdbcType="SMALLINT"
                    javaType="string"/>
            <result column="FUNC_ID_STR" property="funcIdStr" jdbcType="VARCHAR"
                    javaType="string"/>
            <result column="PRIV_DEPT_ID" property="privDeptId" jdbcType="INTEGER"
                    javaType="string"/>
            <result column="PRIV_TYPE" property="privType" javaType="java.lang.Integer"
            />
            <result column="IS_GLOBAL" property="isGlobal" javaType="java.lang.Integer"
            />
        </association>

        <association property="para" javaType="com.xoa.model.common.SysPara">
            <id column="PARA_NAME" property="paraName" javaType="string"/>
            <result column="PARA_VALUE" property="paraValue" javaType="string"/>
        </association>

        <association property="userExt" javaType="com.xoa.model.users.UserExt">
            <id column="UID" property="uid" javaType="java.lang.Integer"/>
            <result column="USER_ID" property="userId" javaType="java.lang.String"/>
            <result column="TABLE_ICON" property="tableIcon" javaType="java.lang.String"/>
            <result column="EMAIL_RECENT_LINKMAN" property="emailRecentLinkman" javaType="java.lang.String"/>
            <result column="NICK_NAME" property="nickName" javaType="java.lang.String"/>
            <result column="BBS_COUNTER" property="bbsCounter" javaType="java.lang.Integer"/>
            <result column="BBS_SIGNATURE" property="bbsSignature" javaType="java.lang.String"/>
            <result column="EMAIL_CAPACITY" property="emailCapacity"/>
            <result column="FOLDER_CAPACITY" property="folderCapacity"/>
            <result column="WEBMAIL_CAPACITY" property="webmailCapacity"/>
            <result column="WEBMAIL_NUM" property="webmailNum"/>
            <result column="SCORE" property="score" javaType="java.lang.Integer"/>
            <result column="TDER_FLAG" property="tderFlag" jdbcType="CHAR"/>
            <result column="DUTY_TYPE" property="dutyType" jdbcType="SMALLINT"/>
            <result column="USE_POP3" property="usePop3" javaType="java.lang.Integer"/>
            <result column="IS_USE_POP3" property="isUsePop3" javaType="java.lang.Integer"/>
            <result column="POP3_PASS_STYLE" property="pop3PassStyle" javaType="java.lang.Integer"/>
            <result column="POP3_PASS" property="pop3Pass" javaType="java.lang.String"/>
            <result column="CC_USERNAME" property="ccUsername" javaType="java.lang.String"/>
            <result column="CC_PWD" property="ccPwd" javaType="java.lang.String"/>
            <result column="IS_USE_EMAILSEND" property="isUseEmailsend" javaType="java.lang.Integer"/>
            <result column="TASKCENTER_OPEN_START" property="taskcenterOpenStart" javaType="java.lang.Integer"/>
            <result column="EMAIL_GETBOX" property="emailGetbox" javaType="java.lang.String"/>
            <result column="FOLDER_VIEW_MODEL" property="folderViewModel" javaType="java.lang.Integer"/>
            <result column="USE_EMAIL" property="useEmail" javaType="java.lang.Integer"/>
            <result column="EMPLOYMENT_TYPE" property="employmentType" javaType="java.lang.String"/>
            <result column="MENU_PANEL" property="menuPanel" javaType="java.lang.String"/>
            <result column="EMAIL_PANEL" property="emailPanel" javaType="java.lang.String"/>
            <result column="JOB_LEVEL" property="jobLevel" javaType="java.lang.String"/>
            <result column="BANK_DEPOSIT" property="bankDeposit" javaType="java.lang.String"/>
            <result column="BANK_CARD_NUMBER" property="bankCardNumber" javaType="java.lang.String"/>
            <result column="DOCUMENT_PANEL" property="documentPanel" javaType="java.lang.String"/>
        </association>


        <association property="modulePriv" javaType="com.xoa.model.modulePriv.ModulePriv">
            <id column="UID" property="uid" javaType="java.lang.Integer"/>
            <result column="MODULE_ID" property="moduleId" javaType="java.lang.Integer"/>
            <result column="DEPT_PRIV" property="deptPriv" javaType="string"/>
            <result column="ROLE_PRIV" property="rolePriv" javaType="string"/>
        </association>

    </resultMap>

    <resultMap id="UserResult" type="com.xoa.model.users.Users">
        <id column="UID" property="uid" javaType="int"/>
        <result column="USER_ID" property="userId" javaType="string"/>
        <result column="USER_NAME" property="userName" javaType="string"/>
        <result column="USER_NAME_INDEX" property="userNameIndex"
                javaType="string"/>
        <result column="BYNAME" property="byname" javaType="string"/>
        <result column="USEING_KEY" property="useingKey" javaType="string"/>
        <result column="USING_FINGER" property="usingFinger" javaType="string"/>
        <result column="PASSWORD" property="password" javaType="string"/>
        <result column="KEY_SN" property="keySn" javaType="string"/>
        <result column="SECURE_KEY_SN" property="secureKeySn" javaType="string"/>
        <result column="USER_PRIV" property="userPriv" javaType="int"/>
        <result column="USER_PRIV_NO" property="userPrivNo" javaType="short"/>
        <result column="USER_PRIV_NAME" property="userPrivName"
                javaType="string"/>
        <result column="POST_PRIV" property="postPriv" javaType="string"/>
        <result column="POST_DEPT" property="postDept" javaType="string"/>
        <result column="DEPT_ID" property="deptId" javaType="int"/>
        <result column="DEPT_ID_OTHER" property="deptIdOther" javaType="string"/>
        <result column="SEX" property="sex" javaType="string"/>
        <result column="BIRTHDAY" property="birthday"/>
        <result column="IS_LUNAR" property="isLunar" javaType="string"/>
        <result column="TEL_NO_DEPT" property="telNoDept" javaType="string"/>
        <result column="FAX_NO_DEPT" property="faxNoDept" javaType="string"/>
        <result column="ADD_HOME" property="addHome" javaType="string"/>
        <result column="POST_NO_HOME" property="postNoHome" javaType="string"/>
        <result column="TEL_NO_HOME" property="telNoHome" javaType="string"/>
        <result column="MOBIL_NO" property="mobilNo" javaType="string"/>
        <result column="BP_NO" property="bpNo" javaType="string"/>
        <result column="EMAIL" property="email" javaType="string"/>
        <result column="OICQ_NO" property="oicqNo" javaType="string"/>
        <result column="ICQ_NO" property="icqNo" javaType="string"/>
        <result column="MSN" property="msn" javaType="string"/>
        <result column="AVATAR" property="avatar" javaType="string"/>
        <result column="AVATAR_128" property="avatar128" javaType="string"/>
        <result column="CALL_SOUND" property="callSound" javaType="string"/>
        <result column="LAST_VISIT_TIME" property="lastVisitTime"
                javaType="java.sql.Timestamp"/>
        <result column="SMS_ON" property="smsOn" javaType="string"/>
        <result column="MENU_TYPE" property="menuType" javaType="string"/>
        <result column="LAST_PASS_TIME" property="lastPassTime"
                javaType="java.sql.Timestamp"/>
        <result column="THEME" property="theme" javaType="java.lang.Integer"/>
        <result column="PORTAL" property="portal" javaType="string"/>
        <result column="PANEL" property="panel" javaType="string"/>
        <result column="ONLINE" property="online" javaType="int"/>
        <result column="ON_STATUS" property="onStatus" javaType="string"/>
        <result column="ATTEND_STATUS" property="attendStatus"
                javaType="string"/>
        <result column="MOBIL_NO_HIDDEN" property="mobilNoHidden"
                javaType="string"/>
        <result column="MYTABLE_LEFT" property="mytableLeft" javaType="string"/>
        <result column="MYTABLE_RIGHT" property="mytableRight"
                javaType="string"/>
        <result column="USER_PRIV_OTHER" property="userPrivOther"
                javaType="string"/>
        <result column="USER_NO" property="userNo" javaType="int"/>
        <result column="NOT_LOGIN" property="notLogin" javaType="java.lang.Integer"/>
        <result column="NOT_VIEW_USER" property="notViewUser" javaType="string"/>
        <result column="NOT_VIEW_TABLE" property="notViewTable"
                javaType="string"/>
        <result column="NOT_SEARCH" property="notSearch" javaType="string"/>
        <result column="BKGROUND" property="bkground" javaType="string"/>
        <result column="BIND_IP" property="bindIp" javaType="string"/>
        <result column="LAST_VISIT_IP" property="lastVisitIp" javaType="string"/>
        <result column="MENU_IMAGE" property="menuImage" javaType="string"/>
        <result column="WEATHER_CITY" property="weatherCity" javaType="string"/>
        <result column="SHOW_RSS" property="showRss" javaType="string"/>
        <result column="MENU_EXPAND" property="menuExpand" javaType="string"/>
        <result column="MY_STATUS" property="myStatus" javaType="string"/>
        <result column="LIMIT_LOGIN" property="limitLogin" javaType="string"/>
        <result column="PHOTO" property="photo" javaType="string"/>
        <result column="IM_RANGE" property="imRange" javaType="java.lang.Integer"/>
        <result column="LEAVE_TIME" property="leaveTime" javaType="java.sql.Timestamp"/>
        <result column="SECRET_LEVEL" property="secretLevel" javaType="int"/>
        <result column="NOT_MOBILE_LOGIN" property="notMobileLogin"
        />
        <result column="MANAGE_MODULE_TYPE" property="manageModuleType"
                javaType="string"/>
        <result column="USER_PRIV_TYPE" property="userPrivType"
        />
        <result column="USER_MANAGE_ORGS" property="userManageOrgs"
                javaType="string"/>
        <result column="SHORTCUT" property="shortcut" javaType="string"/>
        <result column="MY_RSS" property="myRss" javaType="string"/>
        <result column="REMARK" property="remark" javaType="string"/>
        <result column="USER_PARA" property="userPara" javaType="string"/>
        <result column="DEPT_NAME" property="deptName" javaType="string"/>
        <result column="DUTY_TYPE" property="dutyType"/>
        <result column="ID_NUMBER" property="idNumber" javaType="string"/>
        <result column="TRA_NUMBER" property="traNumber" javaType="string"/>
        <result column="SUBJECT" property="subject" javaType="string"/>
        <result column="POST" property="post" javaType="string"/>
        <result column="SETTLEMENT_NO" property="settlementNo" javaType="string"/>
        <result column="deptName" property="deptName" jdbcType="VARCHAR"/>
        <result column="POST_ID" property="postId" javaType="int"/>
        <result column="POST_NAME" property="postName" javaType="string"/>
        <result column="JOB_ID" property="jobId" javaType="int"/>
        <result column="JOB_NAME" property="jobName" javaType="string"/>
    </resultMap>

    <resultMap id="UserImfriedsMap" type="com.xoa.model.users.Users">
        <result column="AVATAR" property="avatar"></result>
        <result column="USER_ID" property="userId"></result>
        <result column="UID" property="uid"></result>
        <result column="USER_PRIV_NAME" property="userPrivName"></result>
        <result column="SEX" property="sex"></result>
        <result column="BIRTHDAY" property="birthday"></result>
        <result column="MOBIL_NO" property="mobilNo"></result>
        <result column="MY_STATUS" property="myStatus"></result>
        <result column="USER_NAME" property="userName"></result>
        <result column="DEPT_ID" property="deptId"></result>
        <result column="DEPT_NAME" property="deptName"></result>
    </resultMap>

    <resultMap id="SimpleUserMap" type="com.xoa.model.users.SimpleUser">
        <result column="UID" property="uid"/>
        <result column="USER_ID" property="userId"/>
        <result column="USER_NAME" property="userName"/>
        <result column="USER_PRIV" property="userPriv"/>
        <result column="USER_PRIV_NAME" property="userPrivName"/>
        <result column="DEPT_ID" property="deptId"/>
        <result column="DEPT_NAME" property="deptName"/>
        <result column="AVATAR" property="avatar"/>
        <result column="AVATAR_128" property="avatar128"/>
        <result column="SEX" property="sex"/>
    </resultMap>

    <resultMap id="IDaasUserMap" type="com.xoa.model.users.IDaasUser">
        <result column="UID" property="uid"/>
        <result column="USER_ID" property="userId"/>
        <result column="USER_NAME" property="userName"/>
        <result column="PASSWORD" property="password"/>
        <result column="BYNAME" property="byname"/>
        <result column="MOBIL_NO" property="mobilNo"/>
        <result column="EMAIL" property="email"/>
        <result column="EXTERNALID" property="externalId"/>
        <result column="THEME" property="theme"/>
        <result column="SEX" property="sex"/>
        <result column="DEPT_ID" property="deptId"></result>
        <result column="USER_PRIV" property="userPriv"></result>
        <result column="USER_PRIV_NAME" property="userPrivName"></result>
        <result column="BP_NO" property="bpNo"/>
    </resultMap>
    <resultMap id="mapResult" type="java.util.HashMap">
        <result column="USER_ID" property="key"/>
        <result column="USER_NAME" property="value"/>
    </resultMap>

    <resultMap id="UserIdAndNameResultMap" type="com.xoa.model.users.Users">
        <id column="USER_ID" property="userId" javaType="string"/>
        <result column="USER_NAME" property="userName" javaType="string"/>
    </resultMap>

    <resultMap id="UserAndDiaryResultMap" type="com.xoa.model.users.Users">
        <id column="USER_ID" property="userId" javaType="string"/>

        <association property="diaryModel" javaType="com.xoa.model.diary.DiaryModel">
            <id column="DIA_ID" property="diaId" javaType="int"/>
            <result column="USER_ID" property="userId" javaType="string" />
            <result column="DIA_TYPE" property="diaType" javaType="string" />
            <result column="DIA_TYPE_NAME" property="diaTypeName" javaType="string" />
            <result column="DIA_DATE" property="diaDate" javaType="string" />
            <result column="SUBJECT" property="subject" javaType="string" />
            <result column="CONTENT" property="content" javaType="string" />
            <result column="DIA_TIME" property="diaTime" javaType="string" />

            <result column="TO_ID" property="toId" javaType="string" />
            <result column="USER_TOP_ID" property="userTopId" javaType="string" />

            <result column="ONE_DEPT_NAME" property="oneDeptName" javaType="string" />
            <result column="TWO_DEPT_NAME" property="twoDeptName" javaType="string" />
            <result column="THREE_DEPT_NAME" property="threeDeptName" javaType="string" />
            <result column="FOUR_DEPT_NAME" property="fourDeptName" javaType="string" />
            <result column="ISFLAG" property="isFlag" javaType="string" />
            <result column="USER_TOP_ID_NAME" property="userTopIdName" javaType="string" />
            <result column="COMMENT_TXT" property="commentTxt" javaType="string" />
            <result column="COMMENT_LENGTH" property="commentLength" javaType="integer" />
            <result column="COMMENT_LENGTH_JUDGE" property="commentLengthJudge" javaType="string" />

            <result column="USER_NAME" property="userName" javaType="string"/>
            <result column="BYNAME" property="byName" javaType="string"/>
            <result column="USER_PRIV_NAME" property="userPrivName" javaType="string"/>
            <result column="USER_PRIV_OTHER" property="userPrivOther" javaType="string"/>
        </association>
    </resultMap>


    <sql id="Column_List" >
        UID,USER_ID,USER_NAME,USER_NAME_INDEX,BYNAME,USEING_KEY,USING_FINGER,KEY_SN,SECURE_KEY_SN,USER_PRIV,USER_PRIV_NO,
        USER_PRIV_NAME,POST_PRIV,POST_DEPT,DEPT_ID,DEPT_ID_OTHER,SEX,BIRTHDAY,IS_LUNAR,TEL_NO_DEPT,FAX_NO_DEPT,ADD_HOME,
        POST_NO_HOME,TEL_NO_HOME,MOBIL_NO,BP_NO,EMAIL,OICQ_NO,ICQ_NO,MSN,AVATAR,CALL_SOUND,LAST_VISIT_TIME,SMS_ON,MENU_TYPE,
        LAST_PASS_TIME,THEME,SHORTCUT,PORTAL,PANEL,ONLINE,ON_STATUS,ATTEND_STATUS,MOBIL_NO_HIDDEN,MYTABLE_LEFT,MYTABLE_RIGHT,
        USER_PRIV_OTHER,USER_NO,NOT_LOGIN,NOT_VIEW_USER,NOT_VIEW_TABLE,NOT_SEARCH,BKGROUND,BIND_IP,LAST_VISIT_IP,MENU_IMAGE,
        WEATHER_CITY,SHOW_RSS,MY_RSS,REMARK,MENU_EXPAND,MY_STATUS,LIMIT_LOGIN,PHOTO,IM_RANGE,LEAVE_TIME,SECRET_LEVEL,USER_PARA,
        NOT_MOBILE_LOGIN,MANAGE_MODULE_TYPE,USER_PRIV_TYPE,USER_MANAGE_ORGS,ID_NUMBER,TRA_NUMBER,SUBJECT,POST,AVATAR_128,POST_ID,
        JOB_ID,ROOM_NUM,DEPT_YJ,MYTABLE_MID,SIGN_IMAGE_ID,SIGN_IMAGE_NAME,MOBILE_TYPE,SIMPLE_INTERFACE,USER_SECRECY
    </sql>

    <sql id="Column_List_KB" >
        UID,USER_ID,USER_NAME,USER_NAME_INDEX,BYNAME,USEING_KEY,USING_FINGER,KEY_SN,SECURE_KEY_SN,USER_PRIV,USER_PRIV_NO,
        USER_PRIV_NAME,POST_PRIV,POST_DEPT,DEPT_ID,DEPT_ID_OTHER,SEX,BIRTHDAY,IS_LUNAR,TEL_NO_DEPT,FAX_NO_DEPT,ADD_HOME,
        POST_NO_HOME,TEL_NO_HOME,MOBIL_NO,BP_NO,EMAIL,OICQ_NO,ICQ_NO,MSN,AVATAR,CALL_SOUND,LAST_VISIT_TIME,SMS_ON,MENU_TYPE,
        LAST_PASS_TIME,THEME,SHORTCUT,PORTAL,PANEL,"ONLINE",ON_STATUS,ATTEND_STATUS,MOBIL_NO_HIDDEN,MYTABLE_LEFT,MYTABLE_RIGHT,
        USER_PRIV_OTHER,USER_NO,NOT_LOGIN,NOT_VIEW_USER,NOT_VIEW_TABLE,NOT_SEARCH,BKGROUND,BIND_IP,LAST_VISIT_IP,MENU_IMAGE,
        WEATHER_CITY,SHOW_RSS,MY_RSS,REMARK,MENU_EXPAND,MY_STATUS,LIMIT_LOGIN,PHOTO,IM_RANGE,LEAVE_TIME,SECRET_LEVEL,USER_PARA,
        NOT_MOBILE_LOGIN,MANAGE_MODULE_TYPE,USER_PRIV_TYPE,USER_MANAGE_ORGS,ID_NUMBER,TRA_NUMBER,SUBJECT,POST,AVATAR_128,POST_ID,
        JOB_ID,ROOM_NUM,DEPT_YJ,MYTABLE_MID,SIGN_IMAGE_ID,SIGN_IMAGE_NAME,MOBILE_TYPE,SIMPLE_INTERFACE,USER_SECRECY
    </sql>


    <sql id="U_Column_List" >
        u.UID,u.USER_ID,u.USER_NAME,u.USER_NAME_INDEX,u.BYNAME,u.USEING_KEY,u.USING_FINGER,u.KEY_SN,u.SECURE_KEY_SN,u.USER_PRIV,u.USER_PRIV_NO,
        u.USER_PRIV_NAME,u.POST_PRIV,u.POST_DEPT,u.DEPT_ID,u.DEPT_ID_OTHER,u.SEX,u.BIRTHDAY,u.IS_LUNAR,u.TEL_NO_DEPT,u.FAX_NO_DEPT,u.ADD_HOME,
        u.POST_NO_HOME,u.TEL_NO_HOME,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.AVATAR,u.CALL_SOUND,u.LAST_VISIT_TIME,u.SMS_ON,u.MENU_TYPE,
        u.LAST_PASS_TIME,u.THEME,u.SHORTCUT,u.PORTAL,u.PANEL,u.ONLINE,u.ON_STATUS,u.ATTEND_STATUS,u.MOBIL_NO_HIDDEN,u.MYTABLE_LEFT,u.MYTABLE_RIGHT,
        u.USER_PRIV_OTHER,u.USER_NO,u.NOT_LOGIN,u.NOT_VIEW_USER,u.NOT_VIEW_TABLE,u.NOT_SEARCH,u.BKGROUND,u.BIND_IP,u.LAST_VISIT_IP,u.MENU_IMAGE,
        u.WEATHER_CITY,u.SHOW_RSS,u.MY_RSS,u.REMARK,u.MENU_EXPAND,u.MY_STATUS,u.LIMIT_LOGIN,u.PHOTO,u.IM_RANGE,u.LEAVE_TIME,u.SECRET_LEVEL,u.USER_PARA,
        u.NOT_MOBILE_LOGIN,u.MANAGE_MODULE_TYPE,u.USER_PRIV_TYPE,u.USER_MANAGE_ORGS,u.ID_NUMBER,u.TRA_NUMBER,u.SUBJECT,u.POST,u.AVATAR_128,u.POST_ID,
        u.JOB_ID,u.ROOM_NUM,u.DEPT_YJ,u.MYTABLE_MID,u.SIGN_IMAGE_ID,u.SIGN_IMAGE_NAME,u.MOBILE_TYPE,u.SIMPLE_INTERFACE,u.USER_SECRECY
    </sql>

    <sql id="U_Column_List_KB" >
        u.UID,u.USER_ID,u.USER_NAME,u.USER_NAME_INDEX,u.BYNAME,u.USEING_KEY,u.USING_FINGER,u.KEY_SN,u.SECURE_KEY_SN,u.USER_PRIV,u.USER_PRIV_NO,
        u.USER_PRIV_NAME,u.POST_PRIV,u.POST_DEPT,u.DEPT_ID,u.DEPT_ID_OTHER,u.SEX,u.BIRTHDAY,u.IS_LUNAR,u.TEL_NO_DEPT,u.FAX_NO_DEPT,u.ADD_HOME,
        u.POST_NO_HOME,u.TEL_NO_HOME,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.AVATAR,u.CALL_SOUND,u.LAST_VISIT_TIME,u.SMS_ON,u.MENU_TYPE,
        u.LAST_PASS_TIME,u.THEME,u.SHORTCUT,u.PORTAL,u.PANEL,u."ONLINE",u.ON_STATUS,u.ATTEND_STATUS,u.MOBIL_NO_HIDDEN,u.MYTABLE_LEFT,u.MYTABLE_RIGHT,
        u.USER_PRIV_OTHER,u.USER_NO,u.NOT_LOGIN,u.NOT_VIEW_USER,u.NOT_VIEW_TABLE,u.NOT_SEARCH,u.BKGROUND,u.BIND_IP,u.LAST_VISIT_IP,u.MENU_IMAGE,
        u.WEATHER_CITY,u.SHOW_RSS,u.MY_RSS,u.REMARK,u.MENU_EXPAND,u.MY_STATUS,u.LIMIT_LOGIN,u.PHOTO,u.IM_RANGE,u.LEAVE_TIME,u.SECRET_LEVEL,u.USER_PARA,
        u.NOT_MOBILE_LOGIN,u.MANAGE_MODULE_TYPE,u.USER_PRIV_TYPE,u.USER_MANAGE_ORGS,u.ID_NUMBER,u.TRA_NUMBER,u.SUBJECT,u.POST,u.AVATAR_128,u.POST_ID,
        u.JOB_ID,u.ROOM_NUM,u.DEPT_YJ,u.MYTABLE_MID,u.SIGN_IMAGE_ID,u.SIGN_IMAGE_NAME,u.MOBILE_TYPE,u.SIMPLE_INTERFACE,u.USER_SECRECY
    </sql>


    <select id="getByDeptId" parameterType="Map"
            resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,
        <if test="deptId!=null and deptId != 0 ">
            d.DEPT_NAME,
        </if>
        ue.DUTY_TYPE
        from user u
        <if test="deptId!=null and deptId != 0 ">
            INNER JOIN
            department d ON u.DEPT_ID = d.DEPT_ID
        </if>
        INNER JOIN user_ext ue ON u.UID = ue.UID
        where 1=1 AND (u.DEPT_ID = #{deptId} OR (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%') OR u.DEPT_ID_OTHER
        LIKE CONCAT(#{deptId},',%')) )
        <if test="notLogin != null and notLogin !='' or notLogin == '0' ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        ORDER BY u.USER_NO;
    </select>
    <select id="getByDeptId" parameterType="Map"
            resultMap="UserResultMap" databaseId="oracle">
        select <include refid="U_Column_List" /> ,
        <if test="deptId!=null and deptId != 0 ">
            d.DEPT_NAME,
        </if>
        ue.DUTY_TYPE
        from "USER" u
        <if test="deptId!=null and deptId != 0 ">
            INNER JOIN
            department d ON u.DEPT_ID = d.DEPT_ID
        </if>
        INNER JOIN user_ext ue ON u."UID" = ue."UID"
        where 1=1 AND (u.DEPT_ID = #{deptId} OR (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%') OR
        u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) )
        <if test="notLogin != null and notLogin !='' or notLogin == '0' ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        ORDER BY u.USER_NO;
    </select>


    <select id="getAllByDeptId" parameterType="Map"
            resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />,
        d.DEPT_NAME
        from
        `user` u
        INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
        WHERE
        1 = 1
        <if test="deptNo!=null and deptNo!=''">
            AND d.dept_no LIKE CONCAT (#{deptNo},'%')
        </if>

        ORDER BY
        u.USER_NO
    </select>


    <select id="getByDeptId" parameterType="Map"
            resultMap="UserResultMap" databaseId="dm">
        select <include refid="U_Column_List" /> ,
        <if test="deptId!=null and deptId != 0 ">
            d.DEPT_NAME,
        </if>
        ue.DUTY_TYPE
        from "USER" u
        <if test="deptId!=null and deptId != 0 ">
            INNER JOIN
            department d ON u.DEPT_ID = d.DEPT_ID
        </if>
        INNER JOIN user_ext ue ON u."UID" = ue."UID"
        where 1=1 AND (u.DEPT_ID = #{deptId} OR (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%') OR
        u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) )
        <if test="notLogin != null and notLogin !='' or notLogin == '0' ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        ORDER BY u.USER_NO;
    </select>


    <select id="findUserByuid" parameterType="Map"
            resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,
        d.DEPT_NAME,ue.*
        from user u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue.uid=u.uid and u.UID= #{uid}
    </select>
    <select id="findUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="oracle">
        select <include refid="U_Column_List" /> ,
        d.DEPT_NAME,ue.*
        from "USER" u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue."UID"=u."UID" and u."UID" = #{uid}
    </select>
    <select id="findUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="dm">
          select <include refid="U_Column_List" /> ,
          d.DEPT_NAME,ue.*
          from "USER" u , department d , user_ext ue where
          u.DEPT_ID= d.DEPT_ID
          and ue."UID"=u."UID" and u."UID"= #{uid}
    </select>
    <select id="findUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="kingbase">
          select <include refid="U_Column_List_KB" /> ,
          d.DEPT_NAME,ue.nick_name,ue.bbs_counter,ue.score,ue.duty_type,ue.login_restriction
          from "USER" u,"department" d ,"user_ext" ue where
          u.DEPT_ID= d.DEPT_ID
          and ue.UID=u.UID and u.UID= #{uid}
    </select>


    <select id="SimplefindUserByuid" parameterType="Map"
            resultMap="UserResultMap">
        select u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,
        d.DEPT_NAME,ue.*
        from user u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue.uid=u.uid and u.UID= #{uid}
    </select>
    <select id="SimplefindUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="oracle">
        select u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,
        d.DEPT_NAME,ue.*
        from "USER" u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue."UID"=u."UID" and u."UID" = #{uid}
    </select>
    <select id="SimplefindUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="dm">
        select u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,
        d.DEPT_NAME,ue.*
        from "USER" u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue."UID"=u."UID" and u."UID" = #{uid}
    </select>
    <select id="SimplefindUserByuid" parameterType="Map"
            resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,
        d.DEPT_NAME,ue.*
        from "USER" u,department d ,user_ext ue where
        u.DEPT_ID= d.DEPT_ID
        and ue."UID"=u."UID" and u."UID" = #{uid}
    </select>
    <select id="getUserByUid" parameterType="int"
            resultMap="UserResultMap" databaseId="oracle">
        select <include refid="U_Column_List" /> ,d.DEPT_NAME,
        ue.*
        from `user` u,user_ext ue ,department d where
        ue.uid=u.uid and u.UID= #{uid} and (d.DEPT_ID =u.DEPT_ID or u.DEPT_ID =0) GROUP BY u.uid

    </select>
    <select id="getUserByUid" parameterType="int"
            resultMap="UserResultMap" databaseId="dm">
        SELECT
        <include refid="U_Column_List" />,
        UE.*
        FROM
            "user" U,
            "user_ext" UE,
            "department" D

        WHERE

            UE."UID" = U."UID"
          AND U."UID" = #{uid}
        AND (
            D.DEPT_ID = U.DEPT_ID
            OR U.DEPT_ID = 0
        )
    </select>

    <select id="getUserByUid" parameterType="int"
            resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List_KB" />,
        D.DEPT_NAME,
        UE.nick_name,UE.bbs_counter,UE.score,UE.duty_type,UE.login_restriction
        FROM
            "user" u,
            "user_ext" UE,
            "department" D

        WHERE

            UE."UID" = u."UID"
          AND u."UID" = #{uid}
        AND (
            D.DEPT_ID = u.DEPT_ID
            OR u.DEPT_ID = 0
        )
    </select>

    <select id="getUserByUid" parameterType="int" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,d.DEPT_NAME,
        ue.*
        from user u,user_ext ue ,department d where
        ue.uid=u.uid and u.UID= #{uid} and (d.DEPT_ID =u.DEPT_ID or u.DEPT_ID =0) GROUP BY u.uid

    </select>

    <select id="selectUserByUId" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM user WHERE UID = #{uid}
    </select>
    <select id="selectUserByUId" resultMap="UserResultMap" databaseId="oracle">
        SELECT <include refid="Column_List" /> FROM "USER" WHERE "UID" = #{uid}
    </select>
    <select id="selectUserByUId" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> FROM "USER" WHERE "UID" = #{uid}
    </select>
    <select id="selectUserByUId" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" /> FROM "USER" WHERE "UID" = #{uid}
    </select>
    <select id="findUsersByuserId" resultMap="UserResultMap">
        select  u.USER_NAME,u.BYNAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,u.USER_NO,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.DEPT_ID_OTHER,u.SEX,u.USER_PRIV_OTHER,u.SHORTCUT,u.JOB_ID,u.USER_SECRECY,d.DEPT_NAME,user_ext.*,u.DEPT_YJ from user u,department d,user_ext  where u.DEPT_ID= d.DEPT_ID and u.uid=user_ext.uid and u.USER_ID= #{userId}
    </select>

    <select id="findUsersByuserId" resultMap="UserResultMap" databaseId="oracle">
        select  u.USER_NAME,u.BYNAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,u.USER_NO,U.AVATAR,U."UID",u.USER_PRIV,u.DEPT_ID,u.DEPT_ID_OTHER,u.SEX,u.USER_PRIV_OTHER,u.SHORTCUT,u.JOB_ID, u.USER_SECRECY,d.DEPT_NAME,user_ext.* from "USER" u,department d,user_ext  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=user_ext.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="findUsersByuserId" resultMap="UserResultMap" databaseId="dm">
        select  u.USER_NAME,u.BYNAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,u.USER_NO,U.AVATAR,U."UID",u.USER_PRIV,u.DEPT_ID,u.DEPT_ID_OTHER, u.SEX,u.USER_PRIV_OTHER,u.SHORTCUT,u.JOB_ID,u.USER_SECRECY,d.DEPT_NAME,ue.* from "USER" u , department d , user_ext ue  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=ue.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="findUsersByuserId" resultMap="UserResultMap" databaseId="kingbase">
        select  u.USER_NAME,u.BYNAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,u.USER_NO,U.AVATAR,U."UID",u.USER_PRIV,u.DEPT_ID,u.DEPT_ID_OTHER, u.SEX,u.USER_PRIV_OTHER,u.SHORTCUT,u.JOB_ID,u.USER_SECRECY,d.DEPT_NAME,
        ue.nick_name,ue.bbs_counter,ue.score,ue.duty_type,ue.login_restriction
        from "USER" u,"department" d,"user_ext" ue  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=ue.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="SimplefindUsersByuserId" resultMap="UserResultMap">
        select u.USER_NAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.SEX,u.USER_SECRECY,d.DEPT_NAME,user_ext.* from USER u ,department d ,user_ext  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=user_ext.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="SimplefindUsersByuserId" resultMap="UserResultMap" databaseId="oracle">
        select u.USER_NAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.SEX,u.USER_SECRECY,d.DEPT_NAME,user_ext.* from "USER" u ,department d ,user_ext  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=user_ext.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="SimplefindUsersByuserId" resultMap="UserResultMap" databaseId="dm">
        select u.USER_NAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.SEX,u.USER_SECRECY,d.DEPT_NAME,user_ext.* from "USER" u , department d , user_ext  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=user_ext.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="SimplefindUsersByuserId" resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME,u.USER_PRIV_NAME,u.BIRTHDAY,u.TEL_NO_HOME,u.TEL_NO_DEPT,u.ADD_HOME,u.POST_NO_HOME,u.FAX_NO_DEPT,u.MOBIL_NO,u.BP_NO,u.EMAIL,u.OICQ_NO,u.ICQ_NO,u.MSN,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.SEX,u.USER_SECRECY,d.DEPT_NAME,user_ext.* from "user" u ,department d ,user_ext  where u.DEPT_ID= d.DEPT_ID and u.USER_ID=user_ext.USER_ID and u.USER_ID= #{userId}
    </select>

    <select id="getByUid"
            resultType="com.xoa.model.users.Users">
        select u.USER_ID as userId,u.UID as uid ,u.USER_NAME as
        userName,u.BYNAME,u.USER_PRIV_NAME as userPrivName, u.POST_ID as postId, u.USER_NO as userNo,
        u.SEX,d.DEPT_NAME as deptName,u.AVATAR,u.DEPT_ID as deptId,u.DEPT_ID_OTHER as deptIdOther,u.USER_PRIV as userPriv , u.ICQ_NO as icqNo from user u
        INNER JOIN department d ON (u.DEPT_ID= d.DEPT_ID OR u.DEPT_ID=0)
        where   UID= #{uid} GROUP BY u.uid
    </select>

    <select id="getByUid"
            resultType="com.xoa.model.users.Users" databaseId="oracle">
        select u.USER_ID as userId,u."UID" as "uid" ,u.USER_NAME as
        userName,u.BYNAME,u.USER_PRIV_NAME as userPrivName,
        u.SEX,d.DEPT_NAME as deptName,u.AVATAR from "USER" u
        INNER JOIN department d ON u.DEPT_ID= d.DEPT_ID
        where   u."UID"=  #{uid}
    </select>

    <select id="getByUid"
            resultType="com.xoa.model.users.Users" databaseId="dm">
        select u.USER_ID as userId,u."UID" as "uid" ,u.USER_NAME as
        userName,u.BYNAME,u.USER_PRIV_NAME as userPrivName,
        u.SEX,d.DEPT_NAME as deptName,u.AVATAR from "USER" u
        INNER JOIN department d ON u.DEPT_ID= d.DEPT_ID
        where   u."UID"=  #{uid}
    </select>

    <select id="getByUid"
            resultType="com.xoa.model.users.Users" databaseId="kingbase">
        select u.USER_ID as userId,u.UID as uid ,u.USER_NAME as
        userName,u.BYNAME,u.USER_PRIV_NAME as userPrivName, u.POST_ID as postId, u.USER_NO as userNo,
        u.SEX,d.DEPT_NAME as deptName,u.AVATAR,u.DEPT_ID as deptId,u.DEPT_ID_OTHER as deptIdOther,u.USER_PRIV as userPriv , u.ICQ_NO as icqNo
        from "user" u
        INNER JOIN department d ON (u.DEPT_ID= d.DEPT_ID OR u.DEPT_ID=0)
        where   u.UID= #{uid}
    </select>


    <select id="getBySearch" parameterType="Map"
            resultType="com.xoa.model.users.Users">
        select u.USER_NAME as userName,u.sex,
        u.USER_NAME as name ,u.USER_PRIV_NAME as userPrivName,u.USER_ID AS userId,
        d.DEPT_NAME as deptName ,u.UID ,u.AVATAR ,u.USER_ID as userId
        from user u
        ,department d where u.DEPT_ID= d.DEPT_ID AND u.DEPT_ID!=0 AND u.NOT_LOGIN!=1 AND (
        u.USER_NAME like CONCAT(CONCAT('%', #{userName}), '%')
        or u.USER_PRIV_NAME like CONCAT(CONCAT('%', #{userPrivName}), '%')
        or d.DEPT_NAME like CONCAT(CONCAT('%', #{deptName}), '%')
        or u.USER_ID like CONCAT(CONCAT('%', #{userId}), '%')
        or u.BYNAME like CONCAT(CONCAT('%', #{byName}), '%'))
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUserAndDept" parameterType="java.lang.Integer"
            resultType="com.xoa.model.users.Users">
        select u.UID,u.USER_ID as userId,u.USER_NAME as name,u.USER_NAME as
        userName,u.BYNAME,u.USER_PRIV,u.USER_PRIV_NAME as userPrivName,
        u.DEPT_ID,u.SEX,u.AVATAR, d.DEPT_NAME as deptName from user u
        ,department d
        where u.DEPT_ID= d.DEPT_ID and u.NOT_LOGIN!=1 ORDER BY DEPT_NO,user_priv_no,user_no,USER_NAME ASC ;
    </select>

    <select id="findUserByName" resultMap="UserResultMap">
        select
        u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.SEX,u.AVATAR,s.PARA_NAME,s.PARA_VALUE,u.MY_STATUS,u.THEME,u.NOT_LOGIN,u.MOBIL_NO
        from USER u,sys_para s WHERE
        u.BYNAME= #{byname}   and s.PARA_NAME='IM_WINDOW_CAPTION'
    </select>
    <select id="findUserByName" resultMap="UserResultMap" databaseId="oracle">
        select
        u."UID",u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.SEX,u.AVATAR,s.PARA_NAME,s.PARA_VALUE,u.MY_STATUS,u.THEME,u.NOT_LOGIN,u.MOBIL_NO
        from "USER" U,sys_para s WHERE
        u.BYNAME= #{byname}   and s.PARA_NAME='IM_WINDOW_CAPTION'
    </select>
    <select id="findUserByName" resultMap="UserResultMap" databaseId="kingbase">
        select
            u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.SEX,u.AVATAR,s.PARA_NAME,s.PARA_VALUE,u.MY_STATUS,u.THEME,u.NOT_LOGIN,u.MOBIL_NO
        from "USER" u,sys_para s WHERE
            u.BYNAME= #{byname}   and s.PARA_NAME='IM_WINDOW_CAPTION'
    </select>

    <select id="selectUserAllInfoByName" resultMap="UserResultMap">
        SELECT
        u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.`PASSWORD`,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.USER_PRIV_NO,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY,u.BP_NO,u.POST_ID,u.JOB_ID,u.ID_NUMBER,u.SIMPLE_INTERFACE,u.USER_SECRECY
        FROM
        USER u
        INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.BYNAME= #{byname}
    </select>


    <select id="selectUserAllInfoByName" resultMap="UserResultMap" databaseId="oracle">
      SELECT
        u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY
        FROM
        USER u
        INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.BYNAME= #{byname}
    </select>


    <select id="selectUserAllInfoByName" resultMap="UserResultMap" databaseId="dm">
      SELECT
        u."UID",u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY
        FROM
        "USER" u
        INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.BYNAME= #{byname}
    </select>

    <select id="selectUserAllInfoByName" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.USER_PRIV_NO,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY,u.BP_NO,u.POST_ID,u.JOB_ID,u.USER_SECRECY
        FROM
        "USER" u
        INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.BYNAME= #{byname}
    </select>

    <select id="getUsernameById" resultType="java.lang.String">
        select USER_NAME FROM user
        WHERE UID= #{uid}
    </select>

    <select id="getUsernameById" resultType="java.lang.String" databaseId="oracle">
        select USER_NAME FROM "USER"
        WHERE "UID"= #{uid}
    </select>

    <select id="getUsernameById" resultType="java.lang.String" databaseId="dm">
        select USER_NAME FROM "USER"
        WHERE "UID"= #{uid}
    </select>

    <select id="getUsernameById" resultType="java.lang.String" databaseId="kingbase">
        select USER_NAME FROM "user"
        WHERE UID= #{uid}
    </select>

    <select id="getUsernameByUserId" resultType="java.lang.String">
        select USER_NAME
        FROM user
        WHERE USER_ID = #{userId}
    </select>
    <select id="getUsernameByUserId" resultType="java.lang.String" databaseId="oracle">
        select USER_NAME
        FROM "USER"
        WHERE USER_ID = #{userId}
    </select>

    <select id="getUsernameByUserId" resultType="java.lang.String" databaseId="dm">
        select USER_NAME
        FROM "USER"
        WHERE USER_ID = #{userId}
    </select>

    <select id="getUsernameByUserId" resultType="java.lang.String" databaseId="kingbase">
        select USER_NAME
        FROM "USER"
        WHERE USER_ID = #{userId}
    </select>

    <select id="getByUserId" parameterType="java.lang.String" resultMap="UserResultMap">
        select <include refid="Column_List" />
        FROM user
        WHERE USER_ID = #{userId}
    </select>

    <select id="getByUserId" parameterType="java.lang.String" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="Column_List_KB" />
        FROM "USER"
        WHERE USER_ID = #{userId}
    </select>


    <select id="getDatagrid" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user ORDER BY user_priv_no,user_no
    </select>

    <select id="getAlluser" resultType="com.xoa.model.users.Users">
        select
        UID as uid,USER_ID as userId,USER_NAME as userName,BYNAME as byName,USER_PRIV as userPriv,
        USER_PRIV_NAME as userPrivName,u.DEPT_ID as deptId,SEX as sex,AVATAR as avatar,USER_NAME as name,USER_NAME_INDEX
        ,d.dept_name deptName
        from user u
        INNER JOIN department d on d.dept_id = u.dept_id
        where u.dept_id != 0
        <if test="userId != null and userId !=''">
            and USER_ID = #{userId}
        </if>
        <if test="userName != null and userName !=''">
            and USER_NAME like concat('%', #{userName},'%')
        </if>
        <if test="userNameIndex != null and userNameIndex !=''">
            and USER_NAME_INDEX = #{userNameIndex}
        </if>
        <if test="byname != null and byname !=''">
            and BYNAME = #{byname}
        </if>
        <if test="useingKey != null and useingKey !=''">
            and USEING_KEY = #{useingKey}
        </if>
        <if test="usingFinger != null and usingFinger !=''">
            and USING_FINGER = #{usingFinger}
        </if>
        <if test="password != null and password !=''">
            and PASSWORD = #{password}
        </if>
        <if test="keySn != null and keySn !=''">
            and KEY_SN = #{keySn}
        </if>
        <if test="secureKeySn != null and secureKeySn !=''">
            and SECURE_KEY_SN = #{secureKeySn}
        </if>
        <if test="userPriv != null and userPriv !='' ">
            and USER_PRIV = #{userPriv}
        </if>
        <if test="userPrivNo != null and userPrivNo !=''">
            and USER_PRIV_NO = #{userPrivNo}
        </if>
        <if test="userPrivName != null and userPrivName !=''">
            and USER_PRIV_NAME = #{userPrivName}
        </if>
        <if test="postPriv != null and postPriv !=''or postPriv==0 ">
            and POST_PRIV = #{postPriv}
        </if>
        <if test="postDept != null and postDept !=''">
            and POST_DEPT = #{postDept}
        </if>
        <if test="deptId != null and deptId !=''">
            and u.DEPT_ID = #{deptId}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and DEPT_ID_OTHER = #{deptIdOther}
        </if>
        <if test="sex != null and sex !=''">
            and SEX = #{sex}
        </if>
        <if test="birthday != null ">
            and BIRTHDAY = #{birthday}
        </if>
        <if test="isLunar != null and isLunar !=''">
            and IS_LUNAR = #{isLunar}
        </if>
        <if test="telNoDept != null and telNoDept !=''">
            and TEL_NO_DEPT = #{telNoDept}
        </if>
        <if test="faxNoDept != null and faxNoDept !=''">
            and FAX_NO_DEPT = #{faxNoDept}
        </if>
        <if test="addHome != null and addHome !=''">
            and ADD_HOME = #{addHome}
        </if>
        <if test="postNoHome != null and postNoHome !=''">
            and POST_NO_HOME = #{postNoHome}
        </if>
        <if test="telNoHome != null and telNoHome !=''">
            and TEL_NO_HOME = #{telNoHome}
        </if>
        <if test="mobilNo != null and mobilNo !=''">
            and MOBIL_NO = #{mobilNo}
        </if>
        <if test="bpNo != null and bpNo !=''">
            and BP_NO = #{bpNo}
        </if>
        <if test="email != null and email !=''">
            and EMAIL = #{email}
        </if>
        <if test="oicqNo != null and oicqNo !=''">
            and OICQ_NO = #{oicqNo}
        </if>
        <if test="icqNo != null and icqNo !=''">
            and ICQ_NO = #{icqNo}
        </if>
        <if test="msn != null and msn !=''">
            and MSN = #{msn}
        </if>
        <if test="avatar != null and avatar !=''">
            and AVATAR = #{avatar}
        </if>
        <if test="callSound != null and callSound !=''">
            and CALL_SOUND = #{callSound}
        </if>
        <if test="lastVisitTime != null  ">
            and LAST_VISIT_TIME = #{lastVisitTime}
        </if>
        <if test="smsOn != null and smsOn !=''">
            and SMS_ON = #{smsOn}
        </if>
        <if test="menuType != null and menuType !=''">
            and MENU_TYPE = #{menuType}
        </if>
        <if test="lastPassTime != null ">
            and LAST_PASS_TIME = #{lastPassTime}
        </if>
        <if test="theme != null and theme !=''">
            and THEME = #{theme}
        </if>
        <if test="portal != null and portal !=''">
            and PORTAL = #{portal}
        </if>
        <if test="panel != null and panel !=''">
            and PANEL = #{panel}
        </if>
        <if test="online != null and online !=''">
            and ONLINE = #{online}
        </if>
        <if test="onStatus != null and onStatus !=''">
            and ON_STATUS = #{onStatus}
        </if>
        <if test="attendStatus != null and attendStatus !=''">
            and ATTEND_STATUS = #{attendStatus}
        </if>
        <if test="mobilNoHidden != null and mobilNoHidden !=''">
            and MOBIL_NO_HIDDEN = #{mobilNoHidden}
        </if>
        <if test="mytableLeft != null and mytableLeft !=''">
            and MYTABLE_LEFT = #{mytableLeft}
        </if>
        <if test="mytableRight != null and mytableRight !=''">
            and MYTABLE_RIGHT = #{mytableRight}
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and USER_PRIV_OTHER = #{userPrivOther}
        </if>
        <if test="userNo != null and userNo !=''">
            and USER_NO = #{userNo}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin==0 ">
            and NOT_LOGIN = #{notLogin}
        </if>
        <if test="notViewUser != null and notViewUser !=''">
            and NOT_VIEW_USER = #{notViewUser}
        </if>
        <if test="notViewTable != null and notViewTable !=''">
            and NOT_VIEW_TABLE = #{notViewTable}
        </if>
        <if test="notSearch != null and notSearch !=''">
            and NOT_SEARCH = #{notSearch}
        </if>
        <if test="bkground != null and bkground !=''">
            and BKGROUND = #{bkground}
        </if>
        <if test="bindIp != null and bindIp !=''">
            and BIND_IP = #{bindIp}
        </if>
        <if test="lastVisitIp != null and lastVisitIp !=''">
            and LAST_VISIT_IP = #{lastVisitIp}
        </if>
        <if test="menuImage != null and menuImage !=''">
            and MENU_IMAGE = #{menuImage}
        </if>
        <if test="weatherCity != null and weatherCity !=''">
            and WEATHER_CITY = #{weatherCity}
        </if>
        <if test="showRss != null and showRss !=''">
            and SHOW_RSS = #{showRss}
        </if>
        <if test="menuExpand != null and menuExpand !=''">
            and MENU_EXPAND = #{menuExpand}
        </if>
        <if test="myStatus != null and myStatus !=''">
            and MY_STATUS = #{myStatus}
        </if>
        <if test="limitLogin != null and limitLogin !=''">
            and LIMIT_LOGIN = #{limitLogin}
        </if>
        <if test="photo != null and photo !=''">
            and PHOTO = #{photo}
        </if>
        <if test="imRange != null and imRange !=''">
            and IM_RANGE = #{imRange}
        </if>
        <if test="leaveTime != null ">
            and LEAVE_TIME = #{leaveTime}
        </if>
        <if test="secretLevel != null and secretLevel !=''">
            and SECRET_LEVEL = #{secretLevel}
        </if>
        <if test="notMobileLogin != null and notMobileLogin !=''">
            and NOT_MOBILE_LOGIN = #{notMobileLogin}
        </if>
        <if test="manageModuleType != null and manageModuleType !=''">
            and MANAGE_MODULE_TYPE = #{manageModuleType}
        </if>
        <if test="userPrivType != null and userPrivType !=''">
            and USER_PRIV_TYPE = #{userPrivType}
        </if>
        <if test="userManageOrgs != null and userManageOrgs !=''">
            and USER_MANAGE_ORGS = #{userManageOrgs}
        </if>
        <if test="shortcut != null and shortcut !=''">
            and SHORTCUT = #{shortcut}
        </if>
        <if test="myRss != null and myRss !=''">
            and MY_RSS = #{myRss}
        </if>
        <if test="remark != null and remark !=''">
            and REMARK = #{remark}
        </if>
        <if test="userPara != null and userPara !=''">
            and USER_PARA = #{userPara}
        </if>
        <if test="idNumber != null and idNumber !=''">
            and ID_NUMBER = #{idNumber}
        </if>
        <if test="userIds != null and userIds !=''">
            or USER_ID in
            <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                <if test="userId != null and userId != '' ">
                    #{userId}
                </if>
            </foreach>
        </if>
        ORDER BY user_priv_no,user_no
    </select>


    <select id="getAllPrivOther" resultType="com.xoa.model.users.Users"
            parameterType="com.xoa.model.users.Users">
        select
        UID as uid,USER_ID as userId,USER_NAME as userName,BYNAME as byName,USER_PRIV as userPriv,
        USER_PRIV_NAME as userPrivName,DEPT_ID as deptId,SEX as sex,AVATAR as avatar,USER_NAME as
        name,USER_NAME_INDEX,USER_PRIV_OTHER
        from user
        where 1=1
        <if test="userId != null and userId !=''">
            and USER_ID = #{userId},
        </if>
        <if test="userName != null and userName !=''">
            and USER_NAME = #{userName},
        </if>
        <if test="userNameIndex != null and userNameIndex !=''">
            and USER_NAME_INDEX = #{userNameIndex},
        </if>
        <if test="byname != null and byname !=''">
            and BYNAME = #{byname},
        </if>
        <if test="useingKey != null and useingKey !=''">
            and USEING_KEY = #{useingKey},
        </if>
        <if test="usingFinger != null and usingFinger !=''">
            and USING_FINGER = #{usingFinger},
        </if>
        <if test="password != null and password !=''">
            and PASSWORD = #{password},
        </if>
        <if test="keySn != null and keySn !=''">
            and KEY_SN = #{keySn},
        </if>
        <if test="secureKeySn != null and secureKeySn !=''">
            and SECURE_KEY_SN = #{secureKeySn},
        </if>
        <if test="userPriv != null and userPriv !='' ">
            and USER_PRIV = #{userPriv},
        </if>
        <if test="userPrivNo != null and userPrivNo !=''">
            and USER_PRIV_NO = #{userPrivNo},
        </if>
        <if test="userPrivName != null and userPrivName !=''">
            and USER_PRIV_NAME = #{userPrivName},
        </if>
        <if test="postPriv != null and postPriv !=''or postPriv==0 ">
            and POST_PRIV = #{postPriv},
        </if>
        <if test="postDept != null and postDept !=''">
            and POST_DEPT = #{postDept},
        </if>
        <if test="deptId != null and deptId !=''">
            and DEPT_ID = #{deptId},
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and DEPT_ID_OTHER = #{deptIdOther},
        </if>
        <if test="sex != null and sex !=''">
            and SEX = #{sex},
        </if>
        <if test="birthday != null ">
            and BIRTHDAY = #{birthday},
        </if>
        <if test="isLunar != null and isLunar !=''">
            and IS_LUNAR = #{isLunar},
        </if>
        <if test="telNoDept != null and telNoDept !=''">
            and TEL_NO_DEPT = #{telNoDept},
        </if>
        <if test="faxNoDept != null and faxNoDept !=''">
            and FAX_NO_DEPT = #{faxNoDept},
        </if>
        <if test="addHome != null and addHome !=''">
            and ADD_HOME = #{addHome},
        </if>
        <if test="postNoHome != null and postNoHome !=''">
            and POST_NO_HOME = #{postNoHome},
        </if>
        <if test="telNoHome != null and telNoHome !=''">
            and TEL_NO_HOME = #{telNoHome},
        </if>
        <if test="mobilNo != null and mobilNo !=''">
            and MOBIL_NO = #{mobilNo},
        </if>
        <if test="bpNo != null and bpNo !=''">
            and BP_NO = #{bpNo},
        </if>
        <if test="email != null and email !=''">
            and EMAIL = #{email},
        </if>
        <if test="oicqNo != null and oicqNo !=''">
            and OICQ_NO = #{oicqNo},
        </if>
        <if test="icqNo != null and icqNo !=''">
            and ICQ_NO = #{icqNo},
        </if>
        <if test="msn != null and msn !=''">
            and MSN = #{msn},
        </if>
        <if test="avatar != null and avatar !=''">
            and AVATAR = #{avatar},
        </if>
        <if test="callSound != null and callSound !=''">
            and CALL_SOUND = #{callSound},
        </if>
        <if test="lastVisitTime != null  ">
            and LAST_VISIT_TIME = #{lastVisitTime},
        </if>
        <if test="smsOn != null and smsOn !=''">
            and SMS_ON = #{smsOn},
        </if>
        <if test="menuType != null and menuType !=''">
            and MENU_TYPE = #{menuType},
        </if>
        <if test="lastPassTime != null ">
            and LAST_PASS_TIME = #{lastPassTime},
        </if>
        <if test="theme != null and theme !=''">
            and THEME = #{theme},
        </if>
        <if test="portal != null and portal !=''">
            and PORTAL = #{portal},
        </if>
        <if test="panel != null and panel !=''">
            and PANEL = #{panel},
        </if>
        <if test="online != null and online !=''">
            and ONLINE = #{online},
        </if>
        <if test="onStatus != null and onStatus !=''">
            and ON_STATUS = #{onStatus},
        </if>
        <if test="attendStatus != null and attendStatus !=''">
            and ATTEND_STATUS = #{attendStatus},
        </if>
        <if test="mobilNoHidden != null and mobilNoHidden !=''">
            and MOBIL_NO_HIDDEN = #{mobilNoHidden},
        </if>
        <if test="mytableLeft != null and mytableLeft !=''">
            and MYTABLE_LEFT = #{mytableLeft},
        </if>
        <if test="mytableRight != null and mytableRight !=''">
            and MYTABLE_RIGHT = #{mytableRight},
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and USER_PRIV_OTHER = #{userPrivOther},
        </if>
        <if test="userNo != null and userNo !=''">
            and USER_NO = #{userNo},
        </if>
        <if test="notLogin != null and notLogin !=''">
            and NOT_LOGIN = #{notLogin},
        </if>
        <if test="notViewUser != null and notViewUser !=''">
            and NOT_VIEW_USER = #{notViewUser},
        </if>
        <if test="notViewTable != null and notViewTable !=''">
            and NOT_VIEW_TABLE = #{notViewTable},
        </if>
        <if test="notSearch != null and notSearch !=''">
            and NOT_SEARCH = #{notSearch},
        </if>
        <if test="bkground != null and bkground !=''">
            and BKGROUND = #{bkground},
        </if>
        <if test="bindIp != null and bindIp !=''">
            and BIND_IP = #{bindIp},
        </if>
        <if test="lastVisitIp != null and lastVisitIp !=''">
            and LAST_VISIT_IP = #{lastVisitIp},
        </if>
        <if test="menuImage != null and menuImage !=''">
            and MENU_IMAGE = #{menuImage},
        </if>
        <if test="weatherCity != null and weatherCity !=''">
            and WEATHER_CITY = #{weatherCity},
        </if>
        <if test="showRss != null and showRss !=''">
            and SHOW_RSS = #{showRss},
        </if>
        <if test="menuExpand != null and menuExpand !=''">
            and MENU_EXPAND = #{menuExpand},
        </if>
        <if test="myStatus != null and myStatus !=''">
            and MY_STATUS = #{myStatus},
        </if>
        <if test="limitLogin != null and limitLogin !=''">
            and LIMIT_LOGIN = #{limitLogin},
        </if>
        <if test="photo != null and photo !=''">
            and PHOTO = #{photo},
        </if>
        <if test="imRange != null and imRange !=''">
            and IM_RANGE = #{imRange},
        </if>
        <if test="leaveTime != null ">
            and LEAVE_TIME = #{leaveTime},
        </if>
        <if test="secretLevel != null and secretLevel !=''">
            and SECRET_LEVEL = #{secretLevel},
        </if>
        <if test="notMobileLogin != null and notMobileLogin !=''">
            and NOT_MOBILE_LOGIN = #{notMobileLogin},
        </if>
        <if test="manageModuleType != null and manageModuleType !=''">
            and MANAGE_MODULE_TYPE = #{manageModuleType},
        </if>
        <if test="userPrivType != null and userPrivType !=''">
            and USER_PRIV_TYPE = #{userPrivType},
        </if>
        <if test="userManageOrgs != null and userManageOrgs !=''">
            and USER_MANAGE_ORGS = #{userManageOrgs},
        </if>
        <if test="shortcut != null and shortcut !=''">
            and SHORTCUT = #{shortcut},
        </if>
        <if test="myRss != null and myRss !=''">
            and MY_RSS = #{myRss},
        </if>
        <if test="remark != null and remark !=''">
            and REMARK = #{remark},
        </if>
        <if test="userPara != null and userPara !=''">
            and USER_PARA = #{userPara}
        </if>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getAlluser" resultType="com.xoa.model.users.Users"
            parameterType="com.xoa.model.users.Users" databaseId="oracle">
        select
        "UID" as "uid",USER_ID as userId,USER_NAME as userName,BYNAME as byName,USER_PRIV as userPriv,
        USER_PRIV_NAME as userPrivName,DEPT_ID as deptId,SEX as sex,AVATAR as avatar,USER_NAME as name
        from "USER"
        where 1=1
        <if test="userId != null and userId !=''">
            and USER_ID = #{userId},
        </if>
        <if test="userName != null and userName !=''">
            and USER_NAME = #{userName},
        </if>
        <if test="userNameIndex != null and userNameIndex !=''">
            and USER_NAME_INDEX = #{userNameIndex},
        </if>
        <if test="byname != null and byname !=''">
            and BYNAME = #{byname},
        </if>
        <if test="useingKey != null and useingKey !=''">
            and USEING_KEY = #{useingKey},
        </if>
        <if test="usingFinger != null and usingFinger !=''">
            and USING_FINGER = #{usingFinger},
        </if>
        <if test="password != null and password !=''">
            and PASSWORD = #{password},
        </if>
        <if test="keySn != null and keySn !=''">
            and KEY_SN = #{keySn},
        </if>
        <if test="secureKeySn != null and secureKeySn !=''">
            and SECURE_KEY_SN = #{secureKeySn},
        </if>
        <if test="userPriv != null and userPriv !='' ">
            and USER_PRIV = #{userPriv},
        </if>
        <if test="userPrivNo != null and userPrivNo !=''">
            and USER_PRIV_NO = #{userPrivNo},
        </if>
        <if test="userPrivName != null and userPrivName !=''">
            and USER_PRIV_NAME = #{userPrivName},
        </if>
        <if test="postPriv != null and postPriv !=''or postPriv==0 ">
            and POST_PRIV = #{postPriv},
        </if>
        <if test="postDept != null and postDept !=''">
            and POST_DEPT = #{postDept},
        </if>
        <if test="deptId != null and deptId !=''">
            and DEPT_ID = #{deptId},
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and DEPT_ID_OTHER = #{deptIdOther},
        </if>
        <if test="sex != null and sex !=''">
            and SEX = #{sex},
        </if>
        <if test="birthday != null ">
            and BIRTHDAY = #{birthday},
        </if>
        <if test="isLunar != null and isLunar !=''">
            and IS_LUNAR = #{isLunar},
        </if>
        <if test="telNoDept != null and telNoDept !=''">
            and TEL_NO_DEPT = #{telNoDept},
        </if>
        <if test="faxNoDept != null and faxNoDept !=''">
            and FAX_NO_DEPT = #{faxNoDept},
        </if>
        <if test="addHome != null and addHome !=''">
            and ADD_HOME = #{addHome},
        </if>
        <if test="postNoHome != null and postNoHome !=''">
            and POST_NO_HOME = #{postNoHome},
        </if>
        <if test="telNoHome != null and telNoHome !=''">
            and TEL_NO_HOME = #{telNoHome},
        </if>
        <if test="mobilNo != null and mobilNo !=''">
            and MOBIL_NO = #{mobilNo},
        </if>
        <if test="bpNo != null and bpNo !=''">
            and BP_NO = #{bpNo},
        </if>
        <if test="email != null and email !=''">
            and EMAIL = #{email},
        </if>
        <if test="oicqNo != null and oicqNo !=''">
            and OICQ_NO = #{oicqNo},
        </if>
        <if test="icqNo != null and icqNo !=''">
            and ICQ_NO = #{icqNo},
        </if>
        <if test="msn != null and msn !=''">
            and MSN = #{msn},
        </if>
        <if test="avatar != null and avatar !=''">
            and AVATAR = #{avatar},
        </if>
        <if test="callSound != null and callSound !=''">
            and CALL_SOUND = #{callSound},
        </if>
        <if test="lastVisitTime != null  ">
            and LAST_VISIT_TIME = #{lastVisitTime},
        </if>
        <if test="smsOn != null and smsOn !=''">
            and SMS_ON = #{smsOn},
        </if>
        <if test="menuType != null and menuType !=''">
            and MENU_TYPE = #{menuType},
        </if>
        <if test="lastPassTime != null ">
            and LAST_PASS_TIME = #{lastPassTime},
        </if>
        <if test="theme != null and theme !=''">
            and THEME = #{theme},
        </if>
        <if test="portal != null and portal !=''">
            and PORTAL = #{portal},
        </if>
        <if test="panel != null and panel !=''">
            and PANEL = #{panel},
        </if>
        <if test="online != null and online !=''">
            and ONLINE = #{online},
        </if>
        <if test="onStatus != null and onStatus !=''">
            and ON_STATUS = #{onStatus},
        </if>
        <if test="attendStatus != null and attendStatus !=''">
            and ATTEND_STATUS = #{attendStatus},
        </if>
        <if test="mobilNoHidden != null and mobilNoHidden !=''">
            and MOBIL_NO_HIDDEN = #{mobilNoHidden},
        </if>
        <if test="mytableLeft != null and mytableLeft !=''">
            and MYTABLE_LEFT = #{mytableLeft},
        </if>
        <if test="mytableRight != null and mytableRight !=''">
            and MYTABLE_RIGHT = #{mytableRight},
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and USER_PRIV_OTHER = #{userPrivOther},
        </if>
        <if test="userNo != null and userNo !=''">
            and USER_NO = #{userNo},
        </if>
        <if test="notLogin != null and notLogin !=''">
            and NOT_LOGIN = #{notLogin},
        </if>
        <if test="notViewUser != null and notViewUser !=''">
            and NOT_VIEW_USER = #{notViewUser},
        </if>
        <if test="notViewTable != null and notViewTable !=''">
            and NOT_VIEW_TABLE = #{notViewTable},
        </if>
        <if test="notSearch != null and notSearch !=''">
            and NOT_SEARCH = #{notSearch},
        </if>
        <if test="bkground != null and bkground !=''">
            and BKGROUND = #{bkground},
        </if>
        <if test="bindIp != null and bindIp !=''">
            and BIND_IP = #{bindIp},
        </if>
        <if test="lastVisitIp != null and lastVisitIp !=''">
            and LAST_VISIT_IP = #{lastVisitIp},
        </if>
        <if test="menuImage != null and menuImage !=''">
            and MENU_IMAGE = #{menuImage},
        </if>
        <if test="weatherCity != null and weatherCity !=''">
            and WEATHER_CITY = #{weatherCity},
        </if>
        <if test="showRss != null and showRss !=''">
            and SHOW_RSS = #{showRss},
        </if>
        <if test="menuExpand != null and menuExpand !=''">
            and MENU_EXPAND = #{menuExpand},
        </if>
        <if test="myStatus != null and myStatus !=''">
            and MY_STATUS = #{myStatus},
        </if>
        <if test="limitLogin != null and limitLogin !=''">
            and LIMIT_LOGIN = #{limitLogin},
        </if>
        <if test="photo != null and photo !=''">
            and PHOTO = #{photo},
        </if>
        <if test="imRange != null and imRange !=''">
            and IM_RANGE = #{imRange},
        </if>
        <if test="leaveTime != null ">
            and LEAVE_TIME = #{leaveTime},
        </if>
        <if test="secretLevel != null and secretLevel !=''">
            and SECRET_LEVEL = #{secretLevel},
        </if>
        <if test="notMobileLogin != null and notMobileLogin !=''">
            and NOT_MOBILE_LOGIN = #{notMobileLogin},
        </if>
        <if test="manageModuleType != null and manageModuleType !=''">
            and MANAGE_MODULE_TYPE = #{manageModuleType},
        </if>
        <if test="userPrivType != null and userPrivType !=''">
            and USER_PRIV_TYPE = #{userPrivType},
        </if>
        <if test="userManageOrgs != null and userManageOrgs !=''">
            and USER_MANAGE_ORGS = #{userManageOrgs},
        </if>
        <if test="shortcut != null and shortcut !=''">
            and SHORTCUT = #{shortcut},
        </if>
        <if test="myRss != null and myRss !=''">
            and MY_RSS = #{myRss},
        </if>
        <if test="remark != null and remark !=''">
            and REMARK = #{remark},
        </if>
        <if test="userPara != null and userPara !=''">
            and USER_PARA = #{userPara}
        </if>
        <if test="userIds != null and userIds !=''">
            or USER_ID in
            <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                <if test="userId != null and userId != '' ">
                    #{userId}
                </if>
            </foreach>
        </if>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getAlluser" resultType="com.xoa.model.users.Users"
            parameterType="com.xoa.model.users.Users" databaseId="dm">
        select
        "UID" as "uid",USER_ID as userId,USER_NAME as userName,BYNAME as byName,USER_PRIV as userPriv,
        USER_PRIV_NAME as userPrivName,DEPT_ID as deptId,SEX as sex,AVATAR as avatar,USER_NAME as name
        from "USER"
        where 1=1
        <if test="userId != null and userId !=''">
            and USER_ID = #{userId},
        </if>
        <if test="userName != null and userName !=''">
            and USER_NAME = #{userName},
        </if>
        <if test="userNameIndex != null and userNameIndex !=''">
            and USER_NAME_INDEX = #{userNameIndex},
        </if>
        <if test="byname != null and byname !=''">
            and BYNAME = #{byname},
        </if>
        <if test="useingKey != null and useingKey !=''">
            and USEING_KEY = #{useingKey},
        </if>
        <if test="usingFinger != null and usingFinger !=''">
            and USING_FINGER = #{usingFinger},
        </if>
        <if test="password != null and password !=''">
            and PASSWORD = #{password},
        </if>
        <if test="keySn != null and keySn !=''">
            and KEY_SN = #{keySn},
        </if>
        <if test="secureKeySn != null and secureKeySn !=''">
            and SECURE_KEY_SN = #{secureKeySn},
        </if>
        <if test="userPriv != null and userPriv !='' ">
            and USER_PRIV = #{userPriv},
        </if>
        <if test="userPrivNo != null and userPrivNo !=''">
            and USER_PRIV_NO = #{userPrivNo},
        </if>
        <if test="userPrivName != null and userPrivName !=''">
            and USER_PRIV_NAME = #{userPrivName},
        </if>
        <if test="postPriv != null and postPriv !=''or postPriv==0 ">
            and POST_PRIV = #{postPriv},
        </if>
        <if test="postDept != null and postDept !=''">
            and POST_DEPT = #{postDept},
        </if>
        <if test="deptId != null and deptId !=''">
            and DEPT_ID = #{deptId},
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and DEPT_ID_OTHER = #{deptIdOther},
        </if>
        <if test="sex != null and sex !=''">
            and SEX = #{sex},
        </if>
        <if test="birthday != null ">
            and BIRTHDAY = #{birthday},
        </if>
        <if test="isLunar != null and isLunar !=''">
            and IS_LUNAR = #{isLunar},
        </if>
        <if test="telNoDept != null and telNoDept !=''">
            and TEL_NO_DEPT = #{telNoDept},
        </if>
        <if test="faxNoDept != null and faxNoDept !=''">
            and FAX_NO_DEPT = #{faxNoDept},
        </if>
        <if test="addHome != null and addHome !=''">
            and ADD_HOME = #{addHome},
        </if>
        <if test="postNoHome != null and postNoHome !=''">
            and POST_NO_HOME = #{postNoHome},
        </if>
        <if test="telNoHome != null and telNoHome !=''">
            and TEL_NO_HOME = #{telNoHome},
        </if>
        <if test="mobilNo != null and mobilNo !=''">
            and MOBIL_NO = #{mobilNo},
        </if>
        <if test="bpNo != null and bpNo !=''">
            and BP_NO = #{bpNo},
        </if>
        <if test="email != null and email !=''">
            and EMAIL = #{email},
        </if>
        <if test="oicqNo != null and oicqNo !=''">
            and OICQ_NO = #{oicqNo},
        </if>
        <if test="icqNo != null and icqNo !=''">
            and ICQ_NO = #{icqNo},
        </if>
        <if test="msn != null and msn !=''">
            and MSN = #{msn},
        </if>
        <if test="avatar != null and avatar !=''">
            and AVATAR = #{avatar},
        </if>
        <if test="callSound != null and callSound !=''">
            and CALL_SOUND = #{callSound},
        </if>
        <if test="lastVisitTime != null  ">
            and LAST_VISIT_TIME = #{lastVisitTime},
        </if>
        <if test="smsOn != null and smsOn !=''">
            and SMS_ON = #{smsOn},
        </if>
        <if test="menuType != null and menuType !=''">
            and MENU_TYPE = #{menuType},
        </if>
        <if test="lastPassTime != null ">
            and LAST_PASS_TIME = #{lastPassTime},
        </if>
        <if test="theme != null and theme !=''">
            and THEME = #{theme},
        </if>
        <if test="portal != null and portal !=''">
            and PORTAL = #{portal},
        </if>
        <if test="panel != null and panel !=''">
            and PANEL = #{panel},
        </if>
        <if test="online != null and online !=''">
            and ONLINE = #{online},
        </if>
        <if test="onStatus != null and onStatus !=''">
            and ON_STATUS = #{onStatus},
        </if>
        <if test="attendStatus != null and attendStatus !=''">
            and ATTEND_STATUS = #{attendStatus},
        </if>
        <if test="mobilNoHidden != null and mobilNoHidden !=''">
            and MOBIL_NO_HIDDEN = #{mobilNoHidden},
        </if>
        <if test="mytableLeft != null and mytableLeft !=''">
            and MYTABLE_LEFT = #{mytableLeft},
        </if>
        <if test="mytableRight != null and mytableRight !=''">
            and MYTABLE_RIGHT = #{mytableRight},
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and USER_PRIV_OTHER = #{userPrivOther},
        </if>
        <if test="userNo != null and userNo !=''">
            and USER_NO = #{userNo},
        </if>
        <if test="notLogin != null and notLogin !=''">
            and NOT_LOGIN = #{notLogin},
        </if>
        <if test="notViewUser != null and notViewUser !=''">
            and NOT_VIEW_USER = #{notViewUser},
        </if>
        <if test="notViewTable != null and notViewTable !=''">
            and NOT_VIEW_TABLE = #{notViewTable},
        </if>
        <if test="notSearch != null and notSearch !=''">
            and NOT_SEARCH = #{notSearch},
        </if>
        <if test="bkground != null and bkground !=''">
            and BKGROUND = #{bkground},
        </if>
        <if test="bindIp != null and bindIp !=''">
            and BIND_IP = #{bindIp},
        </if>
        <if test="lastVisitIp != null and lastVisitIp !=''">
            and LAST_VISIT_IP = #{lastVisitIp},
        </if>
        <if test="menuImage != null and menuImage !=''">
            and MENU_IMAGE = #{menuImage},
        </if>
        <if test="weatherCity != null and weatherCity !=''">
            and WEATHER_CITY = #{weatherCity},
        </if>
        <if test="showRss != null and showRss !=''">
            and SHOW_RSS = #{showRss},
        </if>
        <if test="menuExpand != null and menuExpand !=''">
            and MENU_EXPAND = #{menuExpand},
        </if>
        <if test="myStatus != null and myStatus !=''">
            and MY_STATUS = #{myStatus},
        </if>
        <if test="limitLogin != null and limitLogin !=''">
            and LIMIT_LOGIN = #{limitLogin},
        </if>
        <if test="photo != null and photo !=''">
            and PHOTO = #{photo},
        </if>
        <if test="imRange != null and imRange !=''">
            and IM_RANGE = #{imRange},
        </if>
        <if test="leaveTime != null ">
            and LEAVE_TIME = #{leaveTime},
        </if>
        <if test="secretLevel != null and secretLevel !=''">
            and SECRET_LEVEL = #{secretLevel},
        </if>
        <if test="notMobileLogin != null and notMobileLogin !=''">
            and NOT_MOBILE_LOGIN = #{notMobileLogin},
        </if>
        <if test="manageModuleType != null and manageModuleType !=''">
            and MANAGE_MODULE_TYPE = #{manageModuleType},
        </if>
        <if test="userPrivType != null and userPrivType !=''">
            and USER_PRIV_TYPE = #{userPrivType},
        </if>
        <if test="userManageOrgs != null and userManageOrgs !=''">
            and USER_MANAGE_ORGS = #{userManageOrgs},
        </if>
        <if test="shortcut != null and shortcut !=''">
            and SHORTCUT = #{shortcut},
        </if>
        <if test="myRss != null and myRss !=''">
            and MY_RSS = #{myRss},
        </if>
        <if test="remark != null and remark !=''">
            and REMARK = #{remark},
        </if>
        <if test="userPara != null and userPara !=''">
            and USER_PARA = #{userPara}
        </if>
        <if test="userIds != null and userIds !=''">
            or USER_ID in
            <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                <if test="userId != null and userId != '' ">
                    #{userId}
                </if>
            </foreach>
        </if>
        ORDER BY user_priv_no,user_no
    </select>
    <insert id="addUser" useGeneratedKeys="true" keyProperty="uid">
        <selectKey order="AFTER" keyProperty="uid" resultType="int">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into user(
        <trim suffixOverrides=",">
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="signImageId != null and signImageId !=''">
                SIGN_IMAGE_ID,
            </if>
            <if test="signImageName != null and signImageName !=''">
                SIGN_IMAGE_NAME,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                ONLINE,
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID,
            </if>
            <if test="deptYj != null and deptYj !=''">
                DEPT_YJ,
            </if>
            <if test="roomNum != null and roomNum !=''">
                ROOM_NUM
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="signImageId != null and signImageId !=''">
                #{signImageId},
            </if>
            <if test="signImageName != null and signImageName !=''">
                #{signImageName},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
            <if test="deptYj != null and deptYj !=''">
                #{deptYj}
            </if>
            <if test="roomNum != null and roomNum !=''">
                #{roomNum}
            </if>
        </trim>
        )
    </insert>

    <insert id="addUser" useGeneratedKeys="true" keyProperty="uid" databaseId="oracle">
        <selectKey order="BEFORE" keyProperty="uid" resultType="int">
            SELECT USER_UID_SEQ.nextval as "uid" FROM dual
        </selectKey>
        insert into "USER"(
        <trim suffixOverrides=",">
            "UID",
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                ONLINE,
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            #{uid},
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
        </trim>
        )
    </insert>

    <insert id="addUser" useGeneratedKeys="true" keyProperty="uid" databaseId="dm">
        <selectKey order="BEFORE" keyProperty="uid" resultType="int">
            SELECT USER_UID_SEQ.nextval as "uid" FROM dual
        </selectKey>
        insert into "USER"(
        <trim suffixOverrides=",">
            "UID",
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                ONLINE,
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            #{uid},
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
        </trim>
        )
    </insert>

    <insert id="addUser" useGeneratedKeys="true" keyProperty="uid" databaseId="kingbase">
        insert into "USER"(
        <trim suffixOverrides=",">
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="signImageId != null and signImageId !=''">
                SIGN_IMAGE_ID,
            </if>
            <if test="signImageName != null and signImageName !=''">
                SIGN_IMAGE_NAME,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                ONLINE,
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID,
            </if>
            <if test="deptYj != null and deptYj !=''">
                DEPT_YJ,
            </if>
            <if test="roomNum != null and roomNum !=''">
                ROOM_NUM
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="signImageId != null and signImageId !=''">
                #{signImageId},
            </if>
            <if test="signImageName != null and signImageName !=''">
                #{signImageName},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
            <if test="deptYj != null and deptYj !=''">
                #{deptYj}
            </if>
            <if test="roomNum != null and roomNum !=''">
                #{roomNum}
            </if>
        </trim>
        )
        returning USER_ID
    </insert>

    <update id="editUserImg" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="avatar != null">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="signImageId != null">
                SIGN_IMAGE_ID = #{signImageId},
            </if>
            <if test="signImageName != null">
                SIGN_IMAGE_NAME = #{signImageName},
            </if>
        </set>
        where UID = #{uid}
    </update>

    <update id="editUserImg" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "user"
        <set>
            <if test="avatar != null">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="signImageId != null">
                SIGN_IMAGE_ID = #{signImageId},
            </if>
            <if test="signImageName != null">
                SIGN_IMAGE_NAME = #{signImageName},
            </if>
        </set>
        where UID = #{uid}
    </update>

    <update id="editUser" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                BYNAME = #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null ">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="birthday!=null  ">
                BIRTHDAY = #{birthday},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null ">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null  ">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null  ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null ">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null  ">
                MSN = #{msn},
            </if>
            <if test="avatar != null">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="signImageId != null">
                SIGN_IMAGE_ID = #{signImageId},
            </if>
            <if test="signImageName != null">
                SIGN_IMAGE_NAME = #{signImageName},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                ONLINE = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null ">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="post!=null">
                POST = #{post},
            </if>
            <if test="postId!=null">
                POST_ID = #{postId},
            </if>
            <if test="jobId!=null">
                JOB_ID = #{jobId},
            </if>
            <if test="roomNum != null and roomNum !=''">
                ROOM_NUM = #{roomNum},
            </if>
            <if test="deptYj!=null">
                DEPT_YJ =#{deptYj},
            </if>
            <if test="mhOrg!=null">
                MH_ORG =#{mhOrg},
            </if>
            <if test="simpleInterface!=null">
                SIMPLE_INTERFACE =#{simpleInterface}
            </if>
        </set>
        where UID = #{uid}
    </update>

    <update id="editUser" parameterType="com.xoa.model.users.Users" databaseId="oracle">
        update  "USER"
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                BYNAME = #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                "PASSWORD" = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null ">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="birthday != null ">
                BIRTHDAY = #{birthday},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo!='' ">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null and email !='' ">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null and oicqNo!='' ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo!=''">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null and msn!='' ">
                MSN = #{msn},
            </if>
            <if test="avatar != null and avatar!='' ">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null and avatar128!='' ">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                "ONLINE" = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null ">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="post!=null">
                POST = #{post},
            </if>
            <if test="postId!=null">
                POST_ID = #{postId},
            </if>
            <if test="jobId!=null">
                JOB_ID = #{jobId}
            </if>
        </set>
        where "UID" = #{uid}
    </update>

    <update id="editUser" parameterType="com.xoa.model.users.Users" databaseId="dm">
        update  "USER"
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                BYNAME = #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                "PASSWORD" = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV=#{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null ">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="birthday != null ">
                BIRTHDAY = #{birthday},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null ">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null ">
                EMAIL=#{email},
            </if>
            <if test="oicqNo != null ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null ">
                MSN = #{msn},
            </if>
            <if test="avatar != null ">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null ">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                "ONLINE" = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null ">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="post!=null">
                POST = #{post},
            </if>
            <if test="postId!=null">
                POST_ID = #{postId},
            </if>
            <if test="jobId!=null">
                JOB_ID = #{jobId}
            </if>
        </set>
        where "UID" = #{uid}
    </update>

    <update id="editUser" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "USER"
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                BYNAME = #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null ">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="birthday!=null  ">
                BIRTHDAY = #{birthday},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null ">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null  ">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null  ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null ">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null  ">
                MSN = #{msn},
            </if>
            <if test="avatar != null">
                AVATAR = #{avatar},
            </if>
            <if test="avatar128 != null">
                AVATAR_128 = #{avatar128},
            </if>
            <if test="signImageId != null">
                SIGN_IMAGE_ID = #{signImageId},
            </if>
            <if test="signImageName != null">
                SIGN_IMAGE_NAME = #{signImageName},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                ONLINE = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null ">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="post!=null">
                POST = #{post},
            </if>
            <if test="postId!=null">
                POST_ID = #{postId},
            </if>
            <if test="jobId!=null">
                JOB_ID = #{jobId},
            </if>
            <if test="roomNum != null and roomNum !=''">
                ROOM_NUM = #{roomNum},
            </if>
            <if test="deptYj!=null">
                DEPT_YJ =#{deptYj}
            </if>
        </set>
        where "UID" = #{uid}
    </update>

    <delete id="deleteUser" parameterType="string">
        DELETE FROM user WHERE UID in
        <foreach item="uids" collection="array" open="(" separator="," close=")">
            <if test=' uids!="" '>
                #{uids}
            </if>
        </foreach>
    </delete>

    <delete id="deleteUser" parameterType="string" databaseId="dm">
        DELETE FROM "user" WHERE "UID" in
        <foreach item="uids" collection="array" open="(" separator="," close=")">
            <if test=' uids!="" '>
                #{uids}
            </if>
        </foreach>
    </delete>

    <delete id="deleteUser" parameterType="string" databaseId="kingbase">
        DELETE FROM "user" WHERE "UID" in
        <foreach item="uids" collection="array" open="(" separator="," close=")">
            <if test=' uids!="" '>
                #{uids}
            </if>
        </foreach>
    </delete>

    <insert id="insert" parameterType="com.xoa.model.users.Users" useGeneratedKeys="true" keyProperty="uid">
        <selectKey order="AFTER" keyProperty="uid" resultType="int">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into user (USER_ID, USER_NAME,
        USER_NAME_INDEX, BYNAME, USEING_KEY,
        USING_FINGER, PASSWORD, KEY_SN,
        SECURE_KEY_SN, USER_PRIV, USER_PRIV_NO,
        USER_PRIV_NAME, POST_PRIV, POST_DEPT,
        DEPT_ID, DEPT_ID_OTHER, SEX,
        BIRTHDAY, IS_LUNAR, TEL_NO_DEPT,
        FAX_NO_DEPT, ADD_HOME, POST_NO_HOME,
        TEL_NO_HOME, MOBIL_NO, BP_NO,
        EMAIL, OICQ_NO, ICQ_NO,
        MSN, AVATAR, CALL_SOUND,
        LAST_VISIT_TIME, SMS_ON, MENU_TYPE,
        LAST_PASS_TIME, THEME, PORTAL,
        PANEL, ONLINE, ON_STATUS,
        ATTEND_STATUS, MOBIL_NO_HIDDEN, MYTABLE_LEFT,
        MYTABLE_RIGHT, USER_PRIV_OTHER, USER_NO,
        NOT_LOGIN, NOT_VIEW_USER, NOT_VIEW_TABLE,
        NOT_SEARCH, BKGROUND, BIND_IP,
        LAST_VISIT_IP, MENU_IMAGE, WEATHER_CITY,
        SHOW_RSS, MENU_EXPAND, MY_STATUS,
        LIMIT_LOGIN, PHOTO, IM_RANGE,
        LEAVE_TIME, SECRET_LEVEL, NOT_MOBILE_LOGIN,
        MANAGE_MODULE_TYPE, USER_PRIV_TYPE, USER_MANAGE_ORGS,
        SHORTCUT, MY_RSS, REMARK,
        USER_PARA, ID_NUMBER, TRA_NUMBER, SUBJECT ,POST_ID,JOB_ID)
        values ( #{userId}, #{userName},
        #{userNameIndex}, #{byname}, #{useingKey},
        #{usingFinger}, #{password}, #{keySn},
        #{secureKeySn}, #{userPriv}, #{userPrivNo},
        #{userPrivName}, #{postPriv}, #{postDept},
        #{deptId}, #{deptIdOther}, #{sex},
        #{birthday}, #{isLunar}, #{telNoDept},
        #{faxNoDept}, #{addHome}, #{postNoHome},
        #{telNoHome}, #{mobilNo}, #{bpNo},
        #{email}, #{oicqNo}, #{icqNo},
        #{msn}, #{avatar}, #{callSound},
        #{lastVisitTime}, #{smsOn}, #{menuType},
        #{lastPassTime}, #{theme}, #{portal},
        #{panel}, #{online}, #{onStatus},
        #{attendStatus}, #{mobilNoHidden}, #{mytableLeft},
        #{mytableRight}, #{userPrivOther}, #{userNo},
        #{notLogin}, #{notViewUser}, #{notViewTable},
        #{notSearch}, #{bkground}, #{bindIp},
        #{lastVisitIp}, #{menuImage}, #{weatherCity},
        #{showRss}, #{menuExpand}, #{myStatus},
        #{limitLogin}, #{photo}, #{imRange},
        #{leaveTime}, #{secretLevel}, #{notMobileLogin},
        #{manageModuleType}, #{userPrivType}, #{userManageOrgs},
        #{shortcut}, #{myRss}, #{remark},
        #{userPara}, #{idNumber}, #{traNumber}, #{subject} , #{postId},#{jobId})
    </insert>

<!--    <insert id="insert" parameterType="com.xoa.model.users.Users" useGeneratedKeys="true" keyProperty="uid" databaseId="kingbase">-->
<!--        insert into "USER" (USER_ID, USER_NAME,-->
<!--        USER_NAME_INDEX, BYNAME, USEING_KEY,-->
<!--        USING_FINGER, PASSWORD, KEY_SN,-->
<!--        SECURE_KEY_SN, USER_PRIV, USER_PRIV_NO,-->
<!--        USER_PRIV_NAME, POST_PRIV, POST_DEPT,-->
<!--        DEPT_ID, DEPT_ID_OTHER, SEX,-->
<!--        BIRTHDAY, IS_LUNAR, TEL_NO_DEPT,-->
<!--        FAX_NO_DEPT, ADD_HOME, POST_NO_HOME,-->
<!--        TEL_NO_HOME, MOBIL_NO, BP_NO,-->
<!--        EMAIL, OICQ_NO, ICQ_NO,-->
<!--        MSN, AVATAR, CALL_SOUND,-->
<!--        LAST_VISIT_TIME, SMS_ON, MENU_TYPE,-->
<!--        LAST_PASS_TIME, THEME, PORTAL,-->
<!--        PANEL, "ONLINE", ON_STATUS,-->
<!--        ATTEND_STATUS, MOBIL_NO_HIDDEN, MYTABLE_LEFT,-->
<!--        MYTABLE_RIGHT, USER_PRIV_OTHER, USER_NO,-->
<!--        NOT_LOGIN, NOT_VIEW_USER, NOT_VIEW_TABLE,-->
<!--        NOT_SEARCH, BKGROUND, BIND_IP,-->
<!--        LAST_VISIT_IP, MENU_IMAGE, WEATHER_CITY,-->
<!--        SHOW_RSS, MENU_EXPAND, MY_STATUS,-->
<!--        LIMIT_LOGIN, PHOTO, IM_RANGE,-->
<!--        LEAVE_TIME, SECRET_LEVEL, NOT_MOBILE_LOGIN,-->
<!--        MANAGE_MODULE_TYPE, USER_PRIV_TYPE, USER_MANAGE_ORGS,-->
<!--        SHORTCUT, MY_RSS, REMARK,-->
<!--        USER_PARA, ID_NUMBER, TRA_NUMBER, SUBJECT ,POST_ID,JOB_ID)-->
<!--        values ( #{userId}, #{userName},-->
<!--        #{userNameIndex}, #{byname}, #{useingKey},-->
<!--        #{usingFinger}, #{password}, #{keySn},-->
<!--        #{secureKeySn}, #{userPriv}, #{userPrivNo},-->
<!--        #{userPrivName}, #{postPriv}, #{postDept},-->
<!--        #{deptId}, #{deptIdOther}, #{sex},-->
<!--        #{birthday}, #{isLunar}, #{telNoDept},-->
<!--        #{faxNoDept}, #{addHome}, #{postNoHome},-->
<!--        #{telNoHome}, #{mobilNo}, #{bpNo},-->
<!--        #{email}, #{oicqNo}, #{icqNo},-->
<!--        #{msn}, #{avatar}, #{callSound},-->
<!--        #{lastVisitTime}, #{smsOn}, #{menuType},-->
<!--        #{lastPassTime}, #{theme}, #{portal},-->
<!--        #{panel}, #{online}, #{onStatus},-->
<!--        #{attendStatus}, #{mobilNoHidden}, #{mytableLeft},-->
<!--        #{mytableRight}, #{userPrivOther}, #{userNo},-->
<!--        #{notLogin}, #{notViewUser}, #{notViewTable},-->
<!--        #{notSearch}, #{bkground}, #{bindIp},-->
<!--        #{lastVisitIp}, #{menuImage}, #{weatherCity},-->
<!--        #{showRss}, #{menuExpand}, #{myStatus},-->
<!--        #{limitLogin}, #{photo}, #{imRange},-->
<!--        #{leaveTime}, #{secretLevel}, #{notMobileLogin},-->
<!--        #{manageModuleType}, #{userPrivType}, #{userManageOrgs},-->
<!--        #{shortcut}, #{myRss}, #{remark},-->
<!--        #{userPara}, #{idNumber}, #{traNumber}, #{subject} , #{postId},#{jobId})-->
<!--        returning uid-->
<!--    </insert>-->

    <insert id="insert" parameterType="com.xoa.model.users.Users" useGeneratedKeys="true" keyProperty="uid"
            databaseId="kingbase">
        <selectKey order="BEFORE" keyProperty="uid" resultType="int">
            SELECT USER_UID_SEQ.nextval as "uid" from dual
        </selectKey>
        insert into "USER" (
        <trim suffixOverrides=",">
            "UID",
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                "ONLINE",
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            #{uid},
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
        </trim>
        )
        returning uid
    </insert>


    <insert id="insert" parameterType="com.xoa.model.users.Users" useGeneratedKeys="true" keyProperty="uid"
            databaseId="oracle">
        <selectKey order="BEFORE" keyProperty="uid" resultType="int">
            SELECT USER_UID_SEQ.nextval as "uid" from dual
        </selectKey>
        insert into "USER" (
        <trim suffixOverrides=",">
            "UID",
            <if test="userId != null and userId !=''">
                USER_ID,
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME,
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX,
            </if>
            <if test="byname != null and byname !=''">
                BYNAME,
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY,
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER,
            </if>
            <if test="password != null and password !=''">
                PASSWORD,
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN,
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN,
            </if>
            <if test="userPriv != null and userPriv !=''">
                USER_PRIV,
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO,
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME,
            </if>
            <if test="postPriv != null and postPriv !=''">
                POST_PRIV,
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT,
            </if>
            <if test="deptId != null and deptId !=''">
                DEPT_ID,
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER,
            </if>
            <if test="sex != null and sex !=''">
                SEX,
            </if>
            <if test="birthday != null ">
                BIRTHDAY,
            </if>
            <if test="isLunar != null and isLunar !=''">
                IS_LUNAR,
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT,
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT,
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME,
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME,
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME,
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO,
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO,
            </if>
            <if test="email != null and email !=''">
                EMAIL,
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                OICQ_NO,
            </if>
            <if test="icqNo != null and icqNo !=''">
                ICQ_NO,
            </if>
            <if test="msn != null and msn !=''">
                MSN,
            </if>
            <if test="avatar != null and avatar !=''">
                AVATAR,
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND,
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME,
            </if>
            <if test="smsOn != null and smsOn !=''">
                SMS_ON,
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="portal != null and portal !=''">
                PORTAL,
            </if>
            <if test="panel != null and panel !=''">
                PANEL,
            </if>
            <if test="online != null and online !=''">
                ONLINE,
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS,
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS,
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                MOBIL_NO_HIDDEN,
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT,
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT,
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER,
            </if>
            <if test="userNo != null and userNameIndex !=''">
                USER_NO,
            </if>
            <if test="notLogin != null and notLogin !=''">
                NOT_LOGIN,
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                NOT_VIEW_USER,
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                NOT_VIEW_TABLE,
            </if>
            <if test="notSearch != null and userNameIndex !=''">
                NOT_SEARCH,
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND,
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP,
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP,
            </if>
            <if test="menuImage != null and menuImage !=''">
                MENU_IMAGE,
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY,
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS,
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND,
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS,
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN,
            </if>
            <if test="photo != null and photo !=''">
                PHOTO,
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE,
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME,
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL,
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                NOT_MOBILE_LOGIN,
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE,
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE,
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS,
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT,
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS,
            </if>
            <if test="remark != null and remark !=''">
                REMARK,
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA,
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER,
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER,
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT,
            </if>
            <if test="postId != null and postId !=''">
                POST_ID,
            </if>
            <if test="jobId != null and jobId !=''">
                JOB_ID
            </if>
        </trim>
        )values(
        <trim suffixOverrides=",">
            #{uid},
            <if test="userId != null and userId !=''">
                #{userId},
            </if>
            <if test="userName != null and userName !=''">
                #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                #{userNameIndex},
            </if>
            <if test="byname != null and byname !=''">
                #{byname},
            </if>
            <if test="useingKey != null and useingKey !=''">
                #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !=''">
                #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''">
                #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                #{postDept},
            </if>
            <if test="deptId != null and deptId !=''">
                #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                #{sex},
            </if>
            <if test="birthday != null ">
                #{birthday},
            </if>
            <if test="isLunar != null and isLunar !=''">
                #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                #{bpNo},
            </if>
            <if test="email != null and email !=''">
                #{email},
            </if>
            <if test="oicqNo != null and oicqNo !=''">
                #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo !=''">
                #{icqNo},
            </if>
            <if test="msn != null and msn !=''">
                #{msn},
            </if>
            <if test="avatar != null and avatar !=''">
                #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !=''">
                #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="lastPassTime != null ">
                #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="portal != null and portal !=''">
                #{portal},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="online != null and online !=''">
                #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !=''">
                #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                #{userNo},
            </if>
            <if test="notLogin != null and notLogin !=''">
                #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !=''">
                #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !=''">
                #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !=''">
                #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !=''">
                #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                #{limitLogin},
            </if>
            <if test="photo != null and photo !=''">
                #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                #{imRange},
            </if>
            <if test="leaveTime != null ">
                #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !=''">
                #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                #{subject},
            </if>
            <if test="postId != null and postId !=''">
                #{postId},
            </if>
            <if test="jobId != null and jobId !=''">
                #{jobId}
            </if>
        </trim>
        )
    </insert>


    <insert id="insertByEdu" parameterType="com.xoa.model.users.Users" useGeneratedKeys="true" keyProperty="uid">
        <selectKey order="AFTER" keyProperty="uid" resultType="int">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into user (USER_ID, USER_NAME,
        USER_NAME_INDEX, BYNAME, USEING_KEY,
        USING_FINGER, PASSWORD, KEY_SN,
        SECURE_KEY_SN, USER_PRIV, USER_PRIV_NO,
        USER_PRIV_NAME, POST_PRIV, POST_DEPT,
        DEPT_ID, DEPT_ID_OTHER, SEX,
        BIRTHDAY, IS_LUNAR, TEL_NO_DEPT,
        FAX_NO_DEPT, ADD_HOME, POST_NO_HOME,
        TEL_NO_HOME, MOBIL_NO, BP_NO,
        EMAIL, OICQ_NO, ICQ_NO,
        MSN, AVATAR, CALL_SOUND,
        LAST_VISIT_TIME, SMS_ON, MENU_TYPE,
        LAST_PASS_TIME, THEME, PORTAL,
        PANEL, ONLINE, ON_STATUS,
        ATTEND_STATUS, MOBIL_NO_HIDDEN, MYTABLE_LEFT,
        MYTABLE_RIGHT, USER_PRIV_OTHER, USER_NO,
        NOT_LOGIN, NOT_VIEW_USER, NOT_VIEW_TABLE,
        NOT_SEARCH, BKGROUND, BIND_IP,
        LAST_VISIT_IP, MENU_IMAGE, WEATHER_CITY,
        SHOW_RSS, MENU_EXPAND, MY_STATUS,
        LIMIT_LOGIN, PHOTO, IM_RANGE,
        LEAVE_TIME, SECRET_LEVEL, NOT_MOBILE_LOGIN,
        MANAGE_MODULE_TYPE, USER_PRIV_TYPE, USER_MANAGE_ORGS,
        SHORTCUT, MY_RSS, REMARK,
        USER_PARA)
        values ( #{userId}, #{userName},
        #{userNameIndex}, #{byname}, #{useingKey},
        #{usingFinger}, #{password}, #{keySn},
        #{secureKeySn}, #{userPriv}, #{userPrivNo},
        #{userPrivName}, #{postPriv}, #{postDept},
        #{deptId}, #{deptIdOther}, #{sex},
        #{birthday}, #{isLunar}, #{telNoDept},
        #{faxNoDept}, #{addHome}, #{postNoHome},
        #{telNoHome}, #{mobilNo}, #{bpNo},
        #{email}, #{oicqNo}, #{icqNo},
        #{msn}, #{avatar}, #{callSound},
        #{lastVisitTime}, #{smsOn}, #{menuType},
        #{lastPassTime}, #{theme}, #{portal},
        #{panel}, #{online}, #{onStatus},
        #{attendStatus}, #{mobilNoHidden}, #{mytableLeft},
        #{mytableRight}, #{userPrivOther}, #{userNo},
        #{notLogin}, #{notViewUser}, #{notViewTable},
        #{notSearch}, #{bkground}, #{bindIp},
        #{lastVisitIp}, #{menuImage}, #{weatherCity},
        #{showRss}, #{menuExpand}, #{myStatus},
        #{limitLogin}, #{photo}, #{imRange},
        #{leaveTime}, #{secretLevel}, #{notMobileLogin},
        #{manageModuleType}, #{userPrivType}, #{userManageOrgs},
        #{shortcut}, #{myRss}, #{remark},
        #{userPara})
    </insert>


    <select id="getUserByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select <include refid="U_Column_List" />,d.DEPT_NAME
        from user u ,department d,user_ext ue
        WHERE   u.DEPT_ID = d.DEPT_ID AND u.uid=ue.uid
        AND u.not_login != 1
        AND u.dept_id != 0
        AND (u.DEPT_ID = #{deptId}
            or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
            OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
            )
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap"
            databaseId="oracle">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from "USER" u ,department d  WHERE   u.DEPT_ID = d.DEPT_ID AND u.not_login !=1  AND u.dept_id != 0
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap" databaseId="dm">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from user u ,department d  WHERE  u.DEPT_ID = d.DEPT_ID AND u.not_login !=1  AND u.dept_id != 0
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from "USER" u ,department d  WHERE   u.DEPT_ID = d.DEPT_ID AND u.not_login !=1  AND u.dept_id != 0
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUserByDeptIdZero" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select
               u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u.UID,u.avatar,u.sex
        from `user` u ,department d
        WHERE   u.DEPT_ID = d.DEPT_ID
        AND u.not_login != 1
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%') )
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByDeptIdZero" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap"
            databaseId="oracle">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from "USER" u ,department d  WHERE   u.DEPT_ID = d.DEPT_ID AND u.not_login !=1
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByDeptIdZero" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap"
            databaseId="dm">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from user u ,department d  WHERE   u.DEPT_ID = d.DEPT_ID AND u.not_login !=1
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUserByRoleId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select u.USER_NAME, u.UID,u.avatar,u.sex,u.USER_SECRECY  from user u WHERE u.USER_PRIV = #{userPriv} ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserByRoleId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME, u.UID,u.avatar,u.sex,u.USER_SECRECY  from "user" u WHERE u.USER_PRIV = #{userPriv} ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserOnline" resultMap="UserResultMap">
        select u.UID, u.USER_NAME,u.avatar,u.sex from user u, user_online uo WHERE u.UID = uo.UID;
    </select>
    <select id="getUserbyCondition" resultMap="UserResultMap">
        SELECT
        u.UID,
        u.USER_ID,
        u.USER_NAME,
        u.BYNAME,
        u.USER_PRIV,
        u.USER_PRIV_NO,
        u.EMAIL,
        u.USER_PRIV_NAME,
        d.DEPT_NAME,
        d.TEL_NO,
        u.TEL_NO_DEPT,
        u.MOBIL_NO,
        u.`ONLINE`,
        u.SEX,
        u.POST_NO_HOME,
        u.USER_PRIV_OTHER
        FROM
        USER u,
        department d
        WHERE
        u.DEPT_ID = d.DEPT_ID
        <if test="userId != null and userId != ''">
            AND u.byname like concat('%', #{userId}, '%')
        </if>
        <if test="userName != null and userName != ''">
            AND u.USER_NAME like concat('%', #{userName}, '%')
        </if>
        <if test="sex != null and sex != ''">
            AND u.SEX = #{sex}
        </if>
        <if test="deptId != null and deptId != ''">
            AND u.DEPT_ID = #{deptId}
        </if>
        <if test="userPrivNo != null and userPrivNo != ''">
            AND u.USER_PRIV = #{userPrivNo}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUserbyCondition" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        u.UID,
        u.USER_ID,
        u.USER_NAME,
        u.BYNAME,
        u.USER_PRIV,
        u.USER_PRIV_NO,
        u.EMAIL,
        u.USER_PRIV_NAME,
        d.DEPT_NAME,
        d.TEL_NO,
        u.TEL_NO_DEPT,
        u.MOBIL_NO,
        u."ONLINE",
        u.SEX,
        u.POST_NO_HOME,
        u.USER_PRIV_OTHER
        FROM
        "USER" u,
        department d
        WHERE
        u.DEPT_ID = d.DEPT_ID
        <if test="userId != null and userId != ''">
            AND u.byname like concat('%', #{userId}::VARCHAR, '%')
        </if>
        <if test="userName != null and userName != ''">
            AND u.USER_NAME like concat('%', #{userName}::VARCHAR, '%')
        </if>
        <if test="sex != null and sex != ''">
            AND u.SEX = #{sex}
        </if>
        <if test="deptId != null and deptId != ''">
            AND u.DEPT_ID = #{deptId}
        </if>
        <if test="userPrivNo != null and userPrivNo != ''">
            AND u.USER_PRIV = #{userPrivNo}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUserbyCondition" resultMap="UserResultMap" databaseId="oracle">
        SELECT
        U ."UID",
        U .USER_ID,
        U .USER_NAME,
        U .BYNAME,
        U .USER_PRIV,
        U .USER_PRIV_NO,
        U .EMAIL,
        U .USER_PRIV_NAME,
        D .DEPT_NAME,
        D .TEL_NO,
        U .TEL_NO_DEPT,
        U .MOBIL_NO,
        U ."ONLINE", U .SEX,
        U .POST_NO_HOME,
        U .USER_PRIV_OTHER
        FROM
        "USER" U,
        department D
        WHERE
        U .DEPT_ID = D .DEPT_ID
        <if test="userId != null and userId != ''">
            AND u.byname like concat('%', #{userId}, '%')
        </if>
        <if test="userName != null and userName != ''">
            AND u.USER_NAME like concat('%', #{userName}, '%')
        </if>
        <if test="sex != null and sex != ''">
            AND u.SEX = #{sex}
        </if>
        <if test="deptId != null and deptId != ''">
            AND u.DEPT_ID = #{deptId}
        </if>
        <if test="userPrivNo != null and userPrivNo != ''">
            AND u.USER_PRIV = #{userPrivNo}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    <select id="getUserNameByFuncId" parameterType="java.lang.String" resultMap="UserResultMap">
        SELECT u.USER_NAME, u.UID from user u, user_function uf WHERE u.UID = uf.uid;
    </select>
    <select id="getUserByFuncId" parameterType="java.lang.String"  resultMap="UserResultMap">
        select DISTINCT u.UID,u.user_priv_no,u.user_no,u.user_name  from
         user u, user_function uf
        where
        u.USER_ID = uf.user_id
        AND

        (uf.user_func_id_str LIKE concat('%,', #{fid}, ',%')
        OR uf.user_func_id_str LIKE concat( #{fid}, ',%')
        )
        ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>

    <select id="getUserByFuncId" parameterType="java.lang.String"  resultMap="UserResultMap" databaseId="oracle">
        select DISTINCT u.UID,u.user_priv_no,u.user_no,u.user_name
        from  "USER" u, user_function uf
        where
        u.USER_ID = uf.user_id
        AND
        (uf.user_func_id_str LIKE concat(concat('%,', #{fid}), ',%')
        OR uf.user_func_id_str LIKE concat( #{fid}, ',%')
        )
        GROUP BY u."UID",u.user_priv_no,u.user_no
        ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>

    <select id="getUserByFuncId" parameterType="java.lang.String"  resultMap="UserResultMap" databaseId="dm">
        select DISTINCT u.UID,u.user_priv_no,u.user_no,u.user_name  from
         "USER" u, user_function uf
        where
        u.USER_ID = uf.user_id
        AND

        (uf.user_func_id_str LIKE concat('%,', #{fid}, ',%')
        OR uf.user_func_id_str LIKE concat( #{fid}, ',%')
        ) ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>

    <select id="getUserByFuncId" parameterType="java.lang.String"  resultMap="UserResultMap" databaseId="kingbase">
        select DISTINCT u.UID,u.user_priv_no,u.user_no,u.user_name  from
        "user" u, user_function uf
        where
            u.USER_ID = uf.user_id
          AND
            (uf.user_func_id_str LIKE concat('%,', #{fid}, ',%')
                OR uf.user_func_id_str LIKE concat( #{fid}, ',%')
                )
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="findUserNames" resultMap="UserResultMap">

        SELECT USER_NAME FROM user
        WHERE UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no

    </select>

    <select id="findUserNames" resultMap="UserResultMap" databaseId="kingbase">

        SELECT USER_NAME FROM "user"
        WHERE UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no

    </select>

    <select id="findUsersByIds" parameterType="hashMap" resultType="java.lang.String">

        SELECT u.USER_NAME FROM user u
        <where>
            <foreach collection="ids" item="id" open=" AND  UID  IN ( " close=" ) " separator=" , ">
                #{id}
            </foreach>
        </where>
        ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>
    <select id="findUsersByIds" parameterType="hashMap" resultType="java.lang.String" databaseId="oracle">

        SELECT u.USER_NAME FROM "USER" u
        <where>
            <foreach collection="ids" item="id" open=' AND  "UID"  IN ( ' close=" ) " separator=" , ">
                #{id}
            </foreach>
        </where>
        ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>
    <select id="findUsersByIds" parameterType="hashMap" resultType="java.lang.String" databaseId="dm">

        SELECT u.USER_NAME FROM "USER" u
        <where>
            <foreach collection="ids" item="id" open=" AND  UID  IN ( " close=" ) " separator=" , ">
                #{id}
            </foreach>
        </where>
        ORDER BY u.user_priv_no,u.user_no,u.user_name

    </select>
    <select id="checkPassWord" parameterType="java.lang.String" resultType="com.xoa.model.users.Users">
        select u.PASSWORD FROM user u WHERE  u.BYNAME = #{userName};
    </select>

    <select id="checkPassWord" parameterType="java.lang.String" resultType="com.xoa.model.users.Users" databaseId="dm">
        select u.PASSWORD FROM "USER" u WHERE  u.BYNAME = #{userName};
    </select>

    <select id="checkPassWord" parameterType="java.lang.String" resultType="com.xoa.model.users.Users"
            databaseId="oracle">
        select u.PASSWORD FROM "USER" u WHERE  u.BYNAME = #{userName}
    </select>

    <select id="getUsersByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> from user u ,department d ,user_ext ue
        WHERE  u.uid=ue.uid AND u.dept_id!=0  AND u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        ) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUsersByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="dm">
        select <include refid="U_Column_List" /> from "USER" u ,department d
        WHERE  u.dept_id!=0  AND   u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        ) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUsersByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="oracle">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u."UID",u.avatar,u.sex from "USER" u ,department d
        WHERE  u.uid=ue.uid AND u.dept_id!=0  AND   u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        ) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUsersByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="U_Column_List_KB" /> from "user" u ,department d
        WHERE  u.dept_id!=0  AND u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        ) ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUsersNoByDeptId"  resultMap="UserResultMap">
        SELECT <include refid="U_Column_List" />
        FROM USER u
        LEFT JOIN user_ext ue ON u.uid = ue.uid
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID AND u.dept_id != 0
        WHERE
        u.user_priv_no >= #{userPrivNo}
        <if test="deptId != null and deptId != ''">
            AND (u.DEPT_ID = #{deptId} OR u.DEPT_ID_OTHER LIKE CONCAT( '%,', #{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
        </if>
        ORDER BY
        u.user_priv_no,
        u.user_no,
        u.user_name
    </select>


   <select id="getUsersNoByDeptId"  resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="U_Column_List_KB" />
        FROM "USER" u
        LEFT JOIN user_ext ue ON u.uid = ue.uid
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID AND u.dept_id != 0
        WHERE
        u.user_priv_no >= #{userPrivNo}
        <if test="deptId != null and deptId != ''">
            AND (u.DEPT_ID = #{deptId} OR u.DEPT_ID_OTHER LIKE CONCAT( '%,', #{deptId}::VARCHAR,',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId}::VARCHAR,',%'))
        </if>
        ORDER BY
        u.user_priv_no,
        u.user_no,
        u.user_name
    </select>

    <select id="getuserNameByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap">
        select UID,USER_NAME,USER_ID from user where DEPT_ID=#{deptId} ORDER BY user_priv_no,user_no
    </select>
    <select id="getuserNameByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="oracle">
        select "UID",USER_NAME from "USER" where DEPT_ID=#{deptId}
    </select>

    <select id="getuserNameByDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="dm">
        select "UID",USER_NAME from "USER" where DEPT_ID=#{deptId}
    </select>

    <select id="selectuidByName" parameterType="String" resultType="Integer">
        select UID  from user where USER_NAME=#{userName}
    </select>

    <select id="getdepId" parameterType="Map"
            resultMap="UserResultMap">
        SELECT u.UID,
        u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,u.USER_PRIV_NO,u.USER_NO,
        d.DEPT_NAME
        FROM
        `user` u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID WHERE u.not_login = 0
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId} or 'ALL_DEPT' = #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdOther},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdOther},',%')) or ('ALL_DEPT' = #{deptIdOther} and u.DEPT_ID_OTHER !='')
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivOther},',%') or u.USER_PRIV_OTHER LIKE
            CONCAT(#{userPrivOther},',%')
        </if>
        <if test="deptIdAll != null and deptIdAll !=''">
            and (u.DEPT_ID= #{deptIdAll} or (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdAll},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdAll},',%'))) or 'ALL_DEPT' = #{deptIdAll}
        </if>
        <if test="userPrivAll != null and userPrivAll !=''">
            and u.USER_PRIV= #{userPrivAll} or (u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivAll},',%') or
            u.USER_PRIV_OTHER LIKE CONCAT(#{userPrivAll},',%'))
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>


    <select id="getdepId" parameterType="Map"
            resultMap="UserResultMap" databaseId="oracle">
        SELECT
        u.UID,
        u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,u.USER_PRIV_NO,u.USER_NO,
        d.DEPT_NAME
        FROM
        "USER" u ,department d WHERE u.DEPT_ID = d.DEPT_ID  u.not_login = 0
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and u.DEPT_ID_OTHER LIKE CONCAT('%',#{deptIdOther},'%')
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and u.USER_PRIV_OTHER LIKE CONCAT('%',#{userPrivOther},'%')
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getdepId" parameterType="Map"
            resultMap="UserResultMap" databaseId="dm">
        SELECT
        u."UID",
        u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,u.USER_PRIV_NO,u.USER_NO,
        d.DEPT_NAME
        FROM
        "USER" u ,department d WHERE u.DEPT_ID = d.DEPT_ID  u.not_login = 0
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getdepId" parameterType="Map"
            resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        u.UID,
        u.USER_NAME,u.SEX,u.DEPT_ID_OTHER,u.USER_PRIV_OTHER,u.USER_ID,u.POST_ID,U.AVATAR,U.UID,u.USER_PRIV,u.DEPT_ID,u.AVATAR_128,u.MOBIL_NO,u.OICQ_NO,u.TEL_NO_DEPT,u.EMAIL,u.BIRTHDAY,u.USER_PRIV_NAME,u.BYNAME,u.LAST_VISIT_TIME,u.USER_PRIV_NO,u.USER_NO,
        d.DEPT_NAME
        FROM
        "USER" u ,department d WHERE u.DEPT_ID = d.DEPT_ID
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId} or 'ALL_DEPT' = #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptIdOther}::VARCHAR),',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdOther}::VARCHAR,',%')) or ('ALL_DEPT' = #{deptIdOther}::VARCHAR and u.DEPT_ID_OTHER !='')
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and u.USER_PRIV_OTHER LIKE CONCAT(CONCAT('%,',#{userPrivOther}::VARCHAR),',%') or u.USER_PRIV_OTHER LIKE
            CONCAT(#{userPrivOther}::VARCHAR,',%')
        </if>
        <if test="deptIdAll != null and deptIdAll !=''">
            and (u.DEPT_ID= #{deptIdAll} or (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptIdAll}::VARCHAR),',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdAll}::VARCHAR,',%'))) or 'ALL_DEPT' = #{deptIdAll}
        </if>
        <if test="userPrivAll != null and userPrivAll !=''">
            and u.USER_PRIV= #{userPrivAll} or (u.USER_PRIV_OTHER LIKE CONCAT(CONCAT('%,',#{userPrivAll}::VARCHAR),',%') or
            u.USER_PRIV_OTHER LIKE CONCAT(#{userPrivAll}::VARCHAR,',%'))
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getNullPwUsers" parameterType="Integer" resultType="com.xoa.model.users.Users">
        SELECT UID as uid,USER_NAME as userName from user where PASSWORD IS NULL or PASSWORD = "tVHbkPWW57Hw."
        <if test="_parameter!=null and _parameter !=''">
            and dept_Id = #{_parameter}
        </if>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getNewUsers" resultMap="UserResultMap" parameterType="map">
        SELECT
        <include refid="U_Column_List" />, d.DEPT_NAME, ue.DUTY_TYPE
        FROM
            user u
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
        LEFT JOIN user_ext ue ON u.uid = ue.uid
        WHERE u.user_id IS NOT NULL
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        order by u.uid desc limit 100
    </select>

    <select id="getNewUsers" resultMap="UserResultMap" parameterType="map" databaseId="oracle">
        select <include refid="U_Column_List" /> , d.DEPT_NAME,ue.DUTY_TYPE
        from "user" u , department d,user_ext ue where
        u.user_id is not null
        and u.DEPT_ID=d.DEPT_ID
        and u."uid"=ue."uid"
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        and (u.LAST_VISIT_TIME is null or u.LAST_VISIT_TIME = '0000-00-00 00:00:00')
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getNewUsers" resultMap="UserResultMap" parameterType="map" databaseId="dm">
        select <include refid="U_Column_List" /> , d.DEPT_NAME,ue.DUTY_TYPE
        from "user" u , department d,user_ext ue where
        u.user_id is not null
        and u.DEPT_ID=d.DEPT_ID
        and u."uid"=ue."uid"
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        and (u.LAST_VISIT_TIME is null)
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getNewUsers" resultMap="UserResultMap" parameterType="map" databaseId="kingbase">
        select <include refid="U_Column_List_KB" /> , d.DEPT_NAME,ue.DUTY_TYPE
        from "user" u , department d,user_ext ue where
        u.user_id is not null
        and u.DEPT_ID=d.DEPT_ID
        and u."uid"=ue."uid"
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        and (u.LAST_VISIT_TIME is null)
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getPUsersByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select u.USER_NAME , u.UID , u.USER_ID , u.USER_PRIV, u.USER_PRIV_NAME, d.DEPT_NAME from user u INNER JOIN department d ON u.DEPT_ID=d.DEPT_ID WHERE u.DEPT_ID =
        (select DEPT_PARENT from department WHERE DEPT_ID = #{deptId}) ORDER BY u.user_priv_no,u.user_no;
    </select>

    <select id="getCUsersByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select u.USER_NAME , u.UID , u.USER_ID , u.USER_PRIV, u.USER_PRIV_NAME, d.DEPT_NAME from user u INNER JOIN department d ON u.DEPT_ID=d.DEPT_ID WHERE u.DEPT_ID in
        (select DEPT_ID from department WHERE DEPT_PARENT = #{deptId}) ORDER BY u.user_priv_no,u.user_no ;
    </select>

    <select id="getTUsersByDeptId" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        select u.USER_NAME , u.UID , u.USER_ID , u.USER_PRIV, u.USER_PRIV_NAME, d.DEPT_NAME from user u INNER JOIN department d ON u.DEPT_ID=d.DEPT_ID WHERE u.DEPT_ID IN
        (select DEPT_ID from department where DEPT_PARENT =(select DEPT_PARENT from department WHERE DEPT_ID = #{deptId}))
        ORDER BY u.user_priv_no,u.user_no;
    </select>

    <update id="clearPassword" parameterType="Integer">
        update user
        <set>
            PASSWORD = "tVHbkPWW57Hw."
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="clearPassword" parameterType="Integer" databaseId="dm">
        update "user"
        <set>
            PASSWORD = "tVHbkPWW57Hw."
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="clearPassword" parameterType="Integer" databaseId="kingbase">
        update "user"
        <set>
            PASSWORD = "tVHbkPWW57Hw."
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="clearOnLine" parameterType="Integer">
        update user
        <set>
            ONLINE = 0
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="clearOnLine" parameterType="Integer" databaseId="dm">
        update "user"
        <set>
            ONLINE = 0
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="clearOnLine" parameterType="Integer" databaseId="kingbase">
        update "user"
        <set>
            "ONLINE" = 0
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setNotLogin" parameterType="Integer">
        update user
        <set>
            NOT_LOGIN = 1,NOT_MOBILE_LOGIN = 1
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setNotLogin" parameterType="Integer" databaseId="oracle">
        update "USER"
        <set>
            NOT_LOGIN = 1,NOT_MOBILE_LOGIN = 1
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>
    <update id="setNotLogin" parameterType="Integer" databaseId="dm">
        update "USER"
        <set>
            NOT_LOGIN = 1,NOT_MOBILE_LOGIN = 1
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setAllowLogin" parameterType="Integer">
        update user
        <set>
            NOT_LOGIN = 0,NOT_MOBILE_LOGIN = 0
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setAllowLogin" parameterType="Integer" databaseId="kingbase">
        update "user"
        <set>
            NOT_LOGIN = 0,NOT_MOBILE_LOGIN = 0
        </set>
        WHERE UID in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setAllowLogin" parameterType="Integer" databaseId="oracle">
        update "USER"
        <set>
            NOT_LOGIN = 0,NOT_MOBILE_LOGIN = 0
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>
    <update id="setAllowLogin" parameterType="Integer" databaseId="dm">
        update "USER"
        <set>
            NOT_LOGIN = 0,NOT_MOBILE_LOGIN = 0
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="setNotLogin" parameterType="Integer" databaseId="kingbase">
        update "USER"
        <set>
            NOT_LOGIN = 1,NOT_MOBILE_LOGIN = 1
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>


    <update id="editUsersDetId">
        update user
        <set>
            DEPT_ID = #{deptId}
            <if test="deptId==0">
                ,NOT_MOBILE_LOGIN = 1
            </if>
        </set>
        WHERE UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUsersDetId" databaseId="oracle">
        update "USER"
        <set>
            DEPT_ID = #{deptId}
            <if test="deptId==0">
                ,NOT_MOBILE_LOGIN = 1
            </if>
        </set>
        WHERE byname in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUsersDetId" databaseId="dm">
        update "USER"
        <set>
            DEPT_ID = #{deptId}
            <if test="deptId==0">
                ,NOT_MOBILE_LOGIN = 1
            </if>
        </set>
        WHERE byname in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUsersDetId" databaseId="kingbase">
        update "USER"
        <set>
            DEPT_ID = #{deptId}
            <if test="deptId==0">
                ,NOT_MOBILE_LOGIN = 1
            </if>
        </set>
        WHERE byname in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUsersLeaveDept">
        UPDATE user SET LEAVE_DEPT = DEPT_ID
        where
        UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <select id="getUsersByUids" resultMap="UserResultMap">
        SELECT uid,USER_NAME,DEPT_ID,USER_ID,BYNAME ,MOBIL_NO from user
        WHERE UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByUids" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_NAME,DEPT_ID,USER_ID from "USER"
        WHERE "UID" in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByUids" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_NAME,DEPT_ID,USER_ID from "USER"
        WHERE "UID" in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByUids" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_NAME,DEPT_ID,USER_ID,BYNAME ,MOBIL_NO from "user"
        WHERE UID in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>


    <select id="getUsersByUserIds" resultMap="UserResultMap">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID,USER_PRIV ,MOBIL_NO,USER_PRIV_NAME,AVATAR,AVATAR_128,USER_SECRECY from user
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByUserIds" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID,USER_PRIV ,MOBIL_NO,USER_PRIV_NAME,AVATAR,AVATAR_128,USER_SECRECY from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByUserIdsOrderByDeptId" resultMap="UserResultMap">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID,USER_PRIV ,MOBIL_NO from user
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY DEPT_ID
    </select>

    <select id="getUsersByUserIdsOrderByDeptId" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID,USER_PRIV ,MOBIL_NO from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY DEPT_ID
    </select>

    <select id="getUsersByUserIds" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByUserIds" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByBynames" resultMap="UserResultMap">
        SELECT uid,USER_NAME,byname from "USER"
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByBynames" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_NAME,byname from "USER"
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByBynames" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_NAME,byname from "USER"
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>


    <select id="getUserPrivByuId" parameterType="java.lang.Integer" resultType="java.lang.String">
        select u.USER_PRIV from user u WHERE u.UID = #{uId};
    </select>
    <select id="getUserPrivByuId" parameterType="java.lang.Integer" resultType="java.lang.String" databaseId="oracle">
        select u.USER_PRIV from "USER" u WHERE u."UID" = #{uId};
    </select>
    <select id="getUserPrivByuId" parameterType="java.lang.Integer" resultType="java.lang.String" databaseId="dm">
        select u.USER_PRIV from "USER" u WHERE u."UID" = #{uId};
    </select>
    <select id="deptHaveUser" resultMap="UserResultMap">
        SELECT UID,USER_ID,USER_NAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR FROM user u where u.DEPT_ID in (select DEPT_ID from department where DEPT_NO LIKE CONCAT( #{deptNO},'%')) ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="deptHaveUser" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_ID,USER_NAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR FROM "USER" u where u.DEPT_ID in (select DEPT_ID from department where DEPT_NO LIKE CONCAT( #{deptNO},'%')) ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="deptHaveUser" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_ID,USER_NAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR FROM "USER" u where u.DEPT_ID in (select DEPT_ID from department where DEPT_NO LIKE CONCAT( #{deptNO},'%')) ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="queryUserByUserId" resultMap="UserResultMap">
        select  UID,USER_ID,USER_NAME ,BYNAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR,MOBIL_NO,EMAIL
        from user where USER_ID LIKE '%' #{userId} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>
    <select id="queryUserByUserId" resultMap="UserResultMap" databaseId="oracle">
        select  "UID",USER_ID,USER_NAME ,BYNAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR,MOBIL_NO,EMAIL
        from "USER" where USER_ID LIKE '%' #{userId} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>
    <select id="queryUserByUserId" resultMap="UserResultMap" databaseId="dm">
        select  "UID",USER_ID,USER_NAME ,BYNAME,USER_PRIV,USER_PRIV_NAME,DEPT_ID,SEX,AVATAR,MOBIL_NO,EMAIL
        from "USER" where USER_ID LIKE '%' #{userId} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>

    <select id="queryUserByUserIds" resultMap="UserResultMap" parameterType="map">
        SELECT
        u.UID,
        u.USER_ID,
        u.USER_NAME,
        u.BYNAME,
        u.USER_PRIV,
        u.USER_PRIV_NAME,
        u.DEPT_ID,
        u.SEX,
        u.AVATAR,
        u.MOBIL_NO,
        u.EMAIL,
        d.DEPT_NAME
        FROM
        USER u,
        department d
        WHERE
        u.DEPT_ID = d.DEPT_ID
        AND NOT_LOGIN = 0 AND (USER_ID LIKE '%' #{userName} '%' or USER_NAME LIKE '%' #{userName} '%'
        <if test="newStr != null and newStr !='' ">
            OR USER_NAME_INDEX LIKE #{newStr}
        </if>
        )
        <if test="deptIds != null">
            and (u.DEPT_ID in
            <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">#{deptId}
            </foreach>
            OR
            <foreach collection="deptIds" item="id" open="(" close=")" separator="OR">
                u.DEPT_ID_OTHER LIKE CONCAT('%,',#{id},',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{id},',%')
            </foreach>
            )
        </if>
    </select>

    <select id="queryCountByUserId" resultType="java.lang.Integer">
        select  count(*)
        from user where USER_ID LIKE '%' #{userName} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>
    <select id="queryCountByUserId" resultType="java.lang.Integer" databaseId="oracle">
        select  count(*)
        from "USER" where USER_ID LIKE '%' #{userName} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>
    <select id="queryCountByUserId" resultType="java.lang.Integer" databaseId="dm">
        select  count(*)
        from "USER" where USER_ID LIKE '%' #{userName} '%' or  USER_NAME LIKE '%' #{userName} '%'
    </select>

    <select id="getUserCount" resultType="java.lang.Integer">
        select count(u.UID) from user u;
    </select>
    <select id="getUserCount" resultType="java.lang.Integer" databaseId="oracle">
        select count(u.UID) from USER u
    </select>
    <select id="getUserCount" resultType="java.lang.Integer" databaseId="dm">
        select count(u."UID") from "USER" u
    </select>
    <select id="getUserCount" resultType="java.lang.Integer" databaseId="kingbase">
        select count(u.UID) from "USER" u
    </select>

    <update id="updatePwd" parameterType="Map">
        UPDATE user u set u.PASSWORD = #{pwd},u.LAST_PASS_TIME=#{lastPassTime} WHERE u.USER_ID=#{uid};
    </update>

    <update id="updatePwd" parameterType="Map" databaseId="oracle">
        UPDATE "USER" u set u."PASSWORD" = #{pwd},u.LAST_PASS_TIME=#{lastPassTime} WHERE u.USER_ID=#{uid};
    </update>

    <update id="updatePwd" parameterType="Map" databaseId="dm">
        UPDATE "USER" u set u."PASSWORD" = #{pwd},u.LAST_PASS_TIME=#{lastPassTime} WHERE u.USER_ID=#{uid};
    </update>
    <update id="updatePwd" parameterType="Map" databaseId="kingbase">
        UPDATE "USER" u set u."PASSWORD" = #{pwd},u.LAST_PASS_TIME=#{lastPassTime} WHERE u.USER_ID=#{uid};
    </update>


    <!-- -->
    <insert id="addU" parameterType="com.xoa.model.users.Users">
        insert into user(
        <trim suffixOverrides=",">
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="bkground != null and bkground !=''">
                #{BKGROUND},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{MENU_EXPAND},
            </if>
            <if test="panel != null and panel !=''">
                #{PANEL},
            </if>
            <if test="callSound != null and callSound !=''">
                #{CALL_SOUND},
            </if>
        </trim>
        ) values(
        <trim suffixOverrides=",">
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
        </trim>
        )
    </insert>
    <insert id="addU" parameterType="com.xoa.model.users.Users" databaseId="oracle">
        insert into user(
        <trim suffixOverrides=",">
            <if test="menuType != null and menuType !=''">
                MENU_TYPE,
            </if>
            <if test="theme != null and theme !=''">
                THEME,
            </if>
            <if test="bkground != null and bkground !=''">
                #{BKGROUND},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{MENU_EXPAND},
            </if>
            <if test="panel != null and panel !=''">
                #{PANEL},
            </if>
            <if test="callSound != null and callSound !=''">
                #{CALL_SOUND},
            </if>
        </trim>
        ) values(
        <trim suffixOverrides=",">
            <if test="menuType != null and menuType !=''">
                #{menuType},
            </if>
            <if test="theme != null and theme !=''">
                #{theme},
            </if>
            <if test="bkground != null and bkground !=''">
                #{bkground},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                #{menuExpand},
            </if>
            <if test="panel != null and panel !=''">
                #{panel},
            </if>
            <if test="callSound != null and callSound !=''">
                #{callSound},
            </if>
        </trim>
        )
    </insert>
    <!-- -->
    <select id="selectList" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap">
        SELECT MENU_TYPE,THEME,BKGROUND,MENU_EXPAND,PANEL,CALL_SOUND from user
        <where>
            <if test="menuType != null">
                and MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                and THEME = #{theme},
            </if>
            <if test="bkground != null">
                and BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                and MENU_EXPAND = #{menuExpand},
            </if>
            <if test="panel != null">
                and PANEL = #{panel}
            </if>
            <if test="callSound != null">
                and CALL_SOUND = #{callSound}
            </if>
        </where>
    </select>
    <select id="selectList" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap" databaseId="oracle">
        SELECT MENU_TYPE,THEME,BKGROUND,MENU_EXPAND,PANEL,CALL_SOUND from "USER"
        <where>
            <if test="menuType != null">
                and MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                and THEME = #{theme},
            </if>
            <if test="bkground != null">
                and BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                and MENU_EXPAND = #{menuExpand},
            </if>
            <if test="panel != null">
                and PANEL = #{panel}
            </if>
            <if test="callSound != null">
                and CALL_SOUND = #{callSound}
            </if>
        </where>
    </select>
    <select id="selectList" parameterType="com.xoa.model.users.Users" resultMap="UserResultMap" databaseId="dm">
        SELECT MENU_TYPE,THEME,BKGROUND,MENU_EXPAND,PANEL,CALL_SOUND from "USER"
        <where>
            <if test="menuType != null">
                and MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                and THEME = #{theme},
            </if>
            <if test="bkground != null">
                and BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                and MENU_EXPAND = #{menuExpand},
            </if>
            <if test="panel != null">
                and PANEL = #{panel}
            </if>
            <if test="callSound != null">
                and CALL_SOUND = #{callSound}
            </if>
        </where>
    </select>
    <select id="getLoginUserCount" resultType="java.lang.Integer">
        SELECT count(uid) from user where not_login = 0
    </select>
    <select id="getLoginUserCount" resultType="java.lang.Integer" databaseId="oracle">
        SELECT count(UID) from USER where not_login = 0
    </select>
    <select id="getLoginUserCount" resultType="java.lang.Integer" databaseId="dm">
        SELECT count("UID") from "USER" where not_login = 0
    </select>
    <select id="getLoginUserCount" resultType="java.lang.Integer" databaseId="kingbase">
        SELECT count(UID) from "USER" where not_login = 0
    </select>
    <update id="updateUserTheme" parameterType="com.xoa.model.users.Users">
        update user
        <trim prefix="set" suffixOverrides=",">
            <if test="menuType != null and menuType != ''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                THEME = #{theme},
            </if>
            <if test="panel != null">
                PANEL = #{panel},
            </if>
            <if test="bkground != null">
                BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                MENU_EXPAND = #{menuExpand},
            </if>

            <if test="callSound != null">
                CALL_SOUND = #{callSound},
            </if>

            <if test="bpNo != null and bpNo!=''">
                BP_NO = #{bpNo}
            </if>
        </trim>
        where UID = #{uid}
    </update>

    <update id="updateUserTheme" parameterType="com.xoa.model.users.Users" databaseId="oracle">
        update "USER"
        <set>
            <if test="menuType != null and menuType != ''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                THEME = #{theme},
            </if>
            <if test="panel != null">
                PANEL = #{panel},
            </if>
            <if test="bkground != null">
                BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                MENU_EXPAND = #{menuExpand},
            </if>

            <if test="callSound != null">
                CALL_SOUND = #{callSound}
            </if>
        </set>
        where "UID" = #{uid}
    </update>

    <update id="updateUserTheme" parameterType="com.xoa.model.users.Users" databaseId="dm">
        update "USER"
        <set>
            <if test="menuType != null and menuType != ''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                THEME = #{theme},
            </if>
            <if test="panel != null">
                PANEL = #{panel},
            </if>
            <if test="bkground != null">
                BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                MENU_EXPAND = #{menuExpand},
            </if>

            <if test="callSound != null">
                CALL_SOUND = #{callSound}
            </if>
        </set>
        where "UID" = #{uid}
    </update>

    <update id="updateUserTheme" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "USER"
        <set>
            <if test="menuType != null and menuType != ''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="theme != null">
                THEME = #{theme},
            </if>
            <if test="panel != null">
                PANEL = #{panel},
            </if>
            <if test="bkground != null">
                BKGROUND = #{bkground},
            </if>
            <if test="menuExpand != null">
                MENU_EXPAND = #{menuExpand},
            </if>

            <if test="callSound != null">
                CALL_SOUND = #{callSound}
            </if>
        </set>
        where "UID" = #{uid}
    </update>


    <select id="queryExportUsers" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,ue.DUTY_TYPE,a.TITLE DUTY_TYPE_NAME, PASSWORD
        <if test="deptIda != 0 ">
            , d.DEPT_NAME
        </if>
        from user u
        <if test="deptIda!=0">
            , department d
        </if>
        ,user_ext ue
        left join attend_set a on ue.DUTY_TYPE = a.SID
        where
        u.user_id is not null
        and u.uid=ue.uid
        <if test="deptIda != 0 ">
            and u.DEPT_ID=d.DEPT_ID
        </if>
        <if test="userId!=null and userId!='' ">
            and u.USER_ID like concat("%", #{userId},"%")
        </if>
        <if test="byname!=null and byname!='' ">
            and u.byname like concat("%", #{byname},"%")
        </if>
        <if test="userName!=null and userName!='' ">
            and u.user_name like concat("%", #{userName},"%")
        </if>
        <if test="mobilNo!=null and mobilNo!='' ">
            and u.mobil_no like concat(#{mobilNo},"%")
        </if>
        <if test="sex!=null and sex !='' ">
            and u.sex = #{sex}
        </if>
        <if test="postPriv!=null and postPriv!='' ">
            and u.post_Priv = #{postPriv}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin ==0 ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        <if test="notViewUser!=null and notViewUser!=''">
            AND u.not_View_User = #{notViewUser}
        </if>
        <if test="notViewTable!=null and notViewTable!=''">
            AND u.not_View_Table = #{notViewTable}
        </if>
        <if test="dutyType!=null and dutyType!=0 ">
            AND ue.DUTY_TYPE = #{dutyType}
        </if>

        <if test="deptIda==0">
            AND u.dept_id = 0
        </if>
        <if test="deptIda!=0">
            AND u.dept_id != 0
        </if>
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>

        <if test="userPrivs!=null">
            <foreach collection="userPrivs" item="userPriv" open="and (u.user_priv in (" close=")" separator=",">
                <if test="userPriv!=null and userPriv!=0">
                    ${userPriv}
                </if>
            </foreach>
            <foreach item="userPriv" collection="userPrivs" open="" separator="" close=")">
                <if test="userPriv!=null and userPriv!= '' ">
                    OR u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPriv},',%')
                    OR u.USER_PRIV_OTHER LIKE CONCAT(#{userPriv},',%')
                </if>
            </foreach>
        </if>


        <if test="deptIds!=null">
            and
            <if test=" deptIda > 0 ">
                (
            </if>
            <foreach collection="deptIds" item="deptId" open="u.dept_Id in (" close=")" separator=",">
                <if test="deptId!=null and deptId!=0">
                    ${deptId}
                </if>
            </foreach>

            <if test=" deptIda > 0 ">
                OR (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIda},',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptIda},',%')))
            </if>
        </if>
        <if test="moduleUserIds != null">
            and u.USER_ID in
            <foreach collection="moduleUserIds" item="moduleUserId" open="(" close=")" separator=",">
                #{moduleUserId}
            </foreach>
        </if>
        <if test="moduleDeptIds != null">
            and u.DEPT_ID in
            <foreach collection="moduleDeptIds" item="moduleDeptId" open="(" close=")" separator=",">
                #{moduleDeptId}
            </foreach>
        </if>
        <if test="moduleRolePrivNo != null ">
            and u.USER_PRIV_NO &gt; #{moduleRolePrivNo}
        </if>
        <if test="moduleRolePrivIds != null ">
            and u.USER_PRIV in
            <foreach collection="moduleRolePrivIds" item="roleIds" open="(" close=")" separator="," >
                #{roleIds}
            </foreach>
        </if>

        ORDER BY
        u.user_priv_no,u.user_no,u.user_name
        <!--<if test="deptIda != 0 " >
            d.DEPT_NO,
        </if>
        u.user_priv_no,u.user_no,u.USER_NAME

        <if test="sortType!=null and sortType=='desc' " >
             ,u.LAST_VISIT_TIME desc
        </if>
        <if test="sortType!=null and sortType=='asc' " >
             ,u.LAST_VISIT_TIME ASC
        </if>-->

    </select>
    <select id="queryExportUsers" parameterType="map" resultMap="UserResultMap" databaseId="oracle">
        select <include refid="U_Column_List" /> ,ue.DUTY_TYPE, PASSWORD
        <if test="deptIda != 0 ">
            , d.DEPT_NAME
        </if>
        from "USER" u
        <if test="deptIda!=0">
            , department d
        </if>
        ,user_ext ue where
        u.user_id is not null
        and u."UID"=ue."UID"
        <if test="deptIda != 0 ">
            and u.DEPT_ID=d.DEPT_ID
        </if>
        <if test="byname!=null and byname!='' ">
            and u.byname like concat(concat('%',#{byname}),'%')
        </if>
        <if test="userName!=null and userName!='' ">
            and u.user_name like concat(concat('%',#{userName}),'%')
        </if>
        <if test="mobilNo!=null and mobilNo!='' ">
            and u.mobil_no = #{mobilNo}
        </if>
        <if test="sex!=null and sex !='' ">
            and u.sex = #{sex}
        </if>
        <if test="postPriv!=null and postPriv!='' ">
            and u.post_Priv = #{postPriv}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin ==0 ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        <if test="notViewUser!=null and notViewUser!=''">
            AND u.not_View_User = #{notViewUser}
        </if>
        <if test="notViewTable!=null and notViewTable!=''">
            AND u.not_View_Table = #{notViewTable}
        </if>
        <if test="dutyType!=null and dutyType!=0 ">
            AND ue.DUTY_TYPE = #{dutyType}
        </if>

        <if test="deptIda==0">
            AND u.dept_id = 0
        </if>


        <if test="userPrivs!=null">
            <foreach collection="userPrivs" item="userPriv" open="and u.user_priv in (" close=")" separator=",">
                <if test="userPriv!=null and userPriv!=0">
                    ${userPriv}
                </if>
            </foreach>
        </if>

        <if test="deptIds!=null">
            and
            <if test=" deptIda > 0 ">
                (
            </if>
            <foreach collection="deptIds" item="deptId" open=" u.dept_Id in (" close=")" separator=",">
                <if test="deptId!=null and deptId!=0">
                    ${deptId}
                </if>
            </foreach>
            <if test=" deptIda > 0 ">
                OR (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptIda}),',%') OR u.DEPT_ID_OTHER LIKE
                CONCAT(#{deptIda},',%'))
            </if>
        </if>

        ORDER BY
        <if test="deptIda != 0 ">
            d.DEPT_NO,
        </if>
        u.user_priv_no,u.user_no

        <if test="sortType!=null and sortType=='desc' ">
            ,u.LAST_VISIT_TIME desc
        </if>
        <if test="sortType!=null and sortType=='asc' ">
            ,u.LAST_VISIT_TIME ASC
        </if>

    </select>
    <select id="queryExportUsers" parameterType="map" resultMap="UserResultMap" databaseId="dm">
        select <include refid="U_Column_List" /> ,ue.DUTY_TYPE, PASSWORD
        <if test="deptIda != 0 ">
            , d.DEPT_NAME
        </if>
        from "USER" u
        <if test="deptIda!=0">
            , department d
        </if>
        ,user_ext ue where
        u.user_id is not null
        and u."uid"=ue."uid"
        <if test="deptIda != 0 ">
            and u.DEPT_ID=d.DEPT_ID
        </if>
        <if test="byname!=null and byname!='' ">
            and u.byname like concat("%#{byname}","%")
        </if>
        <if test="userName!=null and userName!='' ">
            and u.user_name like concat("%#{userName}","%")
        </if>
        <if test="mobilNo!=null and mobilNo!='' ">
            and u.mobil_no = #{mobilNo}
        </if>
        <if test="sex!=null and sex !='' ">
            and u.sex = #{sex}
        </if>
        <if test="postPriv!=null and postPriv!='' ">
            and u.post_Priv = #{postPriv}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin ==0 ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        <if test="notViewUser!=null and notViewUser!=''">
            AND u.not_View_User = #{notViewUser}
        </if>
        <if test="notViewTable!=null and notViewTable!=''">
            AND u.not_View_Table = #{notViewTable}
        </if>
        <if test="dutyType!=null and dutyType!=0 ">
            AND ue.DUTY_TYPE = #{dutyType}
        </if>

        <if test="deptIda==0">
            AND u.dept_id = 0
        </if>


        <if test="userPrivs!=null">
            <foreach collection="userPrivs" item="userPriv" open="and u.user_priv in (" close=")" separator=",">
                <if test="userPriv!=null and userPriv!=0">
                    ${userPriv}
                </if>
            </foreach>
        </if>

        <if test="deptIds!=null">
            and
            <if test=" deptIda > 0 ">
                (
            </if>
            <foreach collection="deptIds" item="deptId" open=" u.dept_Id in (" close=")" separator=",">
                <if test="deptId!=null and deptId!=0">
                    ${deptId}
                </if>
            </foreach>
            <if test=" deptIda > 0 ">
                OR (u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptIda}),',%') OR u.DEPT_ID_OTHER LIKE
                CONCAT(#{deptIda},',%')))
            </if>
        </if>

        ORDER BY
        <if test="deptIda != 0 ">
            d.DEPT_NO,
        </if>
        u.user_priv_no,u.user_no

        <if test="sortType!=null and sortType=='desc' ">
            ,u.LAST_VISIT_TIME desc
        </if>
        <if test="sortType!=null and sortType=='asc' ">
            ,u.LAST_VISIT_TIME ASC
        </if>

    </select>
    <select id="queryExportUsers" parameterType="map" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="U_Column_List_KB" /> ,ue.DUTY_TYPE, PASSWORD
        <if test="deptIda != 0 ">
            , d.DEPT_NAME
        </if>
        from "user" u
        <if test="deptIda!=0">
            , department d
        </if>
        ,user_ext ue where
        u.user_id is not null
        and u.uid=ue.uid
        <if test="deptIda != 0 ">
            and u.DEPT_ID=d.DEPT_ID
        </if>
        <if test="byname!=null and byname!='' ">
            and u.byname like concat(concat('%', #{byname}),'%')
        </if>
        <if test="userName!=null and userName!='' ">
            and u.user_name like concat(concat('%', #{userName}),'%')
        </if>
        <if test="mobilNo!=null and mobilNo!='' ">
            and u.mobil_no like concat(#{mobilNo},'%')
        </if>
        <if test="sex!=null and sex !='' ">
            and u.sex = #{sex}
        </if>
        <if test="postPriv!=null and postPriv!='' ">
            and u.post_Priv = #{postPriv}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin ==0 ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        <if test="notViewUser!=null and notViewUser!=''">
            AND u.not_View_User = #{notViewUser}
        </if>
        <if test="notViewTable!=null and notViewTable!=''">
            AND u.not_View_Table = #{notViewTable}
        </if>
        <if test="dutyType!=null and dutyType!=0 ">
            AND ue.DUTY_TYPE = #{dutyType}
        </if>

        <if test="deptIda==0">
            AND u.dept_id = 0
        </if>
        <if test="deptIda!=0">
            AND u.dept_id != 0
        </if>
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>

        <if test="userPrivs!=null">
            <foreach collection="userPrivs" item="userPriv" open="and (u.user_priv in (" close=")" separator=",">
                <if test="userPriv!=null and userPriv!=0">
                    ${userPriv}
                </if>
            </foreach>
            <foreach item="userPriv" collection="userPrivs" open="" separator="" close=")">
                <if test="userPriv!=null and userPriv!= '' ">
                    OR u.USER_PRIV_OTHER LIKE CONCAT(concat('%,',#{userPriv}),',%')
                    OR u.USER_PRIV_OTHER LIKE CONCAT(#{userPriv},',%')
                </if>
            </foreach>
        </if>


        <if test="deptIds!=null">
            and
            <if test=" deptIda > 0 ">
                (
            </if>
            <foreach collection="deptIds" item="deptId" open="u.dept_Id in (" close=")" separator=",">
                <if test="deptId!=null and deptId!=0">
                    ${deptId}
                </if>
            </foreach>

            <if test=" deptIda > 0 ">
                OR (u.DEPT_ID_OTHER LIKE CONCAT(concat('%,',#{deptIda}),',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptIda},',%')))
            </if>
        </if>


        ORDER BY
        u.user_priv_no,u.user_no,u.user_name
        <!--<if test="deptIda != 0 " >
            d.DEPT_NO,
        </if>
        u.user_priv_no,u.user_no,u.USER_NAME

        <if test="sortType!=null and sortType=='desc' " >
             ,u.LAST_VISIT_TIME desc
        </if>
        <if test="sortType!=null and sortType=='asc' " >
             ,u.LAST_VISIT_TIME ASC
        </if>-->

    </select>
    <update id="editUserBatch">
        update user
        <set>
            <if test="user.userId != null and user.userId !=''">
                USER_ID = #{user.userId},
            </if>
            <if test="user.userName != null and user.userName !=''">
                USER_NAME = #{user.userName},
            </if>
            <if test="user.userNameIndex != null and user.userNameIndex !=''">
                USER_NAME_INDEX = #{user.userNameIndex},
            </if>
            <if test="user.byname != null and user.byname !=''">
                BYNAME = #{user.byname},
            </if>
            <if test="user.useingKey != null and user.useingKey !=''">
                USEING_KEY = #{user.useingKey},
            </if>
            <if test="user.usingFinger != null and user.usingFinger !=''">
                USING_FINGER = #{user.usingFinger},
            </if>
            <if test="user.password != null and user.password !=''">
                PASSWORD = #{user.password},
            </if>
            <if test="user.keySn != null and user.keySn !=''">
                KEY_SN = #{user.keySn},
            </if>
            <if test="user.secureKeySn != null and user.secureKeySn !=''">
                SECURE_KEY_SN = #{user.secureKeySn},
            </if>
            <if test="user.userPriv != null and user.userPriv !='' ">
                USER_PRIV = #{user.userPriv},
            </if>
            <if test="user.userPrivNo != null and user.userPrivNo !=''">
                USER_PRIV_NO = #{user.userPrivNo},
            </if>
            <if test="user.userPrivName != null and user.userPrivName !=''">
                USER_PRIV_NAME = #{user.userPrivName},
            </if>
            <if test="user.postPriv != null and user.postPriv !=''or user.postPriv==0 ">
                POST_PRIV = #{user.postPriv},
            </if>
            <if test="user.postDept != null and user.postDept !=''">
                POST_DEPT = #{user.postDept},
            </if>
            <if test="user.deptId != null and user.deptId !='' or user.deptId ==0 ">
                DEPT_ID = #{user.deptId},
            </if>
            <if test="user.deptIdOther != null and user.deptIdOther !=''">
                DEPT_ID_OTHER = #{user.deptIdOther},
            </if>
            <if test="user.sex != null and user.sex !=''">
                SEX = #{user.sex},
            </if>
            <if test="user.birthday != null ">
                BIRTHDAY = #{user.birthday},
            </if>
            <if test="user.isLunar != null and user.isLunar !='' or user.isLunar == 0 ">
                IS_LUNAR = #{user.isLunar},
            </if>
            <if test="user.telNoDept != null and user.telNoDept!='' ">
                TEL_NO_DEPT = #{user.telNoDept},
            </if>
            <if test="user.faxNoDept != null and user.faxNoDept !=''">
                FAX_NO_DEPT = #{user.faxNoDept},
            </if>
            <if test="user.addHome != null and user.addHome !=''">
                ADD_HOME = #{user.addHome},
            </if>
            <if test="user.postNoHome != null and user.postNoHome !=''">
                POST_NO_HOME = #{user.postNoHome},
            </if>
            <if test="user.telNoHome != null and user.telNoHome !=''">
                TEL_NO_HOME = #{user.telNoHome},
            </if>
            <if test="user.mobilNo != null and user.mobilNo !='' ">
                MOBIL_NO = #{user.mobilNo},
            </if>
            <if test="user.bpNo != null and user.bpNo !=''">
                BP_NO = #{user.bpNo},
            </if>
            <if test="user.email != null and user.email !='' ">
                EMAIL = #{user.email},
            </if>
            <if test="user.oicqNo != null and user.oicqNo!='' ">
                OICQ_NO = #{user.oicqNo},
            </if>
            <if test="user.icqNo != null and user.icqNo!='' ">
                ICQ_NO = #{user.icqNo},
            </if>
            <if test="user.msn != null and user.msn!=''  ">
                MSN = #{user.msn},
            </if>
            <if test="user.avatar != null and user.avatar!='' ">
                AVATAR = #{user.avatar},
            </if>
            <if test="user.callSound != null and user.callSound !=''">
                CALL_SOUND = #{user.callSound},
            </if>
            <if test="user.lastVisitTime != null and user.lastVisitTime !=''">
                LAST_VISIT_TIME = #{user.lastVisitTime},
            </if>
            <if test="user.smsOn != null and user.smsOn !='' or user.smsOn ==0 ">
                SMS_ON = #{user.smsOn},
            </if>
            <if test="user.menuType != null and user.menuType !=''">
                MENU_TYPE = #{user.menuType},
            </if>
            <if test="user.lastPassTime != null and user.lastPassTime !=''">
                LAST_PASS_TIME = #{user.lastPassTime},
            </if>
            <if test="user.theme != null and user.theme !=''">
                THEME = #{user.theme},
            </if>
            <if test="user.portal != null and user.portal !=''">
                PORTAL = #{user.portal},
            </if>
            <if test="user.panel != null and user.panel !=''">
                PANEL = #{user.panel},
            </if>
            <if test="user.online != null and user.online !=''">
                ONLINE = #{user.online},
            </if>
            <if test="user.onStatus != null and user.onStatus !=''">
                ON_STATUS = #{user.onStatus},
            </if>
            <if test="user.attendStatus != null and user.attendStatus !=''">
                ATTEND_STATUS = #{user.attendStatus},
            </if>
            <if test="user.mobilNoHidden != null and user.mobilNoHidden !='' or user.mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{user.mobilNoHidden},
            </if>
            <if test="user.mytableLeft != null and user.mytableLeft !=''">
                MYTABLE_LEFT = #{user.mytableLeft},
            </if>
            <if test="user.mytableRight != null and user.mytableRight !=''">
                MYTABLE_RIGHT = #{user.mytableRight},
            </if>
            <if test="user.userPrivOther != null and user.userPrivOther !=''">
                USER_PRIV_OTHER = #{user.userPrivOther},
            </if>
            <if test="user.userNo != null and user.userNo !=''">
                USER_NO = #{user.userNo},
            </if>
            <if test="user.notLogin != null and user.notLogin !='' or user.notLogin == 0 ">
                NOT_LOGIN = #{user.notLogin},
            </if>
            <if test="user.notViewUser != null and user.notViewUser !='' or user.notViewUser==0 ">
                NOT_VIEW_USER = #{user.notViewUser},
            </if>
            <if test="user.notViewTable != null and user.notViewTable !='' or user.notViewTable==0 ">
                NOT_VIEW_TABLE = #{user.notViewTable},
            </if>
            <if test="user.notSearch != null and user.notSearch !='' or user.notSearch==0 ">
                NOT_SEARCH = #{user.notSearch},
            </if>
            <if test="user.bkground != null and user.bkground !=''">
                BKGROUND = #{user.bkground},
            </if>
            <if test="user.bindIp != null and user.bindIp !=''">
                BIND_IP = #{user.bindIp},
            </if>
            <if test="user.lastVisitIp != null and user.lastVisitIp !=''">
                LAST_VISIT_IP = #{user.lastVisitIp},
            </if>
            <if test="user.menuImage != null and user.menuImage !='' or user.menuImage==0 ">
                MENU_IMAGE = #{user.menuImage},
            </if>
            <if test="user.weatherCity != null and user.weatherCity !=''">
                WEATHER_CITY = #{user.weatherCity},
            </if>
            <if test="user.showRss != null and user.showRss !=''">
                SHOW_RSS = #{user.showRss},
            </if>
            <if test="user.menuExpand != null and user.menuExpand !=''">
                MENU_EXPAND = #{user.menuExpand},
            </if>
            <if test="user.myStatus != null and user.myStatus !=''">
                MY_STATUS = #{user.myStatus},
            </if>
            <if test="user.limitLogin != null and user.limitLogin !=''">
                LIMIT_LOGIN = #{user.limitLogin},
            </if>
            <if test="user.photo != null and user.photo !=''">
                PHOTO = #{user.photo},
            </if>
            <if test="user.imRange != null and user.imRange !=''">
                IM_RANGE = #{user.imRange},
            </if>
            <if test="user.leaveTime != null and user.leaveTime !=''">
                LEAVE_TIME = #{user.leaveTime},
            </if>
            <if test="user.secretLevel != null and user.secretLevel !=''">
                SECRET_LEVEL = #{user.secretLevel},
            </if>
            <if test="user.notMobileLogin != null and user.notMobileLogin !='' or user.notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{user.notMobileLogin},
            </if>
            <if test="user.manageModuleType != null and user.manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{user.manageModuleType},
            </if>
            <if test="user.userPrivType != null and user.userPrivType !=''">
                USER_PRIV_TYPE = #{user.userPrivType},
            </if>
            <if test="user.userManageOrgs != null and user.userManageOrgs !=''">
                USER_MANAGE_ORGS = #{user.userManageOrgs},
            </if>
            <if test="user.shortcut != null and user.shortcut !=''">
                SHORTCUT = #{user.shortcut},
            </if>
            <if test="user.myRss != null and user.myRss !=''">
                MY_RSS = #{user.myRss},
            </if>
            <if test="user.remark != null and user.remark !=''">
                REMARK = #{user.remark},
            </if>
            <if test="user.userPara != null and user.userPara !=''">
                USER_PARA = #{user.userPara}
            </if>
            <if test="user.deptYj != null and user.deptYj !=''">
                DEPT_YJ = #{user.deptYj}
            </if>
        </set>
        WHERE uid in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUserBatch" databaseId="kingbase">
        update "user"
        <set>
            <if test="user.userId != null and user.userId !=''">
                USER_ID = #{user.userId},
            </if>
            <if test="user.userName != null and user.userName !=''">
                USER_NAME = #{user.userName},
            </if>
            <if test="user.userNameIndex != null and user.userNameIndex !=''">
                USER_NAME_INDEX = #{user.userNameIndex},
            </if>
            <if test="user.byname != null and user.byname !=''">
                BYNAME = #{user.byname},
            </if>
            <if test="user.useingKey != null and user.useingKey !=''">
                USEING_KEY = #{user.useingKey},
            </if>
            <if test="user.usingFinger != null and user.usingFinger !=''">
                USING_FINGER = #{user.usingFinger},
            </if>
            <if test="user.password != null and user.password !=''">
                PASSWORD = #{user.password},
            </if>
            <if test="user.keySn != null and user.keySn !=''">
                KEY_SN = #{user.keySn},
            </if>
            <if test="user.secureKeySn != null and user.secureKeySn !=''">
                SECURE_KEY_SN = #{user.secureKeySn},
            </if>
            <if test="user.userPriv != null and user.userPriv !='' ">
                USER_PRIV = #{user.userPriv},
            </if>
            <if test="user.userPrivNo != null and user.userPrivNo !=''">
                USER_PRIV_NO = #{user.userPrivNo},
            </if>
            <if test="user.userPrivName != null and user.userPrivName !=''">
                USER_PRIV_NAME = #{user.userPrivName},
            </if>
            <if test="user.postPriv != null and user.postPriv !=''or user.postPriv==0 ">
                POST_PRIV = #{user.postPriv},
            </if>
            <if test="user.postDept != null and user.postDept !=''">
                POST_DEPT = #{user.postDept},
            </if>
            <if test="user.deptId != null and user.deptId !='' or user.deptId ==0 ">
                DEPT_ID = #{user.deptId},
            </if>
            <if test="user.deptIdOther != null and user.deptIdOther !=''">
                DEPT_ID_OTHER = #{user.deptIdOther},
            </if>
            <if test="user.sex != null and user.sex !=''">
                SEX = #{user.sex},
            </if>
            <if test="user.birthday != null ">
                BIRTHDAY = #{user.birthday},
            </if>
            <if test="user.isLunar != null and user.isLunar !='' or user.isLunar == 0 ">
                IS_LUNAR = #{user.isLunar},
            </if>
            <if test="user.telNoDept != null and user.telNoDept!='' ">
                TEL_NO_DEPT = #{user.telNoDept},
            </if>
            <if test="user.faxNoDept != null and user.faxNoDept !=''">
                FAX_NO_DEPT = #{user.faxNoDept},
            </if>
            <if test="user.addHome != null and user.addHome !=''">
                ADD_HOME = #{user.addHome},
            </if>
            <if test="user.postNoHome != null and user.postNoHome !=''">
                POST_NO_HOME = #{user.postNoHome},
            </if>
            <if test="user.telNoHome != null and user.telNoHome !=''">
                TEL_NO_HOME = #{user.telNoHome},
            </if>
            <if test="user.mobilNo != null and user.mobilNo !='' ">
                MOBIL_NO = #{user.mobilNo},
            </if>
            <if test="user.bpNo != null and user.bpNo !=''">
                BP_NO = #{user.bpNo},
            </if>
            <if test="user.email != null and user.email !='' ">
                EMAIL = #{user.email},
            </if>
            <if test="user.oicqNo != null and user.oicqNo!='' ">
                OICQ_NO = #{user.oicqNo},
            </if>
            <if test="user.icqNo != null and user.icqNo!='' ">
                ICQ_NO = #{user.icqNo},
            </if>
            <if test="user.msn != null and user.msn!=''  ">
                MSN = #{user.msn},
            </if>
            <if test="user.avatar != null and user.avatar!='' ">
                AVATAR = #{user.avatar},
            </if>
            <if test="user.callSound != null and user.callSound !=''">
                CALL_SOUND = #{user.callSound},
            </if>
            <if test="user.lastVisitTime != null and user.lastVisitTime !=''">
                LAST_VISIT_TIME = #{user.lastVisitTime},
            </if>
            <if test="user.smsOn != null and user.smsOn !='' or user.smsOn ==0 ">
                SMS_ON = #{user.smsOn},
            </if>
            <if test="user.menuType != null and user.menuType !=''">
                MENU_TYPE = #{user.menuType},
            </if>
            <if test="user.lastPassTime != null and user.lastPassTime !=''">
                LAST_PASS_TIME = #{user.lastPassTime},
            </if>
            <if test="user.theme != null and user.theme !=''">
                THEME = #{user.theme},
            </if>
            <if test="user.portal != null and user.portal !=''">
                PORTAL = #{user.portal},
            </if>
            <if test="user.panel != null and user.panel !=''">
                PANEL = #{user.panel},
            </if>
            <if test="user.online != null and user.online !=''">
                ONLINE = #{user.online},
            </if>
            <if test="user.onStatus != null and user.onStatus !=''">
                ON_STATUS = #{user.onStatus},
            </if>
            <if test="user.attendStatus != null and user.attendStatus !=''">
                ATTEND_STATUS = #{user.attendStatus},
            </if>
            <if test="user.mobilNoHidden != null and user.mobilNoHidden !='' or user.mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{user.mobilNoHidden},
            </if>
            <if test="user.mytableLeft != null and user.mytableLeft !=''">
                MYTABLE_LEFT = #{user.mytableLeft},
            </if>
            <if test="user.mytableRight != null and user.mytableRight !=''">
                MYTABLE_RIGHT = #{user.mytableRight},
            </if>
            <if test="user.userPrivOther != null and user.userPrivOther !=''">
                USER_PRIV_OTHER = #{user.userPrivOther},
            </if>
            <if test="user.userNo != null and user.userNo !=''">
                USER_NO = #{user.userNo},
            </if>
            <if test="user.notLogin != null and user.notLogin !='' or user.notLogin == 0 ">
                NOT_LOGIN = #{user.notLogin},
            </if>
            <if test="user.notViewUser != null and user.notViewUser !='' or user.notViewUser==0 ">
                NOT_VIEW_USER = #{user.notViewUser},
            </if>
            <if test="user.notViewTable != null and user.notViewTable !='' or user.notViewTable==0 ">
                NOT_VIEW_TABLE = #{user.notViewTable},
            </if>
            <if test="user.notSearch != null and user.notSearch !='' or user.notSearch==0 ">
                NOT_SEARCH = #{user.notSearch},
            </if>
            <if test="user.bkground != null and user.bkground !=''">
                BKGROUND = #{user.bkground},
            </if>
            <if test="user.bindIp != null and user.bindIp !=''">
                BIND_IP = #{user.bindIp},
            </if>
            <if test="user.lastVisitIp != null and user.lastVisitIp !=''">
                LAST_VISIT_IP = #{user.lastVisitIp},
            </if>
            <if test="user.menuImage != null and user.menuImage !='' or user.menuImage==0 ">
                MENU_IMAGE = #{user.menuImage},
            </if>
            <if test="user.weatherCity != null and user.weatherCity !=''">
                WEATHER_CITY = #{user.weatherCity},
            </if>
            <if test="user.showRss != null and user.showRss !=''">
                SHOW_RSS = #{user.showRss},
            </if>
            <if test="user.menuExpand != null and user.menuExpand !=''">
                MENU_EXPAND = #{user.menuExpand},
            </if>
            <if test="user.myStatus != null and user.myStatus !=''">
                MY_STATUS = #{user.myStatus},
            </if>
            <if test="user.limitLogin != null and user.limitLogin !=''">
                LIMIT_LOGIN = #{user.limitLogin},
            </if>
            <if test="user.photo != null and user.photo !=''">
                PHOTO = #{user.photo},
            </if>
            <if test="user.imRange != null and user.imRange !=''">
                IM_RANGE = #{user.imRange},
            </if>
            <if test="user.leaveTime != null and user.leaveTime !=''">
                LEAVE_TIME = #{user.leaveTime},
            </if>
            <if test="user.secretLevel != null and user.secretLevel !=''">
                SECRET_LEVEL = #{user.secretLevel},
            </if>
            <if test="user.notMobileLogin != null and user.notMobileLogin !='' or user.notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{user.notMobileLogin},
            </if>
            <if test="user.manageModuleType != null and user.manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{user.manageModuleType},
            </if>
            <if test="user.userPrivType != null and user.userPrivType !=''">
                USER_PRIV_TYPE = #{user.userPrivType},
            </if>
            <if test="user.userManageOrgs != null and user.userManageOrgs !=''">
                USER_MANAGE_ORGS = #{user.userManageOrgs},
            </if>
            <if test="user.shortcut != null and user.shortcut !=''">
                SHORTCUT = #{user.shortcut},
            </if>
            <if test="user.myRss != null and user.myRss !=''">
                MY_RSS = #{user.myRss},
            </if>
            <if test="user.remark != null and user.remark !=''">
                REMARK = #{user.remark},
            </if>
            <if test="user.userPara != null and user.userPara !=''">
                USER_PARA = #{user.userPara}
            </if>
            <if test="user.deptYj != null and user.deptYj !=''">
                DEPT_YJ = #{user.deptYj}
            </if>
        </set>
        WHERE uid in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <update id="editUserBatch" databaseId="oracle">
        update "USER"
        <set>
            <if test="user.userId != null and user.userId !=''">
                USER_ID = #{user.userId},
            </if>
            <if test="user.userName != null and user.userName !=''">
                USER_NAME = #{user.userName},
            </if>
            <if test="user.userNameIndex != null and user.userNameIndex !=''">
                USER_NAME_INDEX = #{user.userNameIndex},
            </if>
            <if test="user.byname != null and user.byname !=''">
                BYNAME = #{user.byname},
            </if>
            <if test="user.useingKey != null and user.useingKey !=''">
                USEING_KEY = #{user.useingKey},
            </if>
            <if test="user.usingFinger != null and user.usingFinger !=''">
                USING_FINGER = #{user.usingFinger},
            </if>
            <if test="user.password != null and user.password !=''">
                PASSWORD = #{user.password},
            </if>
            <if test="user.keySn != null and user.keySn !=''">
                KEY_SN = #{user.keySn},
            </if>
            <if test="user.secureKeySn != null and user.secureKeySn !=''">
                SECURE_KEY_SN = #{user.secureKeySn},
            </if>
            <if test="user.userPriv != null and user.userPriv !='' ">
                USER_PRIV = #{user.userPriv},
            </if>
            <if test="user.userPrivNo != null and user.userPrivNo !=''">
                USER_PRIV_NO = #{user.userPrivNo},
            </if>
            <if test="user.userPrivName != null and user.userPrivName !=''">
                USER_PRIV_NAME = #{user.userPrivName},
            </if>
            <if test="user.postPriv != null and user.postPriv !=''or user.postPriv==0 ">
                POST_PRIV = #{user.postPriv},
            </if>
            <if test="user.postDept != null and user.postDept !=''">
                POST_DEPT = #{user.postDept},
            </if>
            <if test="user.deptId != null and user.deptId !='' or user.deptId ==0 ">
                DEPT_ID = #{user.deptId},
            </if>
            <if test="user.deptIdOther != null and user.deptIdOther !=''">
                DEPT_ID_OTHER = #{user.deptIdOther},
            </if>
            <if test="user.sex != null and user.sex !=''">
                SEX = #{user.sex},
            </if>
            <if test="user.birthday != null ">
                BIRTHDAY = #{user.birthday},
            </if>
            <if test="user.isLunar != null and user.isLunar !='' or user.isLunar == 0 ">
                IS_LUNAR = #{user.isLunar},
            </if>
            <if test="user.telNoDept != null and user.telNoDept!=''">
                TEL_NO_DEPT = #{user.telNoDept},
            </if>
            <if test="user.faxNoDept != null and user.faxNoDept !=''">
                FAX_NO_DEPT = #{user.faxNoDept},
            </if>
            <if test="user.addHome != null and user.addHome !=''">
                ADD_HOME = #{user.addHome},
            </if>
            <if test="user.postNoHome != null and user.postNoHome !=''">
                POST_NO_HOME = #{user.postNoHome},
            </if>
            <if test="user.telNoHome != null and user.telNoHome !=''">
                TEL_NO_HOME = #{user.telNoHome},
            </if>
            <if test="user.mobilNo != null and user.mobilNo!=''">
                MOBIL_NO = #{user.mobilNo},
            </if>
            <if test="user.bpNo != null and user.bpNo !=''">
                BP_NO = #{user.bpNo},
            </if>
            <if test="user.email != null and user.email!='' ">
                EMAIL = #{user.email},
            </if>
            <if test="user.oicqNo != null and user.oicqNo!='' ">
                OICQ_NO = #{user.oicqNo},
            </if>
            <if test="user.icqNo != null and user.icqNo!=''">
                ICQ_NO = #{user.icqNo},
            </if>
            <if test="user.msn != null and user.msn!='' ">
                MSN = #{user.msn},
            </if>
            <if test="user.avatar != null and user.avatar!='' ">
                AVATAR = #{user.avatar},
            </if>
            <if test="user.callSound != null and user.callSound !=''">
                CALL_SOUND = #{user.callSound},
            </if>
            <if test="user.lastVisitTime != null and user.lastVisitTime !=''">
                LAST_VISIT_TIME = #{user.lastVisitTime},
            </if>
            <if test="user.smsOn != null and user.smsOn !='' or user.smsOn ==0 ">
                SMS_ON = #{user.smsOn},
            </if>
            <if test="user.menuType != null and user.menuType !=''">
                MENU_TYPE = #{user.menuType},
            </if>
            <if test="user.lastPassTime != null and user.lastPassTime !=''">
                LAST_PASS_TIME = #{user.lastPassTime},
            </if>
            <if test="user.theme != null and user.theme !=''">
                THEME = #{user.theme},
            </if>
            <if test="user.portal != null and user.portal !=''">
                PORTAL = #{user.portal},
            </if>
            <if test="user.panel != null and user.panel !=''">
                PANEL = #{user.panel},
            </if>
            <if test="user.online != null and user.online !=''">
                ONLINE = #{user.online},
            </if>
            <if test="user.onStatus != null and user.onStatus !=''">
                ON_STATUS = #{user.onStatus},
            </if>
            <if test="user.attendStatus != null and user.attendStatus !=''">
                ATTEND_STATUS = #{user.attendStatus},
            </if>
            <if test="user.mobilNoHidden != null and user.mobilNoHidden !='' or user.mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{user.mobilNoHidden},
            </if>
            <if test="user.mytableLeft != null and user.mytableLeft !=''">
                MYTABLE_LEFT = #{user.mytableLeft},
            </if>
            <if test="user.mytableRight != null and user.mytableRight !=''">
                MYTABLE_RIGHT = #{user.mytableRight},
            </if>
            <if test="user.userPrivOther != null and user.userPrivOther !=''">
                USER_PRIV_OTHER = #{user.userPrivOther},
            </if>
            <if test="user.userNo != null and user.userNo !=''">
                USER_NO = #{user.userNo},
            </if>
            <if test="user.notLogin != null and user.notLogin !='' or user.notLogin == 0 ">
                NOT_LOGIN = #{user.notLogin},
            </if>
            <if test="user.notViewUser != null and user.notViewUser !='' or user.notViewUser==0 ">
                NOT_VIEW_USER = #{user.notViewUser},
            </if>
            <if test="user.notViewTable != null and user.notViewTable !='' or user.notViewTable==0 ">
                NOT_VIEW_TABLE = #{user.notViewTable},
            </if>
            <if test="user.notSearch != null and user.notSearch !='' or user.notSearch==0 ">
                NOT_SEARCH = #{user.notSearch},
            </if>
            <if test="user.bkground != null and user.bkground !=''">
                BKGROUND = #{user.bkground},
            </if>
            <if test="user.bindIp != null and user.bindIp !=''">
                BIND_IP = #{user.bindIp},
            </if>
            <if test="user.lastVisitIp != null and user.lastVisitIp !=''">
                LAST_VISIT_IP = #{user.lastVisitIp},
            </if>
            <if test="user.menuImage != null and user.menuImage !='' or user.menuImage==0 ">
                MENU_IMAGE = #{user.menuImage},
            </if>
            <if test="user.weatherCity != null and user.weatherCity !=''">
                WEATHER_CITY = #{user.weatherCity},
            </if>
            <if test="user.showRss != null and user.showRss !=''">
                SHOW_RSS = #{user.showRss},
            </if>
            <if test="user.menuExpand != null and user.menuExpand !=''">
                MENU_EXPAND = #{user.menuExpand},
            </if>
            <if test="user.myStatus != null and user.myStatus !=''">
                MY_STATUS = #{user.myStatus},
            </if>
            <if test="user.limitLogin != null and user.limitLogin !=''">
                LIMIT_LOGIN = #{user.limitLogin},
            </if>
            <if test="user.photo != null and user.photo !=''">
                PHOTO = #{user.photo},
            </if>
            <if test="user.imRange != null and user.imRange !=''">
                IM_RANGE = #{user.imRange},
            </if>
            <if test="user.leaveTime != null and user.leaveTime !=''">
                LEAVE_TIME = #{user.leaveTime},
            </if>
            <if test="user.secretLevel != null and user.secretLevel !=''">
                SECRET_LEVEL = #{user.secretLevel},
            </if>
            <if test="user.notMobileLogin != null and user.notMobileLogin !='' or user.notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{user.notMobileLogin},
            </if>
            <if test="user.manageModuleType != null and user.manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{user.manageModuleType},
            </if>
            <if test="user.userPrivType != null and user.userPrivType !=''">
                USER_PRIV_TYPE = #{user.userPrivType},
            </if>
            <if test="user.userManageOrgs != null and user.userManageOrgs !=''">
                USER_MANAGE_ORGS = #{user.userManageOrgs},
            </if>
            <if test="user.shortcut != null and user.shortcut !=''">
                SHORTCUT = #{user.shortcut},
            </if>
            <if test="user.myRss != null and user.myRss !=''">
                MY_RSS = #{user.myRss},
            </if>
            <if test="user.remark != null and user.remark !=''">
                REMARK = #{user.remark},
            </if>
            <if test="user.userPara != null and user.userPara !=''">
                USER_PARA = #{user.userPara}
            </if>
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>

    <select id="queryExportUser" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,ue.DUTY_TYPE
        <if test="deptIda != 0 ">
            , d.DEPT_NAME
        </if>
        from user u
        <if test="deptIda!=0">
            , department d
        </if>
        ,user_ext ue where
        u.user_id is not null
        and u.uid=ue.uid
        <if test="deptIda != 0 ">
            and u.DEPT_ID=d.DEPT_ID
        </if>
        <if test="userId!=null and userId!='' ">
            and u.USER_ID like concat("%", #{userId},"%")
        </if>
        <if test="byname!=null and byname!='' ">
            and u.byname like concat("%", #{byname},"%")
        </if>
        <if test="userName!=null and userName!='' ">
            and u.user_name like concat("%", #{userName},"%")
        </if>
        <if test="mobilNo!=null and mobilNo!='' ">
            and u.mobil_no like concat(#{mobilNo},"%")
        </if>
        <if test="sex!=null and sex !='' ">
            and u.sex = #{sex}
        </if>
        <if test="postPriv!=null and postPriv!='' ">
            and u.post_Priv = #{postPriv}
        </if>
        <if test="notLogin != null and notLogin !='' or notLogin ==0 ">
            and u.NOT_LOGIN = ${notLogin}
        </if>
        <if test="notViewUser!=null and notViewUser!=''">
            AND u.not_View_User = #{notViewUser}
        </if>
        <if test="notViewTable!=null and notViewTable!=''">
            AND u.not_View_Table = #{notViewTable}
        </if>
        <if test="dutyType!=null and dutyType!=0 ">
            AND ue.DUTY_TYPE = #{dutyType}
        </if>

        <if test="deptIda==0">
            AND u.dept_id = 0
        </if>
        <if test="deptIda!=0">
            AND u.dept_id != 0
        </if>
        <if test="deptNo!=null and deptNo.length !=0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>

        <if test="userPrivs!=null">
            <foreach collection="userPrivs" item="userPriv" open="and (u.user_priv in (" close=")" separator=",">
                <if test="userPriv!=null and userPriv!=0">
                    ${userPriv}
                </if>
            </foreach>
            <foreach item="userPriv" collection="userPrivs" open="" separator="" close=")">
                <if test="userPriv!=null and userPriv!= '' ">
                    OR u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPriv},',%')
                    OR u.USER_PRIV_OTHER LIKE CONCAT(#{userPriv},',%')
                </if>
            </foreach>
        </if>


        <if test="deptIds!=null">
            and
            <if test=" deptIda > 0 ">
                (
            </if>
            <foreach collection="deptIds" item="deptId" open="u.dept_Id in (" close=")" separator=",">
                <if test="deptId!=null and deptId!=0">
                    ${deptId}
                </if>
            </foreach>

            <if test=" deptIda > 0 ">
                OR (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIda},',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptIda},',%')))
            </if>
        </if>

        ORDER BY
        u.user_no,u.user_name
        <!--<if test="deptIda != 0 " >
            d.DEPT_NO,
        </if>
        u.user_priv_no,u.user_no,u.USER_NAME

        <if test="sortType!=null and sortType=='desc' " >
             ,u.LAST_VISIT_TIME desc
        </if>
        <if test="sortType!=null and sortType=='asc' " >
             ,u.LAST_VISIT_TIME ASC
        </if>-->

    </select>

    <select id="getUsersByDeptIdBy" parameterType="java.lang.Integer" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> from user u ,department d ,user_ext ue
        WHERE  u.uid=ue.uid AND u.dept_id!=0  AND u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        )ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <update id="editUserBatch" databaseId="dm">
        update "USER"
        <set>
            <if test="user.userId != null and user.userId !=''">
                USER_ID = #{user.userId},
            </if>
            <if test="user.userName != null and user.userName !=''">
                USER_NAME = #{user.userName},
            </if>
            <if test="user.userNameIndex != null and user.userNameIndex !=''">
                USER_NAME_INDEX = #{user.userNameIndex},
            </if>
            <if test="user.byname != null and user.byname !=''">
                BYNAME = #{user.byname},
            </if>
            <if test="user.useingKey != null and user.useingKey !=''">
                USEING_KEY = #{user.useingKey},
            </if>
            <if test="user.usingFinger != null and user.usingFinger !=''">
                USING_FINGER = #{user.usingFinger},
            </if>
            <if test="user.password != null and user.password !=''">
                PASSWORD = #{user.password},
            </if>
            <if test="user.keySn != null and user.keySn !=''">
                KEY_SN = #{user.keySn},
            </if>
            <if test="user.secureKeySn != null and user.secureKeySn !=''">
                SECURE_KEY_SN = #{user.secureKeySn},
            </if>
            <if test="user.userPriv != null and user.userPriv !='' ">
                USER_PRIV = #{user.userPriv},
            </if>
            <if test="user.userPrivNo != null and user.userPrivNo !=''">
                USER_PRIV_NO = #{user.userPrivNo},
            </if>
            <if test="user.userPrivName != null and user.userPrivName !=''">
                USER_PRIV_NAME = #{user.userPrivName},
            </if>
            <if test="user.postPriv != null and user.postPriv !=''or user.postPriv==0 ">
                POST_PRIV = #{user.postPriv},
            </if>
            <if test="user.postDept != null and user.postDept !=''">
                POST_DEPT = #{user.postDept},
            </if>
            <if test="user.deptId != null and user.deptId !='' or user.deptId ==0 ">
                DEPT_ID = #{user.deptId},
            </if>
            <if test="user.deptIdOther != null and user.deptIdOther !=''">
                DEPT_ID_OTHER = #{user.deptIdOther},
            </if>
            <if test="user.sex != null and user.sex !=''">
                SEX = #{user.sex},
            </if>
            <if test="user.birthday != null ">
                BIRTHDAY = #{user.birthday},
            </if>
            <if test="user.isLunar != null and user.isLunar !='' or user.isLunar == 0 ">
                IS_LUNAR = #{user.isLunar},
            </if>
            <if test="user.telNoDept != null and user.telNoDept!=''">
                TEL_NO_DEPT = #{user.telNoDept},
            </if>
            <if test="user.faxNoDept != null and user.faxNoDept !=''">
                FAX_NO_DEPT = #{user.faxNoDept},
            </if>
            <if test="user.addHome != null and user.addHome !=''">
                ADD_HOME = #{user.addHome},
            </if>
            <if test="user.postNoHome != null and user.postNoHome !=''">
                POST_NO_HOME = #{user.postNoHome},
            </if>
            <if test="user.telNoHome != null and user.telNoHome !=''">
                TEL_NO_HOME = #{user.telNoHome},
            </if>
            <if test="user.mobilNo != null and user.mobilNo!=''">
                MOBIL_NO = #{user.mobilNo},
            </if>
            <if test="user.bpNo != null and user.bpNo !=''">
                BP_NO = #{user.bpNo},
            </if>
            <if test="user.email != null and user.email!='' ">
                EMAIL = #{user.email},
            </if>
            <if test="user.oicqNo != null and user.oicqNo!='' ">
                OICQ_NO = #{user.oicqNo},
            </if>
            <if test="user.icqNo != null and user.icqNo!=''">
                ICQ_NO = #{user.icqNo},
            </if>
            <if test="user.msn != null and user.msn!='' ">
                MSN = #{user.msn},
            </if>
            <if test="user.avatar != null and user.avatar!='' ">
                AVATAR = #{user.avatar},
            </if>
            <if test="user.callSound != null and user.callSound !=''">
                CALL_SOUND = #{user.callSound},
            </if>
            <if test="user.lastVisitTime != null and user.lastVisitTime !=''">
                LAST_VISIT_TIME = #{user.lastVisitTime},
            </if>
            <if test="user.smsOn != null and user.smsOn !='' or user.smsOn ==0 ">
                SMS_ON = #{user.smsOn},
            </if>
            <if test="user.menuType != null and user.menuType !=''">
                MENU_TYPE = #{user.menuType},
            </if>
            <if test="user.lastPassTime != null and user.lastPassTime !=''">
                LAST_PASS_TIME = #{user.lastPassTime},
            </if>
            <if test="user.theme != null and user.theme !=''">
                THEME = #{user.theme},
            </if>
            <if test="user.portal != null and user.portal !=''">
                PORTAL = #{user.portal},
            </if>
            <if test="user.panel != null and user.panel !=''">
                PANEL = #{user.panel},
            </if>
            <if test="user.online != null and user.online !=''">
                ONLINE = #{user.online},
            </if>
            <if test="user.onStatus != null and user.onStatus !=''">
                ON_STATUS = #{user.onStatus},
            </if>
            <if test="user.attendStatus != null and user.attendStatus !=''">
                ATTEND_STATUS = #{user.attendStatus},
            </if>
            <if test="user.mobilNoHidden != null and user.mobilNoHidden !='' or user.mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{user.mobilNoHidden},
            </if>
            <if test="user.mytableLeft != null and user.mytableLeft !=''">
                MYTABLE_LEFT = #{user.mytableLeft},
            </if>
            <if test="user.mytableRight != null and user.mytableRight !=''">
                MYTABLE_RIGHT = #{user.mytableRight},
            </if>
            <if test="user.userPrivOther != null and user.userPrivOther !=''">
                USER_PRIV_OTHER = #{user.userPrivOther},
            </if>
            <if test="user.userNo != null and user.userNo !=''">
                USER_NO = #{user.userNo},
            </if>
            <if test="user.notLogin != null and user.notLogin !='' or user.notLogin == 0 ">
                NOT_LOGIN = #{user.notLogin},
            </if>
            <if test="user.notViewUser != null and user.notViewUser !='' or user.notViewUser==0 ">
                NOT_VIEW_USER = #{user.notViewUser},
            </if>
            <if test="user.notViewTable != null and user.notViewTable !='' or user.notViewTable==0 ">
                NOT_VIEW_TABLE = #{user.notViewTable},
            </if>
            <if test="user.notSearch != null and user.notSearch !='' or user.notSearch==0 ">
                NOT_SEARCH = #{user.notSearch},
            </if>
            <if test="user.bkground != null and user.bkground !=''">
                BKGROUND = #{user.bkground},
            </if>
            <if test="user.bindIp != null and user.bindIp !=''">
                BIND_IP = #{user.bindIp},
            </if>
            <if test="user.lastVisitIp != null and user.lastVisitIp !=''">
                LAST_VISIT_IP = #{user.lastVisitIp},
            </if>
            <if test="user.menuImage != null and user.menuImage !='' or user.menuImage==0 ">
                MENU_IMAGE = #{user.menuImage},
            </if>
            <if test="user.weatherCity != null and user.weatherCity !=''">
                WEATHER_CITY = #{user.weatherCity},
            </if>
            <if test="user.showRss != null and user.showRss !=''">
                SHOW_RSS = #{user.showRss},
            </if>
            <if test="user.menuExpand != null and user.menuExpand !=''">
                MENU_EXPAND = #{user.menuExpand},
            </if>
            <if test="user.myStatus != null and user.myStatus !=''">
                MY_STATUS = #{user.myStatus},
            </if>
            <if test="user.limitLogin != null and user.limitLogin !=''">
                LIMIT_LOGIN = #{user.limitLogin},
            </if>
            <if test="user.photo != null and user.photo !=''">
                PHOTO = #{user.photo},
            </if>
            <if test="user.imRange != null and user.imRange !=''">
                IM_RANGE = #{user.imRange},
            </if>
            <if test="user.leaveTime != null and user.leaveTime !=''">
                LEAVE_TIME = #{user.leaveTime},
            </if>
            <if test="user.secretLevel != null and user.secretLevel !=''">
                SECRET_LEVEL = #{user.secretLevel},
            </if>
            <if test="user.notMobileLogin != null and user.notMobileLogin !='' or user.notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{user.notMobileLogin},
            </if>
            <if test="user.manageModuleType != null and user.manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{user.manageModuleType},
            </if>
            <if test="user.userPrivType != null and user.userPrivType !=''">
                USER_PRIV_TYPE = #{user.userPrivType},
            </if>
            <if test="user.userManageOrgs != null and user.userManageOrgs !=''">
                USER_MANAGE_ORGS = #{user.userManageOrgs},
            </if>
            <if test="user.shortcut != null and user.shortcut !=''">
                SHORTCUT = #{user.shortcut},
            </if>
            <if test="user.myRss != null and user.myRss !=''">
                MY_RSS = #{user.myRss},
            </if>
            <if test="user.remark != null and user.remark !=''">
                REMARK = #{user.remark},
            </if>
            <if test="user.userPara != null and user.userPara !=''">
                USER_PARA = #{user.userPara}
            </if>
        </set>
        WHERE "UID" in
        <foreach item="uid" collection="uids" open="(" separator="," close=")">
            <if test="uid!=null and uid != '' ">
                #{uid}
            </if>
        </foreach>
    </update>
    <select id="getUsersByDeptIds" resultMap="UserResultMap">
        SELECT uid,USER_ID from user
        where
        dept_Id in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByDeptIds" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_ID from "user"
        where
        dept_Id in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByDeptIds" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID" from "USER"
        where
        dept_Id in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByDeptIds" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID" from "USER"
        where
        dept_Id in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByPrivIds" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> from user
        <where>
            DEPT_ID is not null
            <if test="privIds!=null">
                and (
                USER_PRIV in
                <foreach item="privId" collection="privIds" open="(" separator="," close=")">
                    <if test="privId!=null and privId != '' ">
                        #{privId}
                    </if>
                </foreach>
                <foreach item="privId" collection="privIds">
                    <if test="privId!=null and privId != '' ">
                        OR USER_PRIV_OTHER like concat('%,',#{privId},'%') OR USER_PRIV_OTHER like concat('%,',#{privId},',%') OR USER_PRIV_OTHER like concat('%',#{privId},',%')
                    </if>
                </foreach>
                )
            </if>
        </where>
    </select>

    <select id="getUsersByPrivIds" resultMap="UserResultMap" databaseId="oracle">
        SELECT <include refid="Column_List" /> from "USER"
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByPrivIds" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> from user
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByPrivIds" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" /> from "user"
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByDeptAndPriv" resultMap="UserResultMap">
        SELECT uid from user
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        AND
        dept_Id in
        <foreach item="deptId" collection="deptids" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByDeptAndPriv" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID" from "USER"
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        AND
        dept_Id in
        <foreach item="deptId" collection="deptids" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getUsersByDeptAndPriv" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID" from "USER"
        where
        USER_PRIV in
        <foreach item="privId" collection="privIds" open="(" separator="," close=")">
            <if test="privId!=null and privId != '' ">
                #{privId}
            </if>
        </foreach>
        AND
        dept_Id in
        <foreach item="deptId" collection="deptids" open="(" separator="," close=")">
            <if test="deptId!=null and deptId != '' ">
                #{deptId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUsersByuserId" resultMap="UserResultMap" parameterType="java.lang.String">
        SELECT d.DEPT_NAME ,<include refid="U_Column_List" /> FROM  user u INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID WHERE u.USER_ID=#{userId}
    </select>
    <select id="getUsersByuserId" resultMap="UserResultMap" parameterType="java.lang.String" databaseId="oracle">
        SELECT <include refid="Column_List" /> FROM  "USER" WHERE USER_ID=#{userId}
    </select>
    <select id="getUsersByuserId" resultMap="UserResultMap" parameterType="java.lang.String" databaseId="dm">
        SELECT <include refid="Column_List" /> FROM  "USER" WHERE USER_ID=#{userId}
    </select>

    <select id="getUsersByuserId" resultMap="UserResultMap" parameterType="java.lang.String" databaseId="kingbase">
        SELECT d.DEPT_NAME ,<include refid="U_Column_List_KB" /> FROM  "user" u INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID WHERE USER_ID=#{userId}
    </select>

    <select id="unreadConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        `user` u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')

        AND 	( n.READERS NOT LIKE concat('%,',u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat(u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat('%,',u.USER_ID)
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="unreadConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="dm">

        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        "USER" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')


        ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="unreadConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="oracle">

        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        "USER" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        (
        (n.PRIV_ID LIKE concat(concat('%,',u.USER_PRIV),',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )
        OR(n.TO_ID LIKE concat(concat('%,',u.DEPT_ID),',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )
        OR(n.USER_ID LIKE concat(concat('%,',u.USER_ID),',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )
        OR to_char(n.TO_ID) = 'ALL_DEPT'
        )

        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="unreadConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List_KB" />
        FROM
        notify n,
        "user" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')

        AND ( n.READERS NOT LIKE concat('%,',u.USER_ID,',%')
        AND n.READERS NOT LIKE concat(u.USER_ID,',%')
        AND n.READERS NOT LIKE concat('%,',u.USER_ID)
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="readConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap">

        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        `user` u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')
        AND 	( n.READERS LIKE concat('%,',u.USER_ID,',%')
        OR  n.READERS LIKE concat(u.USER_ID,',%')
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="readConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="dm">

        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        "USER" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')

        ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="readConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="oracle">

        SELECT
        <include refid="U_Column_List" />
        FROM
        notify n,
        "USER" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        (
        (n.PRIV_ID LIKE concat(concat('%,',u.USER_PRIV),',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )
        OR(n.TO_ID LIKE concat(concat('%,',u.DEPT_ID),',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )
        OR(n.USER_ID LIKE concat(concat('%,',u.USER_ID),',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )
        OR to_char(n.TO_ID) = 'ALL_DEPT'
        )

        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="readConsultTheSituationNotify" parameterType="Map" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List_KB" />
        FROM
        notify n,
        "user" u
        WHERE
        n.NOTIFY_ID = #{notifyId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')
        AND 	( n.READERS LIKE concat('%,',u.USER_ID,',%')
        OR  n.READERS LIKE concat(u.USER_ID,',%')
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="unreadConsultTheSituationNew" parameterType="Map" resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />
        FROM
        news n,
        `user` u
        WHERE
        n.NEWS_ID=#{newsId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')

        AND 	( n.READERS NOT LIKE concat('%,',u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat(u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat('%,',u.USER_ID)
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="unreadConsultTheSituationNew" parameterType="Map" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List_KB" />
        FROM
        news n,
        "user" u
        WHERE
        n.NEWS_ID=#{newsId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')

        AND 	( n.READERS NOT LIKE concat('%,',u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat(u.USER_ID,',%')
        AND  n.READERS NOT LIKE concat('%,',u.USER_ID)
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="readConsultTheSituationNew" parameterType="Map" resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />
        FROM
        news n,
        `user` u
        WHERE
        n.NEWS_ID=#{newsId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')
        AND 	( n.READERS LIKE concat('%,',u.USER_ID,',%')
        OR  n.READERS LIKE concat(u.USER_ID,',%')
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="readConsultTheSituationNew" parameterType="Map" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List_KB" />
        FROM
        news n,
        "user" u
        WHERE
        n.NEWS_ID=#{newsId}
        AND
        ((n.PRIV_ID LIKE concat('%,',u.USER_PRIV,',%')
        OR n.PRIV_ID LIKE concat(u.USER_PRIV,',%')
        )OR(n.TO_ID LIKE concat('%,',u.DEPT_ID,',%')
        OR n.TO_ID LIKE concat(u.DEPT_ID,',%')
        )OR(n.USER_ID LIKE concat('%,',u.USER_ID,',%')
        OR n.USER_ID LIKE concat(u.USER_ID,',%')
        )OR n.TO_ID = 'ALL_DEPT')
        AND 	( n.READERS LIKE concat('%,',u.USER_ID,',%')
        OR  n.READERS LIKE concat(u.USER_ID,',%')
        )
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="selectFileUserSigner" parameterType="map" resultMap="UserResultMap">
        select u.UID, u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID from user u where 1!=1
        <if test="dept_id!=null and dept_id!=''">
            or u.DEPT_ID in (${dept_id})
        </if>
        <if test="user_Priv!=null and user_Priv!=''">
            or u.USER_PRIV in (${user_Priv})
        </if>
        <if test="user_id!=null and user_id!=''">
            or u.USER_ID in (${user_id})
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="selectFileUserSigner" parameterType="map" resultMap="UserResultMap" databaseId="oracle">
        select u."UID", u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID from "USER" u where 1!=1
        <if test="dept_id!=null and dept_id!=''">
            or u.DEPT_ID in (${dept_id})
        </if>
        <if test="user_Priv!=null and user_Priv!=''">
            or u.USER_PRIV in (${user_Priv})
        </if>
        <if test="user_id!=null and user_id!=''">
            or u.USER_ID in (${user_id})
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="selectFileUserSigner" parameterType="map" resultMap="UserResultMap" databaseId="kingbase">
        select u."UID", u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID from "USER" u where 1!=1
        <if test="dept_id!=null and dept_id!=''">
            or u.DEPT_ID in (${dept_id})
        </if>
        <if test="user_Priv!=null and user_Priv!=''">
            or u.USER_PRIV in (${user_Priv})
        </if>
        <if test="user_id!=null and user_id!=''">
            or u.USER_ID in (${user_id})
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="selectFileUserSigner" parameterType="map" resultMap="UserResultMap" databaseId="dm">
        select u."UID", u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID from "USER" u where 1!=1
        <if test="dept_id!=null and dept_id!=''">
            or u.DEPT_ID in (${dept_id})
        </if>
        <if test="user_Priv!=null and user_Priv!=''">
            or u.USER_PRIV in (${user_Priv})
        </if>
        <if test="user_id!=null and user_id!=''">
            or u.USER_ID in (${user_id})
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>


    <select id="selectFileUserSignerAll" resultMap="UserResult">
        select  u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID  from user u ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="selectFileUserSignerAll" resultMap="UserResult" databaseId="kingbase">
        select  u.USER_ID,u.USER_PRIV,u.USER_NAME,u.DEPT_ID  from "user" u ORDER BY u.user_priv_no,u.user_no
    </select>
    <select id="selectUserNameByDeptId" parameterType="java.lang.Integer" resultMap="UserResult">
        select  u.USER_NAME from user u WHERE u.DEPT_ID=#{deptId}
    </select>

    <select id="getUsersBybyname" parameterType="java.lang.String" resultMap="UserResultMap" databaseId="oracle">
        SELECT <include refid="U_Column_List" /> FROM  "USER" u WHERE u.BYNAME=#{byname}
    </select>
    <select id="getUsersBybyname" parameterType="java.lang.String" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="U_Column_List" /> FROM  "USER" u WHERE u.BYNAME=#{byname}
    </select>
    <select id="getUsersBybyname" parameterType="java.lang.String" resultMap="UserResultMap">
        SELECT <include refid="U_Column_List" /> FROM  USER u WHERE u.BYNAME=#{byname}
    </select>
    <select id="getUsersBybyname" parameterType="java.lang.String" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="U_Column_List" /> FROM  "USER" u WHERE u.BYNAME=#{byname}
    </select>
    <select id="getUsersByname" parameterType="java.lang.String" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM  USER WHERE USER_NAME=#{name} limit 0,1
    </select>

    <select id="singleSearch" resultMap="UserResultMap">
        SELECT DISTINCT u.uid,u.avatar,u.user_name,u.byname,u.sex,u.BIRTHDAY,u.email,u.dept_id,d.dept_name,u.user_priv,up.priv_name,u.mobil_no,u.MY_STATUS,u.TEL_NO_DEPT
        from user u,department d,user_priv up  where u.dept_id = d.dept_id and u.user_priv=up.user_priv
        and u.user_name like '%' #{searchData} '%'  or u.byname like '%' #{searchData} '%' or u.mobil_no like '%' #{searchData} '%'
        or d.dept_name like '%' #{searchData} '%' or up.priv_name like '%' #{searchData} '%' ORDER BY u.user_priv_no,u.user_no ;
    </select>
    <!-- <update id="updateUsersByuserName" parameterType="com.xoa.model.users.Users">
         UPDATE user
         <set>
             <if test="userPrivName!=null">
                 USER_PRIV_NAME =#{userPrivName}
             </if>
         </set>
         <where>
            USER_NAME=#{userName}
         </where>
     </update>-->

    <select id="getUserByUserName" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM USER WHERE USER_NAME = #{userName} limit 0,1
    </select>

    <select id="getUserByUserName" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> FROM "USER" WHERE USER_NAME = #{userName} limit 0,1
    </select>

    <select id="getUserNames" parameterType="map" resultType="String">
        select USER_NAME  from USER where USER_ID in (${checkUserId});
    </select>
    <select id="getUserNames" parameterType="map" resultType="String" databaseId="oracle">
        select USER_NAME  from "USER" where USER_ID in (${checkUserId})
    </select>
    <select id="getUserNames" parameterType="map" resultType="String" databaseId="dm">
        select USER_NAME  from "USER" where USER_ID in (${checkUserId})
    </select>
    <select id="getUserNames" parameterType="map" resultType="String" databaseId="kingbase">
        select USER_NAME  from "USER" where USER_ID in (${checkUserId})
    </select>

    <select id="getUsersByMaps" resultMap="UserResultMap" parameterType="map">

        SELECT u.uid,u.avatar,u.user_name,u.byname,u.sex,u.BIRTHDAY,u.email,u.dept_id,d.dept_name deptName,u.user_priv,
        u.mobil_no,u.MY_STATUS,u.TEL_NO_DEPT
        FROM
        `user` u
        INNER JOIN user_ext us ON u.USER_ID = us.USER_ID
        <if test="dutyType!=null and dutyType!='' ">
            AND us.DUTY_TYPE = #{dutyType}
        </if>
        INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID
        <where>
            <trim suffixOverrides="AND">
                <if test="deptId!=null and deptId!='' ">
                    AND u.DEPT_ID=#{deptId}
                </if>
                <if test="uid!=null and uid!='' ">
                    AND u.UID=#{uid}
                </if>
            </trim>
        </where>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getUsersByMaps" resultMap="UserResultMap" parameterType="map" databaseId="oracle">

        SELECT u."UID",u.avatar,u.user_name,u.byname,u.sex,u.BIRTHDAY,u.email,u.dept_id,d.dept_name
        deptName,u.user_priv,
        u.mobil_no,u.MY_STATUS,u.TEL_NO_DEPT
        FROM
        "USER" u
        INNER JOIN user_ext us ON u.USER_ID = us.USER_ID
        <if test="dutyType!=null and dutyType!='' ">
            AND us.DUTY_TYPE = #{dutyType}
        </if>
        INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID
        <where>
            <trim suffixOverrides="AND">
                <if test="deptId!=null and deptId!='' ">
                    AND u.DEPT_ID=#{deptId}
                </if>
                <if test="uid!=null and uid!='' ">
                    AND u.UID=#{uid}
                </if>
            </trim>
        </where>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getUsersByMaps" resultMap="UserResultMap" parameterType="map" databaseId="dm">

        SELECT u."UID",u.avatar,u.user_name,u.byname,u.sex,u.BIRTHDAY,u.email,u.dept_id,d.dept_name
        deptName,u.user_priv,
        u.mobil_no,u.MY_STATUS,u.TEL_NO_DEPT
        FROM
        "USER" u
        INNER JOIN user_ext us ON u.USER_ID = us.USER_ID
        <if test="dutyType!=null and dutyType!='' ">
            AND us.DUTY_TYPE = #{dutyType}
        </if>
        INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID
        <where>
            <trim suffixOverrides="AND">
                <if test="deptId!=null and deptId!='' ">
                    AND u.DEPT_ID=#{deptId}
                </if>
                <if test="uid!=null and uid!='' ">
                    AND u.UID=#{uid}
                </if>
            </trim>
        </where>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getUserDepartmentUserexe" resultMap="UserResultMap" parameterType="map">
        SELECT u.uid,u.avatar,u.user_name,u.byname,u.sex,u.BIRTHDAY,u.email,u.dept_id,d.dept_name,u.user_priv,
        u.mobil_no,u.MY_STATUS,u.TEL_NO_DEPT
        FROM
        `user` u
        INNER JOIN user_ext us ON u.USER_ID = us.USER_ID
        <if test="dutyType!=null and dutyType!='' ">
            AND us.DUTY_TYPE = #{dutyType}
        </if>
        INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID
        <where>
            <trim suffixOverrides="AND">
                <if test="deptId!=null and deptId!='' ">
                    AND u.DEPT_ID=#{deptId}
                </if>
                <if test="uid!=null and uid!='' ">
                    AND u.UID=#{uid}
                </if>
            </trim>
        </where>
        ORDER BY u.user_priv_no,u.user_no

    </select>
    <!--  ,,-->
    <select id="getAllInfo" resultMap="UserResultMap"
            parameterType="com.xoa.model.users.Users">
        select DISTINCT  u.USER_NAME, u.USER_PRIV_NAME, u.USER_ID, u.UID, u.DEPT_ID from user u LEFT join
        user_priv up on u.user_priv = up.user_priv
        ORDER BY user_priv_no,user_no
    </select>
    <select id="getAllInfo" resultMap="UserResultMap"
            parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        select DISTINCT  u.USER_NAME, u.USER_PRIV_NAME, u.USER_ID, u.UID, u.DEPT_ID,user_priv_no,user_no from "user" u LEFT join
        "user_priv" up on u.user_priv = up.user_priv
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getAllUserInfo" resultType="com.xoa.model.users.Users">
        select u.USER_NAME userName ,u.user_priv_name userPrivName,u.user_id userId,u.UID uId,u.avatar avatar, u.dept_id
        deptId ,u.sex sex from `user` u
        where u.not_login !=1  AND u.dept_id != 0
        ORDER BY user_priv_no,user_no

        <if test="userId!=null and userId.length!=0 ">
            <foreach collection="userId" item="str" open=" AND  u.USER_ID  IN ( " close=" ) " separator=" , ">
                #{str}
            </foreach>
        </if>
        <if test="deptId!=null and deptId.length!=0 ">
            <foreach collection="deptId" item="str" open=" or  u.DEPT_ID  IN ( " close=" ) " separator=" , ">
                #{str}
            </foreach>
        </if>

    </select>

    <delete id="deleteUserByDeptId" parameterType="Integer">
        DELETE from user WHERE DEPT_ID=#{deptId}
    </delete>


    <select id="getMaxUserId" resultType="string">
        SELECT  MAX(BYNAME) from user WHERE USER_NAME!='admin'
    </select>

    <select id="getUserByName" resultMap="UserResultMap" parameterType="string">
        SELECT <include refid="Column_List" /> from user WHERE USER_NAME = #{userName}
    </select>

    <select id="getUserByName" resultMap="UserResultMap" parameterType="string" databaseId="dm">
        SELECT <include refid="Column_List" /> from "USER" WHERE USER_NAME = #{userName}
    </select>


    <update id="updateUserByName" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null ">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null ">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null ">
                MSN = #{msn},
            </if>
            <if test="avatar != null ">
                AVATAR = #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                ONLINE = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara}
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber}
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber}
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject}
            </if>
        </set>
        where BYNAME = #{byname}
    </update>


    <select id="getUserByIdNumber" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> from USER WHERE ID_NUMBER = #{idNumber}
    </select>

    <select id="getUserByIdNumber" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" /> from "USER" WHERE ID_NUMBER = #{idNumber}
    </select>


    <select id="importUserByName" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> from USER WHERE BYNAME = #{byName}
    </select>

    <select id="importUserByName" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> from "USER" WHERE BYNAME = #{byName}
    </select>

    <select id="importUserByName" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" /> from "USER" WHERE BYNAME = #{byName}
    </select>

    <select id="getUserByUids" resultMap="UserResultMap">
        SELECT DISTINCT uid,USER_ID,USER_NAME,DEPT_ID,POST_ID,JOB_ID from user
        <where>
            <trim prefixOverrides="OR">
                <if test="uids!=null">
                    OR UID in
                    <foreach item="uid" collection="uids" open="(" separator="," close=")">
                        <if test="uid!=null and uid != '' ">
                            #{uid}
                        </if>
                    </foreach>
                </if>
                <if test="userIds!=null">
                    OR USER_ID in
                    <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                        <if test="userId!=null and userId != '' ">
                            #{userId}
                        </if>
                    </foreach>
                </if>
            </trim>
        </where>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUserByUids" resultMap="UserResultMap" databaseId="kingbase">
        SELECT DISTINCT uid,USER_ID,USER_NAME,USER_PRIV_NO,DEPT_ID,USER_NO,POST_ID,JOB_ID from "user"
        <where>
            <trim prefixOverrides="OR">
                <if test="uids!=null">
                    OR UID in
                    <foreach item="uid" collection="uids" open="(" separator="," close=")">
                        <if test="uid!=null and uid != '' ">
                            #{uid}
                        </if>
                    </foreach>
                </if>
                <if test="userIds!=null">
                    OR USER_ID in
                    <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                        <if test="userId!=null and userId != '' ">
                            #{userId}
                        </if>
                    </foreach>
                </if>
            </trim>
        </where>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUserByUids" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_ID,USER_NAME,DEPT_ID,post from "USER"
        <where>
            <trim prefixOverrides="OR">
                <if test="uids!=null">
                    OR "UID" in
                    <foreach item="uid" collection="uids" open="(" separator="," close=")">
                        <if test="uid!=null and uid != '' ">
                            #{uid}
                        </if>
                    </foreach>
                </if>
                <if test="userIds!=null">
                    OR USER_ID in
                    <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                        <if test="userId!=null and userId != '' ">
                            #{userId}
                        </if>
                    </foreach>
                </if>
            </trim>
        </where>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUserByUidsDeptId" resultMap="UserResultMap">
        SELECT DISTINCT uid,USER_ID,USER_NAME,DEPT_ID,POST_ID,JOB_ID from user
        <where>
            <if test="uids != null or userIds!=null ">
                and (
                <trim prefixOverrides="OR">
                    <if test="uids!=null">
                        OR UID in
                        <foreach item="uid" collection="uids" open="(" separator="," close=")">
                            <if test="uid!=null and uid != '' ">
                                #{uid}
                            </if>
                        </foreach>
                    </if>
                    <if test="userIds!=null">
                        OR USER_ID in
                        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                            <if test="userId!=null and userId != '' ">
                                #{userId}
                            </if>
                        </foreach>
                    </if>
                </trim>
                )
            </if>
            <if test=" deptId != null">
                and DEPT_ID = #{deptId}
            </if>

        </where>
        ORDER BY user_priv_no,user_no
    </select>

    <select id="getUserByUidsDeptId" resultMap="UserResultMap" databaseId="kingbase">
        SELECT DISTINCT uid,USER_ID,USER_NAME,USER_PRIV_NO,DEPT_ID,USER_NO,POST_ID,JOB_ID from "user"
        <where>
            <if test="uids != null or userIds!=null ">
                and (
                <trim prefixOverrides="OR">
                    <if test="uids!=null">
                        OR UID in
                        <foreach item="uid" collection="uids" open="(" separator="," close=")">
                            <if test="uid!=null and uid != '' ">
                                #{uid}
                            </if>
                        </foreach>
                    </if>
                    <if test="userIds!=null">
                        OR USER_ID in
                        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
                            <if test="userId!=null and userId != '' ">
                                #{userId}
                            </if>
                        </foreach>
                    </if>
                </trim>
                )
            </if>
            <if test=" deptId != null">
                and DEPT_ID = #{deptId}
            </if>

        </where>
        ORDER BY user_priv_no,user_no
    </select>

    <update id="updateLoginTime" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
        </set>
        where uid = #{uid}
    </update>


    <update id="updateLoginTime" parameterType="com.xoa.model.users.Users" databaseId="dm">
        update "USER"
        <set>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
        </set>
        where uid = #{uid}
    </update>

    <update id="updateLoginTime" parameterType="com.xoa.model.users.Users" databaseId="oracle">
        update "USER"
        <set>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
        </set>
        where uid = #{uid}
    </update>

    <update id="updateLoginTime" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "user"
        <set>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
        </set>
        where uid = #{uid}
    </update>

    <select id="getUserByUserIds" resultMap="UserResultMap">
        SELECT DISTINCT uid,USER_ID,USER_NAME,DEPT_ID from user
        WHERE USER_ID in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY user_priv_no,user_no
    </select>


    <select id="getUserByUserIds" resultMap="UserResultMap" databaseId="oracle">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE USER_ID in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>
    <select id="getUserByUserIds" resultMap="UserResultMap" databaseId="dm">
        SELECT "uid",USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE USER_ID in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>

    <select id="getUserByUserIds" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE USER_ID in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>

    <select id="LoginUserList" resultMap="UserResultMap">
        SELECT
        users.USER_ID,users.UID,users.USER_NAME,ext.DUTY_TYPE
        FROM
        USER users
        INNER JOIN user_ext ext ON users.USER_ID=ext.USER_ID

        WHERE
        users.NOT_LOGIN=0 AND users.dept_id !=0
        ORDER BY users.user_priv_no,users.user_no
    </select>

    <select id="LoginUserList" resultMap="UserResultMap" databaseId="dm">
        SELECT
        users.USER_ID,users.UID,users.USER_NAME,ext.DUTY_TYPE
        FROM
        "USER" users
        INNER JOIN user_ext ext ON users.USER_ID=ext.USER_ID

        WHERE
        users.NOT_LOGIN=0 AND users.dept_id !=0
        ORDER BY users.user_priv_no,users.user_no
    </select>
    <select id="LoginUserList" resultMap="UserResultMap" databaseId="oracle">
        SELECT
        users.USER_ID,users."UID",users.USER_NAME,ext.DUTY_TYPE
        FROM
        "USER" users
        INNER JOIN user_ext ext ON users.USER_ID=ext.USER_ID

        WHERE
        users.NOT_LOGIN=0
        ORDER BY users.user_priv_no,users.user_no
    </select>
    <select id="selUserOrder" resultMap="SimpleUserMap" parameterType="Map">
        SELECT
        u.uid,u.user_id,u.user_Name,u.user_priv,u.user_Priv_Name,u.avatar,u.avatar_128,u.DEPT_ID,dept.DEPT_NAME,u.sex
        FROM
        USER u
        JOIN department dept ON u.DEPT_ID=dept.DEPT_ID
        /*JOIN user_ext ex ON ex.UID=u.UID*/
        WHERE
        u.UID in
        <foreach item="item" collection="array" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
        order BY u.DEPT_ID,u.USER_PRIV,u.USER_NO
    </select>


    <select id="getByName" parameterType="String" resultType="com.xoa.model.users.Users">
        select u.USER_NAME as userName,
        u.USER_NAME as name ,u.USER_PRIV_NAME as userPrivName,u.USER_ID AS userId,
        d.DEPT_NAME as deptName ,u.UID ,u.AVATAR ,u.USER_ID as userId
        from user u
        join department d  on  u.DEPT_ID= d.DEPT_ID
        where
        u.USER_NAME like CONCAT(CONCAT('%', #{name}), '%')
        or u.BYNAME like CONCAT(CONCAT('%', #{name}), '%')
        ORDER  BY  u.DEPT_ID,u.USER_PRIV,u.USER_NO
    </select>

    <select id="getUsersByUid" parameterType="java.lang.Integer" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM  user WHERE UID=#{uid}
    </select>

    <select id="getUsersByUid" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> FROM  "USER" WHERE "UID" =#{uid}
    </select>

    <select id="getUsersByUid" parameterType="java.lang.Integer" resultMap="UserResultMap" databaseId="kingbase">
        SELECT * FROM  "USER" WHERE "UID" =#{uid}
    </select>
    <select id="UsersByUidCorrection1" resultType="String">
        SELECT
        Group_concat(users.UID SEPARATOR ',')
        FROM
        `user` users
        INNER JOIN department dep ON (
        dep.MANAGER LIKE concat('%,', users.USER_ID, ',%')
        OR dep.MANAGER LIKE concat(users.USER_ID, ',%')
        )
        AND dep.DEPT_ID = #{depId}
    </select>
    <select id="UsersByUidCorrection2" resultType="String">
        SELECT
        Group_concat(users.UID SEPARATOR ',')
        FROM
        `user` users
        INNER JOIN department dep ON (
        dep.ASSISTANT_ID LIKE concat('%,', users.USER_ID, ',%')
        OR dep.ASSISTANT_ID LIKE concat(users.USER_ID, ',%')
        )
        AND dep.DEPT_ID = #{depId}
    </select>
    <select id="UsersByUidCorrection3" resultType="String">
        SELECT
        Group_concat(users.UID SEPARATOR ',')
        FROM
        `user` users
        INNER JOIN department dep ON (
        dep.LEADER1 LIKE concat('%,', users.USER_ID, ',%')
        OR dep.LEADER1 LIKE concat(users.USER_ID, ',%')
        )
        AND dep.DEPT_ID = #{depId}
    </select>
    <select id="UsersByUidCorrection4" resultType="String">
        SELECT
        Group_concat(users.UID SEPARATOR ',')
        FROM
        `user` users
        INNER JOIN department dep ON (
        dep.LEADER2 LIKE concat('%,', users.USER_ID, ',%')
        OR dep.LEADER2 LIKE concat(users.USER_ID, ',%')
        )
        AND dep.DEPT_ID = #{depId}
    </select>

    <select id="getListByName" parameterType="java.lang.String" resultMap="UserResultMap">
        select <include refid="Column_List" /> from USER  where USER_NAME=#{userName} and not_login = 0
    </select>


    <select id="getUsersByPId" parameterType="java.lang.Integer" resultMap="UserResultMap">
        select <include refid="Column_List" /> from USER  where DEPT_ID=#{pId}
    </select>


    <select id="getUserByListUId" parameterType="java.util.List" resultMap="UserResultMap">
        select MOBIL_NO,USER_NAME from USER
        <where>
            UID IN
            <foreach collection="list" item="item" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </where>
    </select>

    <select id="isUserSameDept" parameterType="map" resultType="java.lang.Integer">
        select count(UID) FROM user
        <where>
            USER_ID IN
            <foreach collection="userIdArray" item="item" open="(" close=")" separator=",">
                #{item}
            </foreach>
            and DEPT_ID!=#{deptId}
        </where>
    </select>

    <select id="selectUserByTime" resultMap="UserResultMap">
        SELECT UID,USER_ID FROM `user` WHERE LAST_VISIT_TIME &lt;'2018-05-02 00:00:00'
    </select>
    <update id="batchUpdatePwd" parameterType="map">
        UPDATE user set `PASSWORD` =#{password} WHERE UID in (${uids})
    </update>

    <update id="batchUpdatePwd" parameterType="map" databaseId="kingbase">
        UPDATE "user" set PASSWORD =#{password} WHERE UID in (${uids})
    </update>

    <update id="updateMobile" parameterType="com.xoa.model.users.Users">
        UPDATE USER  SET  MOBIL_NO =#{mobilNo} WHERE  UID =#{uid}
    </update>

    <select id="getUserCountBySql" parameterType="string" resultType="java.lang.Integer">
        select count(u.UID) from #{databaseName}.user u;
    </select>

    <select id="getUsersByUserPriv" parameterType="string" resultMap="UserResultMap">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u.UID,u.avatar,u.sex,u.not_login,u.not_mobile_login,u.mobil_no,u.USER_SECRECY from user u ,department d WHERE u.USER_PRIV=#{userPriv} AND   u.DEPT_ID = d.DEPT_ID

    </select>

    <select id="getUsersByUserPriv" parameterType="string" resultMap="UserResultMap" databaseId="dm">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u.UID,u.avatar,u.sex,u.not_login,u.not_mobile_login,u.mobil_no,u.USER_SECRECY from "user" u ,department d WHERE u.USER_PRIV=#{userPriv} AND   u.DEPT_ID = d.DEPT_ID

    </select>

    <select id="getUsersByUserPriv" parameterType="string" resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.dept_id,d.dept_name, u.UID,u.avatar,u.sex,u.not_login,u.not_mobile_login,u.mobil_no,u.USER_SECRECY from "user" u ,department d WHERE u.USER_PRIV=#{userPriv} AND   u.DEPT_ID = d.DEPT_ID

    </select>

    <select id="getUsersByUSER_PRIV_OTHER" parameterType="string" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM `user` WHERE  USER_PRIV_OTHER like CONCAT('%,',#{userPriv},',%')   or  USER_PRIV_OTHER like CONCAT(#{userPriv},',%')
    </select>

    <select id="getUsersByUSER_PRIV_OTHER" parameterType="string" resultMap="UserResultMap" databaseId="dm">
        SELECT <include refid="Column_List" /> FROM "user" WHERE  USER_PRIV_OTHER like CONCAT(CONCAT('%,',#{userPriv}),',%')   or  USER_PRIV_OTHER like CONCAT(#{userPriv},',%')
    </select>

    <select id="getUsersByUSER_PRIV_OTHER" parameterType="string" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" /> FROM "user" WHERE  USER_PRIV_OTHER like CONCAT(CONCAT('%,',#{userPriv}),',%')   or  USER_PRIV_OTHER like CONCAT(#{userPriv},',%')
    </select>

    <select id="selectAllUsers" resultMap="UserResultMap">
        select  <include refid="U_Column_List" />  from user u ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="selectAllUsers" resultMap="UserResultMap" databaseId="kingbase">
        select  <include refid="U_Column_List_KB" />  from "user" u ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getAllUser" resultType="com.xoa.model.users.Users" parameterType="map">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther, u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM `USER` u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0' )
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( '%,', u.USER_ID, ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsUser != null">
            <foreach collection="prcsUser" item="item" index="index" open="" close="">
                OR (u.USER_ID  = #{item})
            </foreach>
        </if>
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        <if test="prcsJob!= null ">
            <foreach collection="prcsJob" item="jobId" index="jobId" open="" close="">
                OR( u.JOB_ID= #{jobId})
            </foreach>
        </if>
        )
        <!-- lr+ -->
        WHERE
        fp.FLOW_ID = #{flowId}
        <if test="deptNo!=null and deptNo.length>0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" open="(" close=")" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        AND fp.PRCS_ID = #{prcsId}
        <if test="userFilter !=null and userFilter.size>0">
            and u.UID in
            <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>


        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
    </select>


    <select id="getAllUser" resultType="com.xoa.model.users.Users" parameterType="map" databaseId="kingbase">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther, u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM "USER" u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0' )
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( '%,', u.USER_ID, ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsUser != null">
            <foreach collection="prcsUser" item="item" index="index" open="" close="">
                OR (u.USER_ID  = #{item})
            </foreach>
        </if>
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        <if test="prcsJob!= null ">
            <foreach collection="prcsJob" item="jobId" index="jobId" open="" close="">
                OR( u.JOB_ID= #{jobId})
            </foreach>
        </if>
        )
        <!-- lr+ -->
        WHERE
        fp.FLOW_ID = #{flowId}
        <if test="deptNo!=null and deptNo.length>0">
            and
            <foreach collection="deptNo" item="deptNo" index="index" open="(" close=")" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        AND fp.PRCS_ID = #{prcsId}
        <if test="userFilter !=null and userFilter.size>0">
            and u.UID in
            <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>


        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
    </select>

    <select id="getAllPrivByProcess" resultType="com.xoa.model.users.Users" parameterType="map">
        SELECT
        USER_PRIV.USER_PRIV as userPriv,
        PRIV_NAME as userPrivName
        FROM
        USER_PRIV
        INNER JOIN ( SELECT DISTINCT u.UID as uid,u.USER_PRIV as userPriv ,
        u.USER_PRIV_OTHER as userPrivOther
        FROM `USER` u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0' )
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( '%,', u.USER_ID, ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>

        )
        WHERE
        fp.FLOW_ID = #{flowId}
        <if test="deptNo!=null and deptNo.length>0 ">
            and
            <foreach collection="deptNo" item="deptNo" index="index" open="(" close=")" separator="OR">
                d.DEPT_NO like CONCAT(#{deptNo},'%')
            </foreach>
        </if>
        AND fp.PRCS_ID = #{prcsId}) USER ON
        ( USER_PRIV.USER_PRIV = USER.userPriv OR find_in_set( USER_PRIV.USER_PRIV, USER.userPrivOther ) )
        GROUP BY
        USER_PRIV.USER_PRIV
        ORDER BY
        PRIV_NO,userPriv
    </select>


    <select id="getUserByProcessPriv" resultType="com.xoa.model.users.Users" parameterType="map">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther,privOther.userPrivOtherName as userPrivOtherName, u.DEPT_ID_OTHER as
        deptIdOther,
        d.DEPT_NAME as deptName
        FROM `USER` u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( '%,', u.USER_ID, ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        )
        left join (SELECT USER.uid as privOtherUid,
        GROUP_CONCAT( user_priv.PRIV_NAME )
        AS userPrivOtherName
        FROM
        USER INNER JOIN USER_PRIV ON FIND_IN_SET( user_priv.USER_PRIV, USER.USER_PRIV_OTHER )
        GROUP BY
        USER.uid ) as privOther on privOtherUid = uid
        WHERE
        fp.FLOW_ID = #{flowId}
        AND fp.PRCS_ID = #{prcsId} and (u.USER_PRIV= #{userPriv}
        OR (u.USER_PRIV_OTHER LIKE concat(#{userPriv}, ',%')
        OR u.USER_PRIV_OTHER LIKE concat('%,',#{userPriv},',%')))
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
    </select>

    <select id="getNamesById" parameterType="java.util.Set" resultMap="mapResult">
        select USER_ID,USER_NAME
        FROM user
        WHERE USER_ID in
        <foreach collection="userIds" index="index" item="userId" open="(" separator="," close=")">
            #{userId}
        </foreach>
    </select>
    <select id="getNamesById" parameterType="java.util.Set" resultMap="mapResult" databaseId="kingbase">
        select USER_ID,USER_NAME
        FROM "user"
        WHERE USER_ID in
        <foreach collection="userIds" index="index" item="userId" open="(" separator="," close=")">
            #{userId}
        </foreach>
    </select>

    <select id="getAllNameByUserId" parameterType="string" resultType="java.lang.String">
        select USER_NAME
        FROM user
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY FIELD
        <foreach collection="array" index="index" item="userIds" open="(user_id," separator="," close=")">
            #{userIds}
        </foreach>

    </select>

    <select id="getAllNameByUserId" parameterType="string" resultType="java.lang.String" databaseId="dm">
        select USER_NAME
        FROM "user"
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY instr
        <foreach collection="array" index="index" item="userIds" open="('" separator="," close="',user_id)">
            ${userIds}
        </foreach>

    </select>

    <select id="getAllNameByUserId" parameterType="string" resultType="java.lang.String" databaseId="kingbase">
        select USER_NAME
        FROM "user"
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY instr
        <foreach collection="array" index="index" item="userIds" open="('" separator="," close="',user_id)">
            ${userIds}
        </foreach>

    </select>

    <select id="getAllDeptIdsByUserId" parameterType="string" resultType="java.lang.String">
        select DEPT_ID
        FROM user
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
    </select>


    <select id="getAllUPNameByUserId" parameterType="string" resultType="java.lang.String">
        select USER_PRIV_NAME
        FROM user
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
    </select>

    <select id="selectUserNameByKey" resultMap="UserResultMap" parameterType="string">
      select UID,USER_NAME,DEPT_ID from `user` WHERE SECURE_KEY_SN = #{keySn}
    </select>


    <select id="getUsersByUidsOrder" resultMap="UserResultMap">
        SELECT uid,USER_NAME,DEPT_ID,USER_ID from user
        WHERE UID in(${uids})
        ORDER BY  FIELD(uid,${uids})
    </select>

    <select id="getUsersByUidsOrder" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_NAME,DEPT_ID,USER_ID from "USER"
        WHERE "UID" in (${uids})
        ORDER BY FIELD(uid,${uids})
    </select>

    <select id="getUsersByUidsOrder" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_NAME,DEPT_ID,USER_ID from "USER"
        WHERE "UID" in(${uids})
        ORDER BY FIELD(uid,${uids})
    </select>

    <select id="getUsersByUidsOrder" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_NAME,DEPT_ID,USER_ID,USER_PRIV_NO from "user"
        WHERE UID in(${uids})
        ORDER BY  user_priv_no,user_no,user_name
    </select>

    <select id="getUsersByUserIdsOrder" resultMap="UserResultMap">
        SELECT u.uid,u.USER_ID,u.USER_NAME,u.DEPT_ID,u.USER_PRIV,u.USER_PRIV_NAME,u.USER_SECRECY,d.DEPT_NAME from user u
        INNER JOIN department d ON d.DEPT_ID=u.DEPT_ID
        WHERE u.DEPT_ID!=0 and u.user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="userId" collection="userIds" open="(user_id," separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>
    <select id="getUsersByUserIdsOrder" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="userId" collection="userIds" open="(user_id," separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>
    <select id="getUsersByUserIdsOrder" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_ID,USER_NAME,DEPT_ID from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="userId" collection="userIds" open="(user_id," separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
    </select>

    <select id="getUsersByUserIdsOrder" resultMap="UserResultMap" databaseId="kingbase">
        SELECT "UID",USER_ID,USER_NAME,USER_SECRECY,DEPT_ID from "USER"
        WHERE user_Id in
        <foreach item="userId" collection="userIds" open="(" separator="," close=")">
            <if test="userId!=null and userId != '' ">
                #{userId}
            </if>
        </foreach>
        ORDER BY INSTR
        <foreach item="userId" collection="userIds" open="('" separator="" close="',user_id)">
            <if test="userId!=null and userId != '' ">
                ${userId}
            </if>
        </foreach>
    </select>


    <select id="getUsersByBynamesOrder" resultMap="UserResultMap">
        SELECT uid,USER_NAME,byname from user
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="byname" collection="bynames" open="(byname," separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
    </select>

    <select id="getUsersByBynamesOrder" resultMap="UserResultMap" databaseId="oracle">
        SELECT "UID",USER_NAME,byname from "USER"
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="byname" collection="bynames" open="(byname," separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
    </select>

    <select id="getUsersByBynamesOrder" resultMap="UserResultMap" databaseId="dm">
        SELECT "UID",USER_NAME,byname from "USER"
        WHERE byname in
        <foreach item="byname" collection="bynames" open="(" separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="byname" collection="bynames" open="(byname," separator="," close=")">
            <if test="byname!=null and byname != '' ">
                #{byname}
            </if>
        </foreach>
    </select>

    <select id="getUsersByUserNamesOrder" resultMap="UserResultMap">
        SELECT uid,USER_NAME,byname,USER_SECRECY,user_id from user
        WHERE user_name in
        <foreach item="username" collection="usernames" open="(" separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="username" collection="usernames" open="(user_name," separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
    </select>

    <select id="getUsersByUserNamesOrder" resultMap="UserResultMap" databaseId="oracle">
        SELECT uid,USER_NAME,byname,user_id from user
        WHERE user_name in
        <foreach item="username" collection="usernames" open="(" separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="username" collection="usernames" open="(user_name," separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
    </select>

    <select id="getUsersByUserNamesOrder" resultMap="UserResultMap" databaseId="dm">
        SELECT uid,USER_NAME,byname,user_id from user
        WHERE user_name in
        <foreach item="username" collection="usernames" open="(" separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="username" collection="usernames" open="(user_name," separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
    </select>

    <select id="getUsersByUserNamesOrder" resultMap="UserResultMap" databaseId="kingbase">
        SELECT uid,USER_NAME,byname,USER_SECRECY,user_id from "user"
        WHERE user_name in
        <foreach item="username" collection="usernames" open="(" separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
        ORDER BY FIELD
        <foreach item="username" collection="usernames" open="(user_name," separator="," close=")">
            <if test="username!=null and username != '' ">
                #{username}
            </if>
        </foreach>
    </select>

    <select id="selectUserByDeptIds" resultMap="UserResultMap">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.UID,u.avatar,u.sex from user u
        WHERE u.not_login !=1 AND u.dept_id != 0 AND
        (DEPT_ID in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId!= '' ">#{deptId}
            </if>
        </foreach>
        <foreach item="deptId" collection="deptIds" open="" separator="" close="">
            <if test="deptId!=null and deptId!= '' ">
                OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
            </if>
        </foreach>
        )
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>


    <select id="selectUserByDeptIds" resultMap="UserResultMap" databaseId="kingbase">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.UID,u.avatar,u.sex from "user" u
        WHERE u.not_login !=1 AND u.dept_id != 0 AND
        (DEPT_ID in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId!= '' ">#{deptId}
            </if>
        </foreach>
        <foreach item="deptId" collection="deptIds" open="" separator="" close="">
            <if test="deptId!=null and deptId!= '' ">
                OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId}::VARCAHR,',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId}::VARCAHR,',%')
            </if>
        </foreach>
        )
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="selUserByIds" resultMap="UserResultMap">

        select <include refid="Column_List" /> from user where USER_ID in
        <foreach collection="userIds" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>

    </select>

    <select id="selUserByIds" resultMap="UserResultMap" databaseId="kingbase">

        select <include refid="Column_List_KB" /> from "user" where USER_ID in
        <foreach collection="userIds" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>

    </select>

    <select id="selUserPhoneByName" resultType="java.lang.String" parameterType="java.lang.String">
        select MOBIL_NO from user where USER_NAME=#{userName}
    </select>

    <select id="getUserId" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where USER_ID = #{id}
    </select>

    <select id="getUserId" resultMap="UserResultMap" databaseId="oracle">
        select <include refid="Column_List" /> from "user" where USER_ID = #{id}
    </select>

    <select id="getUserId" resultMap="UserResultMap"  databaseId="dm" >
        select <include refid="Column_List" /> from "user" where USER_ID = #{id}
    </select>

    <select id="getUserId" resultMap="UserResultMap"  databaseId="kingbase">
        select <include refid="Column_List_KB" /> from "user" where USER_ID = #{id}
    </select>


    <select id="getAllPrivUser" resultType="com.xoa.model.users.Users" parameterType="map">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,
        d.DEPT_NAME as deptName
        FROM
        USER u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        where
        #{privUser} LIKE concat( '%,', u.USER_ID, ',%' )
        OR  #{privUser} LIKE concat( u.USER_ID, ',%' )
        OR #{privDept} LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR #{privDept} LIKE concat ( u.DEPT_ID, ',%' )
        OR #{privDept} LIKE concat ( '%,', u.DEPT_ID_OTHER, ',%' )
        OR #{privDept} LIKE concat ( u.DEPT_ID_OTHER, ',%' )
        OR #{privRole} LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR #{privRole} LIKE concat ( u.USER_PRIV, ',%' )
        OR #{privRole} LIKE concat ( '%,', u.USER_PRIV_OTHER, ',%' )
        OR #{privRole} LIKE concat ( u.USER_PRIV_OTHER, ',%' )
        order by u.USER_PRIV_NO, u.USER_NO
    </select>

    <select id="getAllPrivUser" resultType="com.xoa.model.users.Users" parameterType="map" databaseId="kingbase">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as userPrivNo,u.USER_NO userNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,
        d.DEPT_NAME as deptName
        FROM
        "USER" u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        where
        #{privUser} LIKE concat( '%,', u.USER_ID::VARCHAR, ',%' )
        OR  #{privUser} LIKE concat( u.USER_ID::VARCHAR, ',%' )
        OR #{privDept} LIKE concat ( '%,', u.DEPT_ID::VARCHAR, ',%' )
        OR #{privDept} LIKE concat ( u.DEPT_ID::VARCHAR, ',%' )
        OR #{privDept} LIKE concat ( '%,', u.DEPT_ID_OTHER::VARCHAR, ',%' )
        OR #{privDept} LIKE concat ( u.DEPT_ID_OTHER::VARCHAR, ',%' )
        OR #{privRole} LIKE concat ( '%,', u.USER_PRIV::VARCHAR, ',%' )
        OR #{privRole} LIKE concat ( u.USER_PRIV::VARCHAR, ',%' )
        OR #{privRole} LIKE concat ( '%,', u.USER_PRIV_OTHER::VARCHAR, ',%' )
        OR #{privRole} LIKE concat ( u.USER_PRIV_OTHER::VARCHAR, ',%' )
        order by u.USER_PRIV_NO, u.USER_NO
    </select>

    <update id="updateUserByUserId" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="userId != null and userId !=''">
                USER_ID = #{userId},
            </if>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null and email!=''">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null and oicqNo != '' ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo != ''">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null and msn!=''">
                MSN = #{msn},
            </if>
            <if test="avatar != null  ">
                AVATAR = #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                ONLINE = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null ">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="jobId!=null and jobId!='' ">
                JOB_ID = #{jobId},
            </if>
            <if test="postId!=null and postId!='' ">
                POST_ID = #{postId}
            </if>
        </set>
        where UID = #{uid}
    </update>


    <update id="updateByUserId" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="userName != null and userName !=''">
                USER_NAME = #{userName},
            </if>
            <if test="userNameIndex != null and userNameIndex !=''">
                USER_NAME_INDEX = #{userNameIndex},
            </if>
            <if test="useingKey != null and useingKey !=''">
                USEING_KEY = #{useingKey},
            </if>
            <if test="usingFinger != null and usingFinger !=''">
                USING_FINGER = #{usingFinger},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="keySn != null and keySn !=''">
                KEY_SN = #{keySn},
            </if>
            <if test="secureKeySn != null and secureKeySn !=''">
                SECURE_KEY_SN = #{secureKeySn},
            </if>
            <if test="userPriv != null and userPriv !='' ">
                USER_PRIV = #{userPriv},
            </if>
            <if test="userPrivNo != null and userPrivNo !=''">
                USER_PRIV_NO = #{userPrivNo},
            </if>
            <if test="userPrivName != null and userPrivName !=''">
                USER_PRIV_NAME = #{userPrivName},
            </if>
            <if test="postPriv != null and postPriv !=''or postPriv==0 ">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null and postDept !=''">
                POST_DEPT = #{postDept},
            </if>
            <if test="deptId != null and deptId !='' or deptId ==0 ">
                DEPT_ID = #{deptId},
            </if>
            <if test="deptIdOther != null and deptIdOther !=''">
                DEPT_ID_OTHER = #{deptIdOther},
            </if>
            <if test="sex != null and sex !=''">
                SEX = #{sex},
            </if>
            <if test="isLunar != null and isLunar !='' or isLunar == 0 ">
                IS_LUNAR = #{isLunar},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="faxNoDept != null and faxNoDept !=''">
                FAX_NO_DEPT = #{faxNoDept},
            </if>
            <if test="addHome != null and addHome !=''">
                ADD_HOME = #{addHome},
            </if>
            <if test="postNoHome != null and postNoHome !=''">
                POST_NO_HOME = #{postNoHome},
            </if>
            <if test="telNoHome != null and telNoHome !=''">
                TEL_NO_HOME = #{telNoHome},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="bpNo != null and bpNo !=''">
                BP_NO = #{bpNo},
            </if>
            <if test="email != null and email!=''">
                EMAIL = #{email},
            </if>
            <if test="oicqNo != null and oicqNo != '' ">
                OICQ_NO = #{oicqNo},
            </if>
            <if test="icqNo != null and icqNo != ''">
                ICQ_NO = #{icqNo},
            </if>
            <if test="msn != null and msn!=''">
                MSN = #{msn},
            </if>
            <if test="avatar != null  ">
                AVATAR = #{avatar},
            </if>
            <if test="callSound != null and callSound !=''">
                CALL_SOUND = #{callSound},
            </if>
            <if test="lastVisitTime != null ">
                LAST_VISIT_TIME = #{lastVisitTime},
            </if>
            <if test="smsOn != null and smsOn !='' or smsOn ==0 ">
                SMS_ON = #{smsOn},
            </if>
            <if test="menuType != null and menuType !=''">
                MENU_TYPE = #{menuType},
            </if>
            <if test="lastPassTime != null ">
                LAST_PASS_TIME = #{lastPassTime},
            </if>
            <if test="theme != null and theme !=''">
                THEME = #{theme},
            </if>
            <if test="portal != null and portal !=''">
                PORTAL = #{portal},
            </if>
            <if test="panel != null and panel !=''">
                PANEL = #{panel},
            </if>
            <if test="online != null and online !=''">
                ONLINE = #{online},
            </if>
            <if test="onStatus != null and onStatus !=''">
                ON_STATUS = #{onStatus},
            </if>
            <if test="attendStatus != null and attendStatus !=''">
                ATTEND_STATUS = #{attendStatus},
            </if>
            <if test="mobilNoHidden != null and mobilNoHidden !='' or mobilNoHidden==0 ">
                MOBIL_NO_HIDDEN = #{mobilNoHidden},
            </if>
            <if test="mytableLeft != null and mytableLeft !=''">
                MYTABLE_LEFT = #{mytableLeft},
            </if>
            <if test="mytableRight != null and mytableRight !=''">
                MYTABLE_RIGHT = #{mytableRight},
            </if>
            <if test="userPrivOther != null and userPrivOther !=''">
                USER_PRIV_OTHER = #{userPrivOther},
            </if>
            <if test="userNo != null and userNo !=''">
                USER_NO = #{userNo},
            </if>
            <if test="notLogin != null and notLogin !='' or notLogin == 0 ">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notViewUser != null and notViewUser !='' or notViewUser==0 ">
                NOT_VIEW_USER = #{notViewUser},
            </if>
            <if test="notViewTable != null and notViewTable !='' or notViewTable==0 ">
                NOT_VIEW_TABLE = #{notViewTable},
            </if>
            <if test="notSearch != null and notSearch !='' or notSearch==0 ">
                NOT_SEARCH = #{notSearch},
            </if>
            <if test="bkground != null and bkground !=''">
                BKGROUND = #{bkground},
            </if>
            <if test="bindIp != null and bindIp !=''">
                BIND_IP = #{bindIp},
            </if>
            <if test="lastVisitIp != null and lastVisitIp !=''">
                LAST_VISIT_IP = #{lastVisitIp},
            </if>
            <if test="menuImage != null and menuImage !='' or menuImage==0 ">
                MENU_IMAGE = #{menuImage},
            </if>
            <if test="weatherCity != null and weatherCity !=''">
                WEATHER_CITY = #{weatherCity},
            </if>
            <if test="showRss != null and showRss !=''">
                SHOW_RSS = #{showRss},
            </if>
            <if test="menuExpand != null and menuExpand !=''">
                MENU_EXPAND = #{menuExpand},
            </if>
            <if test="myStatus != null and myStatus !=''">
                MY_STATUS = #{myStatus},
            </if>
            <if test="limitLogin != null and limitLogin !=''">
                LIMIT_LOGIN = #{limitLogin},
            </if>
            <if test="photo != null ">
                PHOTO = #{photo},
            </if>
            <if test="imRange != null and imRange !=''">
                IM_RANGE = #{imRange},
            </if>
            <if test="leaveTime != null ">
                LEAVE_TIME = #{leaveTime},
            </if>
            <if test="secretLevel != null and secretLevel !=''">
                SECRET_LEVEL = #{secretLevel},
            </if>
            <if test="notMobileLogin != null and notMobileLogin !='' or notMobileLogin==0 ">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
            <if test="manageModuleType != null and manageModuleType !=''">
                MANAGE_MODULE_TYPE = #{manageModuleType},
            </if>
            <if test="userPrivType != null and userPrivType !=''">
                USER_PRIV_TYPE = #{userPrivType},
            </if>
            <if test="userManageOrgs != null and userManageOrgs !=''">
                USER_MANAGE_ORGS = #{userManageOrgs},
            </if>
            <if test="shortcut != null and shortcut !=''">
                SHORTCUT = #{shortcut},
            </if>
            <if test="myRss != null and myRss !=''">
                MY_RSS = #{myRss},
            </if>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="userPara != null and userPara !=''">
                USER_PARA = #{userPara},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber},
            </if>
            <if test="traNumber != null and traNumber !=''">
                TRA_NUMBER = #{traNumber},
            </if>
            <if test="subject != null and subject !=''">
                SUBJECT = #{subject},
            </if>
            <if test="jobId!=null and jobId!='' ">
                JOB_ID = #{jobId},
            </if>
            <if test="postId!=null and postId!='' ">
                POST_ID = #{postId}
            </if>
        </set>
        where USER_ID = #{userId}
    </update>

    <select id="getOnlineCount" resultType="int">
        SELECT
        count(u.uid)
        FROM
        USER u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt;120
    </select>
    <select id="getOnlineCount" resultType="int" databaseId="dm">
         SELECT
        count(u."uid")
        FROM
        "USER" u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt;120
    </select>

    <select id="getOnlineCount" resultType="int" databaseId="kingbase">
        SELECT
        count( u.uid )
        FROM
        "USER" u
        WHERE
        TIMESUB ( u.LAST_VISIT_TIME :: timestamptz, to_char ( now( ), 'yyyy-mm-dd hh24:mi:ss' ) :: timestamptz ) &lt; 120
    </select>

    <select id="getOnline" resultType="string">
        SELECT
        u.USER_ID
        FROM
        USER u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt; 120
    </select>

    <select id="getOnline" resultType="string" databaseId="dm">
        SELECT
        u.USER_ID
        FROM
        USER u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt; 120
    </select>

    <select id="getOnline" resultType="string" databaseId="kingbase">
        SELECT
        u.USER_ID
        FROM
        "USER" u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt; 120
    </select>

    <select id="getOnlineMap" resultType="string">
        SELECT
        u.USER_ID
        FROM
        USER u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt; 120
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
    </select>

    <select id="getOnlineMap" resultType="string" databaseId="kingbase">
        SELECT
        u.USER_ID
        FROM
        "USER" u
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt; 120
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
    </select>

    <update id="updateLastVisitTime" parameterType="int">
        UPDATE USER
        SET USER.LAST_VISIT_TIME = now( )
        WHERE
        uid =#{uid}
    </update>
    <update id="updateLastVisitTime" parameterType="int" databaseId="dm">
        UPDATE "USER"
        SET LAST_VISIT_TIME = now( )
        WHERE
        "uid" =#{uid}
    </update>

    <update id="updateLastVisitTime" parameterType="int" databaseId="kingbase">
        UPDATE "USER"
        SET LAST_VISIT_TIME = now( )
        WHERE
        uid =#{uid}
    </update>

    <update id="updateLastPassTime" parameterType="int">
        UPDATE USER
        SET USER.LAST_PASS_TIME = now( )
        WHERE
        uid =#{uid}
    </update>
    <update id="updateLastPassTime" parameterType="int" databaseId="kingbase">
        UPDATE "USER"
        SET LAST_PASS_TIME = now( )
        WHERE
        uid =#{uid}
    </update>

    <select id="selectImFriend" parameterType="java.util.List" resultMap="UserImfriedsMap">
        SELECT
        u.AVATAR,
        u.UID,
        u.USER_ID,
        u.USER_PRIV_NAME,
        u.SEX,
        u.BIRTHDAY,
        u.USER_NAME,
        u.MOBIL_NO,
        u.MY_STATUS,
        u.DEPT_ID,
        d.DEPT_NAME
        FROM
        USER u left join department d on u.DEPT_ID=d.DEPT_ID
        <where>
            USER_ID IN
            <foreach collection="list" item="item" open="(" close=")" separator=",">
                #{item}
            </foreach>
            and NOT_LOGIN = 0
        </where>
    </select>


    <update id="updatePriv" parameterType="map">
        update user
        <trim prefix="set" suffixOverrides=",">
            <if test="userPrivNo!=null">USER_PRIV_NO = #{userPrivNo},</if>
            <if test="userPrivName!=null">USER_PRIV_NAME = #{userPrivName},</if>
        </trim>
        where USER_PRIV = #{userPriv}
    </update>

    <update id="updatePriv" parameterType="map" databaseId="dm">
        update "user"
        <trim prefix="set" suffixOverrides=",">
            <if test="userPrivNo!=null">USER_PRIV_NO = #{userPrivNo},</if>
            <if test="userPrivName!=null">USER_PRIV_NAME = #{userPrivName},</if>
        </trim>
        where USER_PRIV = #{userPriv}
    </update>

    <update id="updatePriv" parameterType="map" databaseId="kingbase">
        update "user"
        <trim prefix="set" suffixOverrides=",">
            <if test="userPrivNo!=null">USER_PRIV_NO = #{userPrivNo},</if>
            <if test="userPrivName!=null">USER_PRIV_NAME = #{userPrivName},</if>
        </trim>
        where USER_PRIV = #{userPriv}
    </update>


    <select id="queryUserDeptOhter" parameterType="String" resultType="com.xoa.model.users.Users">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        d.DEPT_NAME as deptName
        FROM
        USER u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        where u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%') OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')

    </select>

    <select id="queryUserprivOhter" parameterType="String" resultType="com.xoa.model.users.Users">
        SELECT DISTINCT u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        d.DEPT_NAME as deptName
        FROM
        USER u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        where u.USER_PRIV_OTHER LIKE CONCAT('%,',#{privId},',%') OR  u.USER_PRIV_OTHER LIKE CONCAT(#{privId},',%')

    </select>

    <select id="getUsersByDeptIdAndPage" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" />,d.DEPT_NAME from user u ,department d WHERE u.DEPT_ID = #{deptId} AND u.DEPT_ID = d.DEPT_ID
        ORDER BY u.user_priv_no,u.user_no,u.uid LIMIT #{pageNo},#{pageSize}
    </select>

    <select id="selectUserByUserId" resultMap="UserResultMap">
        select UID, ICQ_NO,MOBILE_TYPE from USER  where  BYNAME = #{byname}
    </select>

    <select id="selectUserByUserId" resultMap="UserResultMap" databaseId="dm">
        select "UID", ICQ_NO,MOBILE_TYPE from "USER"  where  BYNAME = #{byname}
    </select>

    <select id="selectUserByUserId" resultMap="UserResultMap" databaseId="kingbase">
        select "UID", ICQ_NO,MOBILE_TYPE from "USER"  where  BYNAME = #{byname}
    </select>

    <select id="selectUserByUserId2" resultMap="UserResultMap">
        select UID, ICQ_NO,MOBILE_TYPE from USER  where  USER_ID = #{userId}
    </select>

    <select id="selectUserByUserId2" resultMap="UserResultMap" databaseId="kingbase">
        select UID, ICQ_NO,MOBILE_TYPE from "USER"  where  USER_ID = #{userId}
    </select>

    <select id="getOnlineByuser" resultType="com.xoa.model.users.Users">
        SELECT  u.UID as uid,u.USER_ID as userId,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as userPrivNo,u.DEPT_ID as deptId,
        u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,u.BIRTHDAY as birthday, u.MOBIL_NO as mobilNo, u.MY_STATUS as myStatus,
        d.DEPT_NAME as deptName
        FROM
        USER u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        WHERE
        UNIX_TIMESTAMP( now( ) ) - UNIX_TIMESTAMP( u.LAST_VISIT_TIME ) &lt;120
    </select>

    <select id="getUserNameUserId" parameterType="java.lang.String" resultType="java.lang.String">
        select UID from USER  where  USER_NAME = #{userName}
    </select>

    <select id="selectListByUserId" parameterType="java.lang.String" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where USER_ID = #{userId} order by UID desc
    </select>

    <select id="selectListByUserId" parameterType="java.lang.String" resultMap="UserResultMap" databaseId="kingbase">
        SELECT <include refid="Column_List_KB" />
        FROM "USER"
        WHERE USER_ID = #{userId}
        ORDER BY UID DESC;
    </select>

    <select id="getUserNameId" resultType="string">
        select UID from USER where 1=1
        <if test="userName != null">
            and USER_NAME = #{userName}
        </if>
        <if test="userId != null">
            and USER_ID = #{userId}
        </if>
    </select>

    <!---->
    <select id="deptIdOthers1" parameterType="String" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> ,ue.DUTY_TYPE,d.DEPT_NAME
        from user u ,department d
        ,user_ext ue where
        u.user_id is not null
        and u.uid=ue.uid
        and u.DEPT_ID=d.DEPT_NO
        AND u.DEPT_ID != 0
        <if test="des!=null">
            and u.DEPT_ID_OTHER = #{des}
        </if>
        <if test="notLogin != null and notLogin !='' ">
            and u.NOT_LOGIN = ${notLogin}
        </if>

    </select>


    <select id="getUsersByDeptIdYDD" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" />,d.DEPT_NAME deptName from user u ,department d ,user_ext ue WHERE  u.uid=ue.uid AND   u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        )ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getbyUserNameAll" parameterType="map" resultType="string">
        select user_name from user where user_id
        in
        <foreach collection="userNames" item="userNames" open="(" close=")" separator=",">
            #{userNames}
        </foreach>
    </select>


    <select id="getUidByConditions" parameterType="Map"
            resultType="integer">
        SELECT u.UID
        FROM
        `user` u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID WHERE 1=1
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId} or 'ALL_DEPT' = #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdOther},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdOther},',%')) or ('ALL_DEPT' = #{deptIdOther} and u.DEPT_ID_OTHER !='')
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivOther},',%') or u.USER_PRIV_OTHER LIKE
            CONCAT(#{userPrivOther},',%')
        </if>
        <if test="deptIdAll != null and deptIdAll !=''">
            and (u.DEPT_ID= #{deptIdAll} or (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdAll},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdAll},',%'))) or 'ALL_DEPT' = #{deptIdAll}
        </if>
        <if test="userPrivAll != null and userPrivAll !=''">
            and u.USER_PRIV= #{userPrivAll} or (u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivAll},',%') or
            u.USER_PRIV_OTHER LIKE CONCAT(#{userPrivAll},',%'))
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>

    <select id="getUidByConditions" parameterType="Map"
            resultType="integer" databaseId="kingbase">
        SELECT u.UID
        FROM
        "user" u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID WHERE 1=1
        <if test="deptId != null and deptId !=''">
            AND u.DEPT_ID= #{deptId} or 'ALL_DEPT' = #{deptId}
        </if>
        <if test="userPriv != null and userPriv !=''">
            and u.USER_PRIV= #{userPriv}
        </if>
        <if test="deptIdOther != null and deptIdOther !=''">
            and (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdOther},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdOther},',%')) or ('ALL_DEPT' = #{deptIdOther} and u.DEPT_ID_OTHER !='')
        </if>
        <if test="userPrivOther != null and userPrivOther !=''">
            and u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivOther},',%') or u.USER_PRIV_OTHER LIKE
            CONCAT(#{userPrivOther},',%')
        </if>
        <if test="deptIdAll != null and deptIdAll !=''">
            and (u.DEPT_ID= #{deptIdAll} or (u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptIdAll},',%') or u.DEPT_ID_OTHER LIKE
            CONCAT(#{deptIdAll},',%'))) or 'ALL_DEPT' = #{deptIdAll}
        </if>
        <if test="userPrivAll != null and userPrivAll !=''">
            and u.USER_PRIV= #{userPrivAll} or (u.USER_PRIV_OTHER LIKE CONCAT('%,',#{userPrivAll},',%') or
            u.USER_PRIV_OTHER LIKE CONCAT(#{userPrivAll},',%'))
        </if>
        ORDER BY u.user_priv_no,u.user_no
    </select>


    <select id="selectUserByDeptIdinfo" resultMap="UserResultMap">
        select u.USER_NAME,u.user_priv_name,u.user_id,u.UID,u.avatar,u.sex from user u
        WHERE u.dept_id != 0 AND
        (DEPT_ID in
        <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
            <if test="deptId!=null and deptId!= '' ">#{deptId}
            </if>
        </foreach>
        <foreach item="deptId" collection="deptIds" open="" separator="" close="">
            <if test="deptId!=null and deptId!= '' ">
                OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
            </if>
        </foreach>
        )
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>


    <select id="getWorkFlowUser" parameterType="map" resultType="com.xoa.model.users.Users">
        SELECT u.UID as uid,u.USER_ID as userId,u.USER_SECRECY as userSecrecy,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther,privOther.userPrivOtherName, u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM
        USER u INNER JOIN department d on u.DEPT_ID = d.DEPT_ID
        left join (SELECT USER.uid as privOtherUid,
        GROUP_CONCAT( user_priv.PRIV_NAME )
        AS userPrivOtherName
        FROM
        USER INNER JOIN USER_PRIV ON FIND_IN_SET( user_priv.USER_PRIV, USER.USER_PRIV_OTHER )
        GROUP BY
        USER.uid ) as privOther on privOtherUid = uid
        where
        u.UID in
        <foreach collection="allUid" item="item" index="index" open="(" close=")" separator=",">
            #{item}
        </foreach>
        <if test="deptId!=null and deptId!=''">
            and
            (u.DEPT_ID = #{deptId}
            OR ( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
            OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) )
        </if>
        <if test="userPriv!=null and userPriv!=''">
            and
            (u.USER_PRIV = #{userPriv}
            OR (u.USER_PRIV_OTHER LIKE concat(#{userPriv}, ',%')
            OR u.USER_PRIV_OTHER LIKE concat('%,',#{userPriv},',%')) )
        </if>
        <if test="search!=null and search!=''">
            and
            (u.USER_NAME LIKE concat('%',#{search},'%')
            <if test="search1!=null and search1!=''">
                or u.USER_NAME_INDEX LIKE concat('%',#{search1},'%')
            </if>
            )
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME

    </select>

    <select id="getWorkFlowUser" parameterType="map" resultType="com.xoa.model.users.Users" databaseId="dm">
        SELECT u."UID" as "uid",u.USER_ID as userId,u.USER_SECRECY as userSecrecy,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther,privOther.userPrivOtherName, u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM
        "USER" u INNER JOIN "department" d on u.DEPT_ID = d.DEPT_ID
        left join (SELECT u2."uid" as privOtherUid,
        wm_concat( user_priv.PRIV_NAME )
        AS userPrivOtherName
        FROM
        "USER" u2 INNER JOIN USER_PRIV ON instr(concat(concat(',',u2.USER_PRIV_OTHER),','),user_priv.USER_PRIV)
        GROUP BY
        u2."uid" ) as privOther on privOtherUid = "uid"
        where
        u."UID" in
        <foreach collection="allUid" item="item" index="index" open="(" close=")" separator=",">
            #{item}
        </foreach>
        <if test="deptId!=null and deptId!=''">
            and
            (u.DEPT_ID = #{deptId}
            OR ( u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
            OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) )
        </if>
        <if test="userPriv!=null and userPriv!=''">
            and
            (u.USER_PRIV = #{userPriv}
            OR (u.USER_PRIV_OTHER LIKE concat(#{userPriv}, ',%')
            OR u.USER_PRIV_OTHER LIKE concat(CONCAT('%,',#{userPriv}),',%')) )
        </if>
        <if test="search!=null and search!=''">
            and
            (u.USER_NAME LIKE concat(CONCAT('%',#{search}),'%')
            <if test="search1!=null and search1!=''">
                or u.USER_NAME_INDEX LIKE concat(CONCAT('%',#{search1}),'%')
            </if>
            )
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME

    </select>

    <select id="getWorkFlowUser" parameterType="map" resultType="com.xoa.model.users.Users" databaseId="kingbase">
        SELECT u.UID as uid,u.USER_ID as userId,u.USER_SECRECY as userSecrecy,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv ,u.USER_PRIV_NO as
        userPrivNo,u.DEPT_ID as deptId,u.USER_PRIV_NAME as userPrivName,u.BYNAME as byname,u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther,privOther.userPrivOtherName, u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM
        "USER" u INNER JOIN "department" d on u.DEPT_ID = d.DEPT_ID
        left join (SELECT u2.uid as privOtherUid,
        GROUP_CONCAT( user_priv.PRIV_NAME )
        AS userPrivOtherName
        FROM
        "USER" u2 INNER JOIN USER_PRIV ON instr(concat(concat(',',u2.USER_PRIV_OTHER),','),user_priv.USER_PRIV)
        GROUP BY
        u2.uid ) as privOther on privOtherUid = uid
        where
        u.UID in
        <foreach collection="allUid" item="item" index="index" open="(" close=")" separator=",">
            #{item}
        </foreach>
        <if test="deptId!=null and deptId!=''">
            and
            (u.DEPT_ID = #{deptId}
            OR ( u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
            OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')) )
        </if>
        <if test="userPriv!=null and userPriv!=''">
            and
            (u.USER_PRIV = #{userPriv}
            OR (u.USER_PRIV_OTHER LIKE concat(#{userPriv}, ',%')
            OR u.USER_PRIV_OTHER LIKE concat(CONCAT('%,',#{userPriv}),',%')) )
        </if>
        <if test="search!=null and search!=''">
            and
            (u.USER_NAME LIKE concat(CONCAT('%',#{search}),'%')
            <if test="search1!=null and search1!=''">
                or u.USER_NAME_INDEX LIKE concat(CONCAT('%',#{search1}),'%')
            </if>
            )
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME

    </select>


    <select id="getWorkFlowUid" resultType="Integer" parameterType="map">
        SELECT DISTINCT u.UID as uid
        FROM
        `USER` u INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( '%,', u.USER_ID, ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( '%,', u.DEPT_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( '%,', u.USER_PRIV, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        <if test="prcsJob!= null ">
            <foreach collection="prcsJob" item="jobId" index="jobId" open="" close="">
                OR( u.JOB_ID= #{jobId})
            </foreach>
        </if>
        )
        <!-- lr+ -->
        WHERE
        fp.FLOW_ID = #{flowId}
        AND fp.PRCS_ID = #{prcsId}
        <if test="deptIdByNo!=null and deptIdByNo.size>0">
            and (
            <foreach collection="deptIdByNo" item="deptId1" index="index1" open="" close="" separator="OR">
                u.DEPT_ID = #{deptId1}
                OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId1},',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId1},',%')
            </foreach>
            )
        </if>
        <if test="userFilter !=null and userFilter.size>0">
            and u.UID in
            <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
    </select>

    <select id="getWorkFlowUid" resultType="Integer" parameterType="map" databaseId="dm">
        SELECT DISTINCT user_tab.UID as uid from (
        SELECT u."UID",u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
        FROM
        "USER" u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( CONCAT('%,', u.USER_ID), ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( CONCAT('%,', u.DEPT_ID), ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( CONCAT('%,', u.USER_PRIV), ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat(CONCAT('%,',#{item}),',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        )
        <!-- lr+ -->
        WHERE
        fp.FLOW_ID = #{flowId}
        AND fp.PRCS_ID = #{prcsId}
        <if test="deptIdByNo!=null and deptIdByNo.size>0">
            and (
            <foreach collection="deptIdByNo" item="deptId1" index="index1" open="" close="" separator="OR">
                u.DEPT_ID = #{deptId1}
                OR u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId1}),',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId1},',%')
            </foreach>
            )
        </if>
        <if test="userFilter !=null and userFilter.size>0">
            and u.UID in
            <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
        ) user_tab
    </select>

    <select id="getWorkFlowUid" resultType="Integer" parameterType="map" databaseId="kingbase">
        SELECT DISTINCT user_tab.UID as uid from (
        SELECT u.UID,u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
        FROM
        "USER" u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        INNER JOIN flow_process fp ON (
        fp.PRCS_DEPT='ALL_DEPT' OR fp.PRCS_PRIV= 'ALL_PRIV'
        OR fp.PRCS_USER LIKE concat( CONCAT('%,', u.USER_ID), ',%' )
        OR fp.PRCS_USER LIKE concat( u.USER_ID, ',%' )
        OR fp.PRCS_DEPT LIKE concat ( CONCAT('%,', u.DEPT_ID), ',%' )
        OR fp.PRCS_DEPT LIKE concat ( u.DEPT_ID, ',%' )
        OR fp.PRCS_PRIV LIKE concat ( CONCAT('%,', u.USER_PRIV), ',%' )
        OR fp.PRCS_PRIV LIKE concat ( u.USER_PRIV, ',%' )
        <if test="prcsPriv != null">
            <foreach collection="prcsPriv" item="item" index="index" open="" close="">
                OR (u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                OR u.USER_PRIV_OTHER LIKE concat(CONCAT('%,',#{item}),',%'))
            </foreach>
        </if>
        <if test="prcsDept!= null ">
            <foreach collection="prcsDept" item="deptId" index="index1" open="" close="">
                OR( u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId}),',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%'))
            </foreach>
        </if>
        )
        <!-- lr+ -->
        WHERE
        fp.FLOW_ID = #{flowId}
        AND fp.PRCS_ID = #{prcsId}
        <if test="deptIdByNo!=null and deptIdByNo.size>0">
            and (
            <foreach collection="deptIdByNo" item="deptId1" index="index1" open="" close="" separator="OR">
                u.DEPT_ID = #{deptId1}
                OR u.DEPT_ID_OTHER LIKE CONCAT(CONCAT('%,',#{deptId1}),',%')
                OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId1},',%')
            </foreach>
            )
        </if>
        <if test="userFilter !=null and userFilter.size>0">
            and u.UID in
            <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
        order by u.USER_PRIV_NO, u.USER_NO, u.USER_NAME
        ) user_tab
    </select>

    <update id="updateIcqNo" parameterType="com.xoa.model.users.Users">
        update user
         <set>
                 MOBILE_TYPE=#{mobileType},
            ICQ_NO = #{icqNo}
         </set>
        where uid = #{uid}
    </update>

    <update id="updateIcqNo" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "user"
        <set>
            MOBILE_TYPE=#{mobileType},
            ICQ_NO = #{icqNo}
        </set>
        where uid = #{uid}
    </update>

    <update id="bindUserInfo" parameterType="com.xoa.model.users.Users">
        UPDATE USER
        SET  SECURE_KEY_SN = #{secureKeySn}
        WHERE
        uid =#{uid}
    </update>

    <select id="getUserAvatar" parameterType="string" resultType="java.lang.String">
        select AVATAR
        FROM user
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY FIELD
        <foreach collection="array" index="index" item="userIds" open="(user_id," separator="," close=")">
            #{userIds}
        </foreach>

    </select>

    <select id="getUserAvatar" parameterType="string" resultType="java.lang.String" databaseId="dm">
        select AVATAR
        FROM "user"
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY instr
        <foreach collection="array" index="index" item="userIds" open="('" separator="," close="',user_id)">
            ${userIds}
        </foreach>

    </select>

    <select id="getUserAvatar" parameterType="string" resultType="java.lang.String" databaseId="kingbase">
        select AVATAR
        FROM "user"
        WHERE USER_ID in
        <foreach collection="array" index="index" item="userIds" open="(" separator="," close=")">
            #{userIds}
        </foreach>
        ORDER BY instr
        <foreach collection="array" index="index" item="userIds" open="('" separator="," close="',user_id)">
            ${userIds}
        </foreach>

    </select>


    <select id="querySubordinate" parameterType="map" resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />
        FROM
        department d
        inner JOIN USER u ON d.DEPT_ID = u.DEPT_ID
        inner JOIN USER_PRIV p ON u.USER_PRIV = p.USER_PRIV
        WHERE
        p.USER_PRIV > #{userPriv}
        <if test="deptIds != null and deptIds.size  != 0">
            <foreach collection="deptIds" item="deptId" open=" AND  d.dept_ID  IN ( " close=" ) " separator=" , ">
                #{deptId}
            </foreach>
        </if>

    </select>


    <select id="querySubordinate1" parameterType="map" resultMap="UserResultMap">
        SELECT
        <include refid="U_Column_List" />
        FROM
        department d
        inner JOIN USER u ON d.DEPT_ID = u.DEPT_ID
        inner JOIN USER_PRIV p ON u.USER_PRIV = p.USER_PRIV
        WHERE
        p.USER_PRIV > #{userPriv}
        <foreach collection="deptIds" item="deptId" open=" AND  d.dept_ID  IN ( " close=" ) " separator=" , ">
            #{deptId}
        </foreach>
    </select>
    <select id="selectByMobilNo" resultType="int" parameterType="string">
        select count(*) from user where MOBIL_NO = #{mobilNo}
    </select>
    <select id="selectByIdAndMobilNo" resultType="int">
        select count(*) from user where MOBIL_NO = #{mobilNo} And ID_NUMBER = #{idNumber}
    </select>

    <select id="getUserPrivsByDeptID" parameterType="string" resultType="com.xoa.model.users.Users">
        select
        u.UID as uid,u.USER_ID as userId,u.USER_PRIV_NO as userPrivNo,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv
        from
        user u
        WHERE dept_id in
        <foreach collection="array" index="index" item="deptIds" open="(" separator="," close=")">
            #{deptIds}
        </foreach>
    </select>

    <select id="getUserPrivsByDeptID" parameterType="string" resultType="com.xoa.model.users.Users" databaseId="dm">
        select
        u."UID" as "uid",u.USER_ID as userId,u.USER_PRIV_NO as userPrivNo,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv
        from
        "user" u
        WHERE dept_id in
        <foreach collection="array" index="index" item="deptIds" open="(" separator="," close=")">
            #{deptIds}
        </foreach>
    </select>

    <select id="getUserPrivsByDeptID" parameterType="string" resultType="com.xoa.model.users.Users" databaseId="kingbase">
        select
        u.UID as uid,u.USER_ID as userId,u.USER_PRIV_NO as userPrivNo,
        u.USER_NAME as userName,u.SEX as sex ,U.AVATAR as avatar,u.USER_PRIV as userPriv
        from
        "user" u
        WHERE dept_id in
        <foreach collection="array" index="index" item="deptIds" open="(" separator="," close=")">
            #{deptIds}
        </foreach>
    </select>

    <select id="getUserByDiaryId" parameterType="string" resultType="com.xoa.model.users.Users">
        select u.USER_NAME AS userName,
               u.PHOTO     AS photo,
               u.AVATAR    AS avatar,
               u.SEX       AS sex,
               u.UID       AS uid
        from user u
        where user_id = #{userId}
    </select>

    <select id="getUserByDiaryId" parameterType="string" resultType="com.xoa.model.users.Users" databaseId="kingbase">
        select u.USER_NAME AS userName,
               u.PHOTO     AS photo,
               u.AVATAR    AS avatar,
               u.SEX       AS sex,
               u.UID       AS uid
        from "user" u
        where user_id = #{userId}
    </select>

    <update id="updateshortcut" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            SHORTCUT = #{shortcut}
        </set>
        where UID = #{uid}
    </update>

    <update id="updateshortcut" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "user"
        <set>
            SHORTCUT = #{shortcut}
        </set>
        where UID = #{uid}
    </update>

    <select id="getUserByUserPrivAnddeptId" parameterType="map" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user
        <where>
            <if test="userPriv !=null and userPriv !=''">
                and USER_PRIV=#{userPriv}
            </if>
            <if test="deptId !=null and deptId !=''">
                and DEPT_ID=#{deptId}
            </if>
            <if test="userId !=null and userId !=''">
                and USER_ID=#{userId}
            </if>
            <if test="uid !=null and uid !=''">
                and uid=#{uid}
            </if>
        </where>
    </select>

    <select id="selectByPhoneAndName" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where USER_NAME=#{userName} and MOBIL_NO=#{phone} limit 1
    </select>

    <select id="getUsersByNoEntry" resultMap="UserResultMap" parameterType="java.lang.String">
        SELECT
        <include refid="U_Column_List" />,
        d.DEPT_NAME,
        hsi.CATEGORY,
        hsi.BRAND
        FROM
            USER u
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
        LEFT JOIN hr_staff_info hsi ON u.USER_ID = hsi.USER_ID
        WHERE u.DEPT_ID != 0 AND u.USER_ID=#{userId}
    </select>

    <select id="getUsersByNoEntry" resultMap="UserResultMap" parameterType="java.lang.String" databaseId="kingbase">
        SELECT
        <include refid="U_Column_List" />,
        d.DEPT_NAME,
        hsi.CATEGORY,
        hsi.BRAND
        FROM
            "USER" u
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
        LEFT JOIN hr_staff_info hsi ON u.USER_ID = hsi.USER_ID
        WHERE u.DEPT_ID != 0 AND u.USER_ID=#{userId}
    </select>

    <update id="updateMyStatusByUserId" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            MY_STATUS = #{myStatus}
        </set>
        where UID = #{uid}
    </update>

    <update id="updateUserMap" parameterType="map">
        UPDATE `user`
        <set>
            <foreach collection="sets" separator="," item="value" index="key">
                <if test="value!=null and key!=null">
                    ${key} = #{value}
                </if>
            </foreach>
        </set>
        <where>
            <if test="uId!=null and uId!=''">
                and UID = #{uId}
            </if>
            <if test="userId!=null and userId!=''">
                and USER_ID = #{userId}
            </if>
        </where>
    </update>
    <select id="getUsersByOrgDeptId" parameterType="java.lang.Integer" resultMap="UserResultMap">
        select <include refid="U_Column_List" />,d.ORG_DEPT_NAME FROM user u , org_department d WHERE  u.DEPT_ID = #{deptId} and u.DEPT_ID = d.ORG_DEPT_ID  ORDER BY u.user_priv_no,u.user_no;
    </select>
    <select id="userUpdata" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user
    </select>
    <update id="updatePowerChinaUser" parameterType="com.xoa.model.users.Users">
        UPDATE USER
        <set>
            <if test="remark != null and remark !=''">
                REMARK = #{remark},
            </if>
            <if test="postId!=null and postId!='' ">
                POST_ID = #{postId},
            </if>
            <if test="telNoDept != null and telNoDept !=''">
                TEL_NO_DEPT = #{telNoDept},
            </if>
            <if test="mobilNo != null and mobilNo !=''">
                MOBIL_NO = #{mobilNo},
            </if>
            <if test="roomNum != null and roomNum !=''">
                ROOM_NUM = #{roomNum},
            </if>
            <if test="email != null and  email !='' ">
                EMAIL = #{email},
            </if>
            <if test="password != null and password !=''">
                PASSWORD = #{password},
            </if>
            <if test="idNumber != null and idNumber !=''">
                ID_NUMBER = #{idNumber}
            </if>
        </set>
        WHERE BYNAME = #{byname}
    </update>
    <select id="getSpecialUsers" parameterType="map" resultMap="UserResultMap">
        SELECT <include refid="U_Column_List" /> from user u where
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        or u.REMARK LIKE CONCAT('%,flag%')
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>


    <select id="getGroupConcatUserId" resultType="java.lang.String">
        SELECT
        GROUP_CONCAT(USER_ID) as userIds
        FROM `user`
        <where>
            NOT_LOGIN='0'
            <if test="deptId!=null and deptId!='' and userPriv!=null and userPriv!='' and userId!=null and userId!=''">
                and ( DEPT_ID in
                <foreach collection="deptIds" item="deptId" separator="," open="(" close=")">
                    #{deptId}
                </foreach>

                or USER_PRIV in
                <foreach collection="userPrivs" item="userPriv" open="(" close=")" separator=",">
                    #{userPriv}
                </foreach>

                or USER_ID in
                <foreach collection="userIds" item="userId" open="(" close=")" separator=",">
                    #{userId}
                </foreach>
                )
            </if>
        </where>
    </select>
    <select id="selectAllUsersName" resultMap="UserResultMap" resultType="map">
        select u.UID, u.USER_ID,u.USER_NAME
        from om_shipment s left join user u on u.UID=s.USER_ID where 1=1
        <if test="year != null and year!=''">
            and  year(SHIPMENT_DATE)=#{year}
        </if>
        <if test="month != null and month!=''">
            and month(SHIPMENT_DATE)=#{month}
        </if>
        <if test="day != null and day!=''">
            and day(SHIPMENT_DATE)=#{day}
        </if>
        <if test="enterId != null and enterId!=''">
            and ENTER_ID=#{enterId}
        </if>
        <if test="customerId != null and customerId!=''">
            and s.CUSTOMER_ID=#{customerId}
        </if>
        <if test="warehouseId!= null and warehouseId!=''">
            AND WAREHOUSE_ID = #{warehouseId}
        </if>
        <if test="userId!= null and userId!=''">
            AND s.USER_ID = #{userId}
        </if>
        group by s.USER_ID
    </select>
    <select id="selectCountByDeptId" parameterType="map" resultMap="UserResultMap">
        select u.UID, u.USER_ID,u.USER_NAME from user u WHERE u.USER_ID = #{userId}
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        )
        )
    </select>

    <select id="selectCountByDeptId" parameterType="map" resultMap="UserResultMap" databaseId="kingbase">
        select u.UID, u.USER_ID,u.USER_NAME from "user" u WHERE u.USER_ID = #{userId}
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId}::VARCHAR ,',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId}::VARCHAR ,',%')
        )
        )
    </select>

    <select id="fundUserIdByUserName" resultType="java.lang.String">
        SELECT
        GROUP_CONCAT(USER_ID)
        FROM `user`
        where USER_NAME in
        <foreach collection="userNames" open="(" close=")" separator="," item="name">
            #{name}
        </foreach>
    </select>
    <select id="selByUserNameAndDeptId" parameterType="Map" resultMap="UserResultMap">
        select <include refid="U_Column_List" />
        from user u
        where
        u.USER_NAME like CONCAT(CONCAT('%', #{userName}), '%')
        <if test="deptIds!=null">
            AND DEPT_ID IN
            <foreach collection="deptIds" item="deptId" separator="," open="(" close=")" index="index">
                #{deptId}
            </foreach>
        </if>
        ORDER BY u.UID
    </select>
    <select id="selectUserArrayByDeptId" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" />
        from user u ,department d
        WHERE u.DEPT_ID = d.DEPT_ID
        <if test="deptIds!=null">
            and (u.DEPT_ID IN
            <foreach item="deptId" collection="deptIds" open="(" separator="," close=")">
                <if test="deptId!=null and deptId != '' ">
                    #{deptId}
                </if>
            </foreach>
            or
            <foreach collection="deptIds" item="deptId" index="index" open="" separator="or" close="">
                u.DEPT_ID_OTHER like concat('%,',#{deptId},'%')
                or u.DEPT_ID_OTHER like concat('%,',#{deptId},',%')
                or u.DEPT_ID_OTHER like concat('%',#{deptId},',%')
            </foreach>
            )
        </if>
        <if test="role!=null">
            AND (USER_PRIV_OTHER like concat('%,',#{role},'%') or USER_PRIV_OTHER like concat('%,',#{role},',%') or USER_PRIV_OTHER like concat('%',#{role},',%') or USER_PRIV=#{role})
        </if>
        <if test="type==1">

        </if>
    </select>

    <select id="seleById" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where USER_ID = #{userId}
    </select>

    <select id="seleById" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="Column_List_KB" /> from "user" where USER_ID = #{userId}
    </select>

    <select id="getAllUserInfoPlus" resultType="com.xoa.model.users.Users">
        select u.USER_NAME userName ,u.user_priv_name userPrivName,u.user_id userId,u.UID uId,u.avatar avatar, u.dept_id
        deptId ,u.sex sex from user u
        where u.not_login !=1  AND u.dept_id != 0
        <if test="deptId != null and deptId != ''">
            and  u.DEPT_ID  IN
            <foreach collection="deptId" item="id" open="(" close=")" separator=" , ">
                #{id}
            </foreach>
        </if>
        ORDER BY user_priv_no,user_no

        <if test="userId!=null and userId.length!=0 ">
            <foreach collection="userId" item="str" open=" AND  u.USER_ID  IN ( " close=" ) " separator=" , ">
                #{str}
            </foreach>
        </if>
        <if test="deptId!=null and deptId.length!=0 ">
            <foreach collection="deptId" item="str" open=" and  u.DEPT_ID  IN ( " close=" ) " separator=" , ">
                #{str}
            </foreach>
        </if>

    </select>
    <update id="updateMyTableRight" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            MYTABLE_RIGHT = #{mytableRight},
        </set>
        where UID = #{uid}
    </update>
    <update id="updateMyTableLeft">
        update `user` set MYTABLE_LEFT = 'ALL' where MYTABLE_LEFT &lt;&gt; 'ALL'
    </update>
    <select id="getMyTableRight" resultType="string" parameterType="int">
        select MYTABLE_RIGHT from user
        where  UID = #{uid}
    </select>

    <select id="getUserIds" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user
        where  DEPT_ID = #{deptId}
    </select>

    <select id="getUserByPrvAndOtherDeptIds" resultMap="UserResultMap">
        select DISTINCT  UID, USER_ID from user where
        <foreach item="deptId" collection="array" open="(" separator="and" close=")">
            <if test="deptId!=null and deptId != '' ">
                DEPT_ID = #{deptId}
            </if>
        </foreach>
        or
        (
        <foreach collection="array" item="deptId" open="(" close=")" separator="OR" >
            <if test="deptId!=null and deptId != '' ">
                DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%') OR DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
            </if>
        </foreach>
        )
    </select>

    <select id="getIDaasUser" resultMap="IDaasUserMap" parameterType="map">
        select
        u.UID, u.USER_ID, u.USER_NAME, u.BYNAME, u.MOBIL_NO, u.EMAIL, u.THEME,
        u.SEX, u.DEPT_ID, u.USER_PRIV, u.USER_PRIV_NAME,
        al.EXTERNALID
        from
        ${company}.`user` u,
        ${company}.user_alidaas al
        <where>
            <if test="externalId != null">
                u.USER_ID = al.USER_ID
                and
                al.EXTERNALID = #{externalId}
            </if>
            <if test="userId != null">
                u.USER_ID = al.USER_ID
                and
                u.USER_ID = #{userId}
            </if>
        </where>
    </select>

    <select id="selectUserByMobilNo" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where ( NOT_MOBILE_LOGIN = '0' or NOT_LOGIN = '0' ) and mobil_No = #{mobilNo} limit 0,1
    </select>

    <select id="getUserByPhoneAndByaname" resultMap="UserResultMap">
        select <include refid="Column_List" /> from ${company}.`user`
        where MOBIL_NO = #{mobilNo}
        and BYNAME = #{byname}
    </select>

    <select id="getUserByanameAndCompany" resultMap="UserResultMap">
        select <include refid="Column_List" /> from ${company}.`user`
        where  BYNAME = #{byname}
    </select>

    <select id="selectUserByUIdCompany" resultMap="UserResultMap" parameterType="map">
        select <include refid="Column_List" /> from ${company}.`user`
        where  UID = #{uid}
    </select>
    <select id="selectUserIdByDeptIds" resultType="string">
        select USER_ID from user
        <where>
            <if test="deptIds!=null">
                DEPT_ID in
                <foreach collection="deptIds" item="item" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>
    <select id="selectByMobil" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where MOBIL_NO = #{mobilNo} and BYNAME=#{byname}
    </select>

    <select id="selectByMobil" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="Column_List_KB" /> from "user" where MOBIL_NO = #{mobilNo} and BYNAME=#{byname}
    </select>

    <select id="selectUserNameByUserId" resultType="string">
        select USER_NAME from user where USER_ID = #{userId}
    </select>

    <select id="selectUserNameByUserId" resultType="string" databaseId="kingbase">
        select USER_NAME from "user" where USER_ID = #{userId}
    </select>


    <select id="selectCountByDeptIds" resultType="int" >
        select count(*) from user
        where dept_id in
        <foreach collection="deptIds" item="deptId" open="(" close=")" separator="," >
            #{deptId}
        </foreach>
    </select>

    <select id="selectCountByUserPrivs" resultType="int" >
        select count(*) from user
        where user_priv in
        <foreach collection="userPrivs" item="userPriv" open="(" close=")" separator="," >
            #{userPriv}
        </foreach>
    </select>


    <select id="getUserByUserIdAndDeptId" resultMap="UserResultMap" parameterType="map">
        select UID, USER_ID, USER_NAME, BYNAME, MOBIL_NO, EMAIL, THEME,
        SEX, DEPT_ID, USER_PRIV, USER_PRIV_NAME from user
        where
        dept_id in
        <foreach collection="deptIds" item="deptId" open="(" close=")" separator=",">
            #{deptId}
        </foreach>
        or
        (
        <foreach collection="deptIds" item="deptId" open="(" close=")" separator="OR">
            <if test="deptId!=null and deptId != '' ">
                DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%') OR DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
            </if>
        </foreach>
        )
        OR user_id in
        <foreach collection="userIds" item="userId" open="(" close=")" separator=",">
            #{userId}
        </foreach>
    </select>
    <select id="getPassWordByUserId" resultMap="UserResultMap">
        select PASSWORD from user where USER_ID=#{userId,jdbcType=VARCHAR}
    </select>

    <select id="getPassWordByUserId" resultMap="UserResultMap" databaseId="kingbase">
        select PASSWORD from "user" where USER_ID=#{userId,jdbcType=VARCHAR}
    </select>

    <select id="getAll" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user
    </select>

    <select id="getAll" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="Column_List_KB" /> from "user"
    </select>

    <!-- uidArray -->
    <update id="batchUpdatePasswordByUidArray" parameterType="java.util.Map">
        update user
        set PASSWORD = #{password}
        where uid in
        <foreach collection="uidArray" item="uid" open="(" close=")" separator=",">
            #{uid}
        </foreach>
    </update>

    <update id="updateMyTableLefts" parameterType="com.xoa.model.users.Users">
        update user set MYTABLE_LEFT = #{mytableLeft,jdbcType=VARCHAR}
        where uid=#{uid}
    </update>

    <select id="selectByMsn" resultMap="UserResultMap">
        select <include refid="Column_List" /> from user where msn = #{msn}
    </select>
    <select id="selectUsersIdByName" resultMap="UserResultMap" parameterType="java.lang.String">
        select <include refid="Column_List" /> from user  where USER_NAME  like  concat ('%',#{userName},'%')
    </select>

    <select id="selectByUserId" resultMap="UserResultMap" parameterType="java.lang.String">
        select <include refid="Column_List" /> from user  where USER_ID  = #{care}
    </select>
    <select id="selectUsersIdByDeptId" resultMap="UserResultMap" parameterType="java.lang.String">
        select <include refid="Column_List" /> from user  where DEPT_ID = #{deptId}
    </select>
    <select id="selectUsersByMobilNos" resultMap="UserResultMap" parameterType="java.lang.String">
        select <include refid="Column_List" /> from user  where MOBIL_NO IN
        <foreach collection="array" item="mobilNo" open="(" close=")" separator=",">
            #{mobilNo}
        </foreach>
    </select>

    <select id="selectAllUsersWithFunctionStr" resultMap="UserResultMap" >
        SELECT
            u.uid,
            u.user_id,
            uf.user_func_id_str
        FROM
            USER u INNER JOIN user_function uf ON uf.uid = u.UID
    </select>
    <select id="selectAllUsersWithFunctionStr" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
            u."UID",
            u.user_id,
            uf.user_func_id_str
        FROM
            "user" u INNER JOIN user_function uf ON uf."UID" = u."UID"
    </select>
    <select id="selectUserNameAndUserId" resultType="Map">

        select USER_ID,USER_NAME from user where USER_ID in
        <foreach collection="userIds" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>

    </select>
    <select id="getUserPrivByDept" resultType="com.xoa.model.users.Users" parameterType="map">
        SELECT count(`user`.user_priv) as USER_PRIV_NUM,`user`.user_priv,user_priv.PRIV_NAME as USER_PRIV_NAME,group_concat(user_name separator ",") as USER_NAME FROM `user` left join user_priv on `user`.user_priv = user_priv.USER_PRIV where DEPT_ID = #{deptId} group by `user`.user_priv
    </select>

    <select id="selectUserAllInfoByNameAndUserId" resultMap="UserResultMap">
        SELECT
            u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.`PASSWORD`,u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.USER_PRIV_NO,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY,u.BP_NO,u.POST_ID,u.JOB_ID,u.ID_NUMBER,u.SIMPLE_INTERFACE,u.USER_SECRECY
        FROM
            USER u
                INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.USER_ID = #{byname} or u.BYNAME = #{byname} limit 1
    </select>

    <select id="selectUserAllInfoByNameAndUserId" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
            u."UID",u.USER_ID,u.USER_NAME,u.BYNAME,u."PASSWORD",u.DEPT_ID,u.DEPT_ID_OTHER,u.USER_PRIV,u.USER_PRIV_OTHER,u.USER_PRIV_NAME,u.USER_PRIV_NO,u.SEX,u.AVATAR,u.NOT_LOGIN,s.PARA_VALUE,u.THEME,u.MY_STATUS,u.NOT_MOBILE_LOGIN,u.DEPT_YJ,u.BIRTHDAY,u.BP_NO,u.POST_ID,u.JOB_ID,u.ID_NUMBER,u.SIMPLE_INTERFACE,u.USER_SECRECY
        FROM
            "USER" u
                INNER JOIN sys_para s ON s.PARA_NAME='IM_WINDOW_CAPTION'
        WHERE  u.USER_ID = #{byname} or u.BYNAME = #{byname} limit 1
    </select>

    <select id="selectUsersByNameAndUserId" resultMap="UserResultMap" parameterType="map">
        SELECT
            u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID
        FROM
            USER u
        <where>
            <if test="userId != null and userId != ''">
                u.USER_ID = #{userId} or u.USER_ID = #{byName}
            </if>
            <if test="byName != null and byName != ''">
                or u.BYNAME = #{userId} or u.BYNAME = #{byName}
            </if>
        </where>
    </select>

    <select id="selectUsersByNameAndUserId" resultMap="UserResultMap" parameterType="map" databaseId="kingbase">
        SELECT
        u.UID,u.USER_ID,u.USER_NAME,u.BYNAME,u.DEPT_ID
        FROM
        "USER" u
        <where>
            <if test="userId != null and userId != ''">
                u.USER_ID = #{userId} or u.USER_ID = #{byName}
            </if>
            <if test="byName != null and byName != ''">
                or u.BYNAME = #{userId} or u.BYNAME = #{byName}
            </if>
        </where>
    </select>

    <select id="getNotLoginUser" resultMap="UserResultMap" parameterType="java.lang.String">
        SELECT
            UID,
            USER_NAME,
            DEPT_ID,
            USER_PRIV,
            USER_PRIV_NO,
            DEPT_ID_OTHER,
            USER_PRIV_OTHER,
            POST_PRIV,
            POST_DEPT
        FROM
            USER
        WHERE
            USER_ID = #{userId}
          AND NOT_LOGIN = 0
    </select>

    <select id="getNotLoginUser" resultMap="UserResultMap" parameterType="java.lang.String" databaseId="kingbase">
        SELECT
            UID,
            USER_NAME,
            DEPT_ID,
            USER_PRIV,
            USER_PRIV_NO,
            DEPT_ID_OTHER,
            USER_PRIV_OTHER,
            POST_PRIV,
            POST_DEPT
        FROM
            "USER"
        WHERE
            USER_ID = #{userId}
          AND NOT_LOGIN = 0
    </select>

    <select id="getNotLoginUsers" resultMap="UserResultMap" parameterType="java.util.Map">
        SELECT
            USER_ID,
            USER_NAME
        FROM
            USER
        <where>
            <if test="userTopId != null">
                AND USER_ID = #{userTopId}
            </if>
            <if test="orUserTopIds != null and orUserTopIds.size() > 0">
                <foreach collection="orUserTopIds" item="id" index="index" open="" close="">
                    OR USER_ID = #{id}
                </foreach>
            </if>
            AND NOT_LOGIN = 0
        </where>
    </select>

    <select id="getNotLoginUsers" resultMap="UserResultMap" parameterType="java.util.Map" databaseId="kingbase">
        SELECT
            USER_ID,
            USER_NAME
        FROM
            "USER"
        <where>
            <if test="userTopId != null">
                AND USER_ID = #{userTopId}
            </if>
            <if test="orUserTopIds != null and orUserTopIds.size() > 0">
                <foreach collection="orUserTopIds" item="id" index="index" open="" close="">
                    OR USER_ID = #{id}
                </foreach>
            </if>
            AND NOT_LOGIN = 0
        </where>
    </select>

    <select id="getUsersByPrivIdsAndPrivOtherIds" resultMap="UserResultMap">
        SELECT
        u.UID,
        u.USER_NAME,
        u.DEPT_ID,
        u.USER_PRIV,
        u.USER_PRIV_NO,
        u.DEPT_ID_OTHER,
        u.USER_PRIV_OTHER,
        u.NOT_LOGIN
        from user u
        <where>
            u.DEPT_ID is not null
            <if test="privIds!=null">
                and (
                u.USER_PRIV in
                <foreach item="privId" collection="privIds" open="(" separator="," close=")">
                    <if test="privId!=null and privId != '' ">
                        #{privId}
                    </if>
                </foreach>
                <foreach item="privId" collection="privIds">
                    <if test="privId!=null and privId != '' ">
                        OR u.USER_PRIV_OTHER like concat('%,',#{privId},'%') OR u.USER_PRIV_OTHER like concat('%,',#{privId},',%') OR u.USER_PRIV_OTHER like concat('%',#{privId},',%')
                    </if>
                </foreach>
                )
            </if>
        </where>
    </select>

    <select id="getUsersByPrivIdsAndPrivOtherIds" resultMap="UserResultMap" databaseId="kingbase">
        SELECT
        u.UID,
        u.USER_NAME,
        u.DEPT_ID,
        u.USER_PRIV,
        u.USER_PRIV_NO,
        u.DEPT_ID_OTHER,
        u.USER_PRIV_OTHER,
        u.NOT_LOGIN
        from "user" u
        <where>
            u.DEPT_ID is not null
            <if test="privIds!=null">
                and (
                u.USER_PRIV in
                <foreach item="privId" collection="privIds" open="(" separator="," close=")">
                    <if test="privId!=null and privId != '' ">
                        #{privId}
                    </if>
                </foreach>
                <foreach item="privId" collection="privIds">
                    <if test="privId!=null and privId != '' ">
                        OR u.USER_PRIV_OTHER like concat('%,',#{privId},'%') OR u.USER_PRIV_OTHER like concat('%,',#{privId},',%') OR u.USER_PRIV_OTHER like concat('%',#{privId},',%')
                    </if>
                </foreach>
                )
            </if>
        </where>
    </select>

    <select id="diaryModelExport" resultMap="UserAndDiaryResultMap" parameterType="java.util.Map">
        SELECT
            substring_index( substring_index( DEPT_NAME, '/', 2 ), '/',- 1 ) AS ONE_DEPT_NAME, ##
            substring_index( substring_index( DEPT_NAME, '/', 3 ), '/',- 1 ) AS TWO_DEPT_NAME, ##
            substring_index( substring_index( DEPT_NAME, '/', 4 ), '/',- 1 ) AS THREE_DEPT_NAME, ##
            substring_index( substring_index( DEPT_NAME, '/', 5 ), '/',- 1 ) AS FOUR_DEPT_NAME, ##
            IFNULL(USER_ID, '' ) AS USER_ID, ##ID
            IFNULL(BYNAME, '' ) AS BYNAME, ##
            IFNULL(USER_PRIV_NAME, '' ) AS USER_PRIV_NAME, ##
            IFNULL(USER_NAME, '' ) AS USER_NAME, ##
            IFNULL(USER_PRIV_OTHER, '' ) AS USER_PRIV_OTHER, ##
            IFNULL(ISFLAG, '' ) AS ISFLAG, ##1-
            IFNULL(DIA_ID, '' ) AS DIA_ID,
            IFNULL(DIA_TYPE, '' ) AS DIA_TYPE, ##
            IFNULL(DIA_TYPE_NAME, '' ) AS DIA_TYPE_NAME, ##
            IFNULL(DIA_DATE, '' ) AS DIA_DATE, ##
            IFNULL(SUBJECT, '' ) AS SUBJECT, ##
            IFNULL(CONTENT, '' ) AS CONTENT,
            IFNULL(DIA_TIME, '' ) AS DIA_TIME, ##
            IFNULL(TO_ID, '' ) AS TO_ID,
            IFNULL(USER_TOP_ID, '' ) AS USER_TOP_ID, ##ID
            IFNULL((SELECT GROUP_CONCAT(substring_index(USER_NAME,'/',-1)) FROM USER
                WHERE FIND_IN_SET(USER_ID,USER_TOP_ID)),'' ) AS USER_TOP_ID_NAME, ##
            IFNULL( GROUP_CONCAT( DC_COMMENT_TXT ), '' ) AS COMMENT_TXT, ##
            IFNULL( LENGTH( IFNULL( GROUP_CONCAT( DC_COMMENT_TXT ), '' ) ), 0 ) AS COMMENT_LENGTH, ##
            IFNULL( IF( LENGTH( IFNULL( GROUP_CONCAT( DC_COMMENT_TXT ), '' ) ) > 15, '', ''),  '') AS COMMENT_LENGTH_JUDGE ##15
        FROM
            (
                SELECT
                    u.USER_ID AS USER_ID,
                    u.BYNAME AS BYNAME,
                    u.USER_NAME AS USER_NAME,
                    u.USER_PRIV_NAME AS USER_PRIV_NAME,
                    u.USER_PRIV_OTHER AS USER_PRIV_OTHER,
                    dept.DEPT_NAME AS DEPT_NAME,
                    dept.DEPT_NO AS DEPT_NO,
                    d.DIA_ID AS DIA_ID,
                    CASE
                        IFNULL(d.DIA_ID,'')
                        WHEN '' THEN
                        '' ELSE ''
                        END AS ISFLAG,
                    d.DIA_TYPE,
                    CASE
                        d.DIA_TYPE
                        WHEN '1' THEN
                        ''
                        WHEN '2' THEN
                        ''
                        WHEN '3' THEN
                        ''
                        WHEN '4' THEN
                        '' ELSE ''
                        END AS DIA_TYPE_NAME,
                    d.DIA_DATE AS DIA_DATE,
                    d.SUBJECT AS SUBJECT,
                    d.CONTENT AS CONTENT,
                    d.TO_ID AS TO_ID,
                    d.DIA_TIME AS DIA_TIME,
                    IFNULL( d.USER_TOP_ID, '' ) AS USER_TOP_ID,
                    CONCAT( '', IFNULL( dcu.USER_NAME, dc.USER_ID ), '\n', IFNULL( dc.CONTENT, '' ), ' \n[:', dc.SEND_TIME, ']\n') AS DC_COMMENT_TXT
                FROM
                    USER u
                    LEFT JOIN v_dept_info dept ON dept.DEPT_ID = u.DEPT_ID
                    LEFT JOIN diary d ON d.USER_ID = u.USER_ID
                    AND ( d.DIA_DATE &gt;= #{startDate} AND d.DIA_DATE &lt;= #{endDate} )
                    AND d.SFLAG = 1
                    AND d.DIA_TYPE = 3
                    LEFT JOIN diary_comment dc ON dc.DIA_ID = d.DIA_ID
                    <if test="sendDate != null and sendDate != ''">
                        AND dc.SEND_TIME &lt; CONCAT(#{sendDate}, ' 23:59:59')
                    </if>
                    LEFT JOIN USER dcu ON dcu.USER_ID = dc.USER_ID
                WHERE
                    u.DEPT_ID IN (
                        SELECT dept_id FROM department WHERE
                        <foreach collection="deptNos" item="deptNo" index="index" open="(" close=")" separator="OR">
                            dept_no LIKE CONCAT(#{deptNo}, '%')
                        </foreach>
                    )
                    AND u.USER_PRIV_OTHER REGEXP '2070|2071'
                ORDER BY
                    LENGTH( dc.CONTENT ) DESC,
                    dc.send_time DESC
            ) T
        GROUP BY
            USER_ID,
            USER_NAME,
            USER_PRIV_OTHER,
            DIA_ID
        ORDER BY
            DEPT_NO ASC,LENGTH(DEPT_NO) ASC
    </select>

    <select id="diaryModelExport" resultMap="UserAndDiaryResultMap" parameterType="java.util.Map" databaseId="kingbase">
        SELECT
        substring( DEPT_NAME, '/' , 1 , CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) - 1 ) AS ONE_DEPT_NAME,
        substring( DEPT_NAME, '/', CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1 , CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) - CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) - 1 ) AS TWO_DEPT_NAME,
        substring( DEPT_NAME, '/', CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) + 1 , CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) + 1) - CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) - 1 ) AS THREE_DEPT_NAME,
        substring( DEPT_NAME, '/', CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) + 1) + 1 , LENGTH(DEPT_NAME) - CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME, CHARINDEX('/', DEPT_NAME) + 1) + 1) + 1) ) AS FOUR_DEPT_NAME,
        COALESCE(USER_ID, '' ) AS USER_ID,
        COALESCE(BYNAME, '' ) AS BYNAME,
        COALESCE(USER_PRIV_NAME, '' ) AS USER_PRIV_NAME,
        COALESCE(USER_NAME, '' ) AS USER_NAME,
        COALESCE(USER_PRIV_OTHER, '' ) AS USER_PRIV_OTHER,
        COALESCE(ISFLAG, '' ) AS ISFLAG,
        COALESCE(DIA_ID, '' ) AS DIA_ID,
        COALESCE(DIA_TYPE, '' ) AS DIA_TYPE,
        CASE
        WHEN DIA_TYPE = '1' THEN ''
        WHEN DIA_TYPE = '2' THEN ''
        WHEN DIA_TYPE = '3' THEN ''
        WHEN DIA_TYPE = '4' THEN ''
        ELSE ''
        END AS DIA_TYPE_NAME,
        COALESCE(DIA_DATE, '' ) AS DIA_DATE,
        COALESCE(SUBJECT, '' ) AS SUBJECT,
        COALESCE(CONTENT, '' ) AS CONTENT,
        COALESCE(DIA_TIME, '' ) AS DIA_TIME,
        COALESCE(TO_ID, '' ) AS TO_ID,
        COALESCE(USER_TOP_ID, '' ) AS USER_TOP_ID,
        COALESCE((SELECT listagg(substring(USER_NAME,'/', length(USER_NAME) - INSTR(reverse(USER_NAME), '/')+2 ), ',') WITHIN GROUP (ORDER BY USER_NAME DESC) FROM "USER"
        WHERE USER_ID IN (SELECT regexp_split_to_table(USER_TOP_ID, ','))
        ),'' ) AS USER_TOP_ID_NAME,
        COALESCE( LISTAGG( DC_COMMENT_TXT, ',' ) WITHIN GROUP ( ORDER BY DC_COMMENT_TXT DESC ), '' ) AS COMMENT_TXT,
        COALESCE( LENGTH( LISTAGG( DC_COMMENT_TXT, ',' ) WITHIN GROUP ( ORDER BY DC_COMMENT_TXT DESC ) ), 0 ) AS COMMENT_LENGTH,
        CASE
        WHEN LENGTH( LISTAGG( DC_COMMENT_TXT, ',' ) WITHIN GROUP ( ORDER BY DC_COMMENT_TXT DESC ) ) > 15 THEN ''
        ELSE ''
        END AS COMMENT_LENGTH_JUDGE
        FROM
        (
        SELECT
        u.USER_ID AS USER_ID,
        u.BYNAME AS BYNAME,
        u.USER_NAME AS USER_NAME,
        u.USER_PRIV_NAME AS USER_PRIV_NAME,
        u.USER_PRIV_OTHER AS USER_PRIV_OTHER,
        dept.DEPT_NAME AS DEPT_NAME,
        dept.DEPT_NO AS DEPT_NO,
        d.DIA_ID AS DIA_ID,
        CASE
        WHEN COALESCE(d.DIA_ID,'') = '' THEN ''
        ELSE ''
        END AS ISFLAG,
        d.DIA_TYPE,
        d.DIA_DATE AS DIA_DATE,
        d.SUBJECT AS SUBJECT,
        d.CONTENT AS CONTENT,
        d.TO_ID AS TO_ID,
        d.DIA_TIME AS DIA_TIME,
        COALESCE( d.USER_TOP_ID, '' ) AS USER_TOP_ID,
        CONCAT( '', COALESCE( dcu.USER_NAME, dc.USER_ID ), '\n', COALESCE( dc.CONTENT, '' ), ' \n[:', dc.SEND_TIME, ']\n') AS DC_COMMENT_TXT
        FROM
        "USER" u
        LEFT JOIN
        department dept ON dept.DEPT_ID = u.DEPT_ID
        LEFT JOIN
        diary d ON d.USER_ID = u.USER_ID AND ( d.DIA_DATE &gt;= #{startDate} AND d.DIA_DATE &lt;= #{endDate} ) AND d.SFLAG = 1 AND d.DIA_TYPE = 3
        LEFT JOIN
        diary_comment dc ON dc.DIA_ID = d.DIA_ID
        <if test="sendDate != null and sendDate != ''">
            AND dc.SEND_TIME &lt; CONCAT(#{sendDate}, ' 23:59:59')
        </if>
        LEFT JOIN
        "USER" dcu ON dcu.USER_ID = dc.USER_ID
        WHERE
        u.DEPT_ID IN (
            SELECT dept_id FROM department WHERE
            <foreach collection="deptNos" item="deptNo" index="index" open="(" close=")" separator="OR">
                dept_no LIKE CONCAT(#{deptNo}::VARCHAR , '%')
            </foreach>
        )
        AND
        u.USER_PRIV_OTHER ~* '2070|2071'
        ORDER BY
        LENGTH( dc.CONTENT ) DESC,
        dc.send_time DESC
        ) T
        GROUP BY
        USER_ID,
        USER_NAME,
        USER_PRIV_OTHER,
        DIA_ID,
        DEPT_NAME,
        ONE_DEPT_NAME,
        TWO_DEPT_NAME,
        THREE_DEPT_NAME,
        FOUR_DEPT_NAME,
        BYNAME,
        USER_PRIV_NAME,
        DIA_TYPE,
        DIA_TYPE_NAME,
        DIA_DATE,
        SUBJECT,
        CONTENT,
        DIA_TIME,
        TO_ID,
        USER_TOP_ID,
        COMMENT_LENGTH_JUDGE
        ORDER BY
        DEPT_NO ASC,
        LENGTH(DEPT_NO) ASC
    </select>

    <select id="selectUserInfoByUserIdSet" resultMap="UserResultMap" parameterType="java.util.Set">
        SELECT
            u.USER_ID,
            u.USER_NAME,
            u.USER_PRIV_OTHER,
            d.DEPT_ID,
            d.DEPT_NAME,
            up.PRIV_NAME
        FROM
            `user` u
            LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
            LEFT JOIN USER_PRIV up ON u.USER_PRIV = up.USER_PRIV
        <where>
            <if test="listUserId != null and listUserId.size() > 0">
                USER_ID IN
                <foreach collection="listUserId" item="userId" open="(" separator="," close=")" index="index">
                    #{userId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="selectUserInfoByUserIdSet" resultMap="UserResultMap" parameterType="java.util.Set" databaseId="kingbase">
        SELECT
            u.USER_ID,
            u.USER_NAME,
            u.USER_PRIV_OTHER,
            d.DEPT_ID,
            d.DEPT_NAME,
            up.PRIV_NAME
        FROM
            "user" u
            LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
            LEFT JOIN USER_PRIV up ON u.USER_PRIV = up.USER_PRIV
        <where>
            <if test="listUserId != null and listUserId.size() > 0">
                USER_ID IN
                <foreach collection="listUserId" item="userId" open="(" separator="," close=")" index="index">
                    #{userId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="selectUserInfoByUserIdSetByUid" resultMap="UserResultMap" parameterType="java.util.Set">
        SELECT
        u.UID,
        u.USER_ID,
        u.USER_NAME,
        u.USER_PRIV_OTHER,
        d.DEPT_ID,
        d.DEPT_NAME,
        up.PRIV_NAME
        FROM
        `user` u
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
        LEFT JOIN USER_PRIV up ON u.USER_PRIV = up.USER_PRIV
        <where>
            <if test="listUId != null and listUId.size() > 0">
                UID IN
                <foreach collection="listUId" item="uId" open="(" separator="," close=")" index="index">
                    #{uId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="selectUserInfoByUserIdSetByUid" resultMap="UserResultMap" parameterType="java.util.Set" databaseId="kingbase">
        SELECT
        u.UID,
        u.USER_ID,
        u.USER_NAME,
        u.USER_PRIV_OTHER,
        d.DEPT_ID,
        d.DEPT_NAME,
        up.PRIV_NAME
        FROM
        "user" u
        LEFT JOIN department d ON u.DEPT_ID = d.DEPT_ID
        LEFT JOIN USER_PRIV up ON u.USER_PRIV = up.USER_PRIV
        <where>
            <if test="listUId != null and listUId.size() > 0">
                UID IN
                <foreach collection="listUId" item="uId" open="(" separator="," close=")" index="index">
                    #{uId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="getOaHeadPortraitUsersList" resultMap="UserResultMap" parameterType="java.util.Set">
        SELECT u.USER_ID, h.PHOTO_NAME
        FROM
            USER u
        LEFT JOIN hr_staff_info h ON u.USER_ID = h.USER_ID
        <where>
            <if test="userIds != null and userIds.size() > 0">
                AND u.USER_ID IN
                <foreach collection="userIds" item="userId" open="(" separator="," close=")">
                    #{userId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="getOaHeadPortraitUsersList" resultMap="UserResultMap" parameterType="java.util.Set" databaseId="kingbase">
        SELECT u.USER_ID, h.PHOTO_NAME
        FROM
            "USER" u
        LEFT JOIN hr_staff_info h ON u.USER_ID = h.USER_ID
        <where>
            <if test="userIds != null and userIds.size() > 0">
                AND u.USER_ID IN
                <foreach collection="userIds" item="userId" open="(" separator="," close=")">
                    #{userId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="selectWorkFlowUsers" parameterType="map" resultType="com.xoa.model.users.Users">
        SELECT
            u.UID as uid,
            u.USER_ID as userId,
            u.USER_NAME as userName,
            u.SEX as sex ,
            u.AVATAR as avatar,
            u.USER_PRIV as userPriv ,
            u.USER_PRIV_NO as userPrivNo,
            u.DEPT_ID as deptId,
            u.USER_PRIV_NAME as userPrivName,
            u.BYNAME as byname,
            u.USER_NO as userNo,
            u.USER_PRIV_OTHER as userPrivOther,
            u.DEPT_ID_OTHER as deptIdOther,
            d.DEPT_NAME as deptName
        FROM
            USER u
            INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        <where>
            <if test="prcsUser != null or prcsPriv != null or prcsDept!= null or prcsJob!= null">
                (
                <if test="prcsUser != null">
                    <foreach collection="prcsUser" item="item" index="index" open="" close="" separator="OR">
                        u.USER_ID = #{item}
                    </foreach>
                </if>
                <if test="prcsPriv != null">
                    <if test="prcsUser != null">
                         OR
                    </if>
                    <foreach collection="prcsPriv" item="item" index="index" open="" close="" separator="OR">
                        u.USER_PRIV = #{item}
                        OR u.USER_PRIV_OTHER LIKE concat(#{item}, ',%')
                        OR u.USER_PRIV_OTHER LIKE concat('%,',#{item},',%')
                    </foreach>
                </if>
                <if test="prcsDept!= null ">
                    <if test="prcsUser != null or prcsPriv != null">
                        OR
                    </if>
                    <foreach collection="prcsDept" item="deptId" index="index1" open="" close="" separator="OR">
                        u.DEPT_ID = #{deptId}
                        OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
                        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
                    </foreach>
                </if>
                <if test="prcsJob!= null ">
                    <if test="prcsUser != null or prcsPriv != null or prcsDept!= null">
                        OR
                    </if>
                    <foreach collection="prcsJob" item="jobId" index="jobId" open="" close="" separator="OR">
                        u.JOB_ID= #{jobId}
                    </foreach>
                </if>
                )
            </if>
            <if test="autoTypeUsers!=null">
                and (
                <foreach collection="autoTypeUsers" item="autoUserId" index="index1" open="" close="" separator="OR">
                    u.USER_ID = #{autoUserId}
                </foreach>
                )
            </if>
            <if test="deptIdByNo!=null">
                and (
                <foreach collection="deptIdByNo" item="deptId1" index="index1" open="" close="" separator="OR">
                    u.DEPT_ID = #{deptId1}
                    OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId1},',%')
                    OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId1},',%')
                </foreach>
                )
            </if>
            <if test="userFilter !=null">
                and u.UID in
                <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <select id="selectWorkFlowUsers" parameterType="map" resultType="com.xoa.model.users.Users" databaseId="kingbase">
        SELECT
        u.UID as uid,
        u.USER_ID as userId,
        u.USER_NAME as userName,
        u.SEX as sex ,
        u.AVATAR as avatar,
        u.USER_PRIV as userPriv ,
        u.USER_PRIV_NO as userPrivNo,
        u.DEPT_ID as deptId,
        u.USER_PRIV_NAME as userPrivName,
        u.BYNAME as byname,
        u.USER_NO as userNo,
        u.USER_PRIV_OTHER as userPrivOther,
        u.DEPT_ID_OTHER as deptIdOther,
        d.DEPT_NAME as deptName
        FROM
        "USER" u
        INNER JOIN department d on (u.DEPT_ID = d.DEPT_ID and u.DEPT_ID !=0 AND u.NOT_LOGIN = '0')
        <where>
            <if test="prcsUser != null or prcsPriv != null or prcsDept!= null or prcsJob!= null">
                (
                <if test="prcsUser != null">
                    <foreach collection="prcsUser" item="item" index="index" open="" close="" separator="OR">
                        u.USER_ID = #{item}
                    </foreach>
                </if>
                <if test="prcsPriv != null">
                    <if test="prcsUser != null">
                        OR
                    </if>
                    <foreach collection="prcsPriv" item="item" index="index" open="" close="" separator="OR">
                        u.USER_PRIV = #{item}
                        OR u.USER_PRIV_OTHER LIKE concat(#{item}::VARCHAR, ',%')
                        OR u.USER_PRIV_OTHER LIKE concat('%,',#{item}::VARCHAR,',%')
                    </foreach>
                </if>
                <if test="prcsDept!= null ">
                    <if test="prcsUser != null or prcsPriv != null">
                        OR
                    </if>
                    <foreach collection="prcsDept" item="deptId" index="index1" open="" close="" separator="OR">
                        u.DEPT_ID = #{deptId}
                        OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId}::VARCHAR,',%')
                        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId}::VARCHAR,',%')
                    </foreach>
                </if>
                <if test="prcsJob!= null ">
                    <if test="prcsUser != null or prcsPriv != null or prcsDept!= null">
                        OR
                    </if>
                    <foreach collection="prcsJob" item="jobId" index="jobId" open="" close="" separator="OR">
                        u.JOB_ID= #{jobId}
                    </foreach>
                </if>
                )
            </if>
            <if test="autoTypeUsers!=null">
                and (
                <foreach collection="autoTypeUsers" item="autoUserId" index="index1" open="" close="" separator="OR">
                    u.USER_ID = #{autoUserId}
                </foreach>
                )
            </if>
            <if test="deptIdByNo!=null">
                and (
                <foreach collection="deptIdByNo" item="deptId1" index="index1" open="" close="" separator="OR">
                    u.DEPT_ID = #{deptId1}
                    OR u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId1}::VARCHAR,',%')
                    OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId1}::VARCHAR,',%')
                </foreach>
                )
            </if>
            <if test="userFilter !=null">
                and u.UID in
                <foreach collection="userFilter" item="item" index="index" open="(" close=")" separator=",">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <select id="getUserStructure" resultMap="UserIdAndNameResultMap" parameterType="java.lang.Integer">
        SELECT
            USER_ID,
            USER_NAME
        FROM
            USER
        WHERE
            NOT_LOGIN = 0
            AND DEPT_ID = #{deptId}
            OR FIND_IN_SET( #{deptId}, DEPT_ID_OTHER )
        ORDER BY
            USER_NO,
            USER_NAME
    </select>

    <select id="getUserStructure" resultMap="UserIdAndNameResultMap" parameterType="java.lang.Integer" databaseId="kingbase">
        SELECT
            USER_ID,
            USER_NAME
        FROM
            "USER"
        WHERE
            NOT_LOGIN = 0
            AND DEPT_ID = #{deptId}
            OR FIND_IN_SET( #{deptId}, DEPT_ID_OTHER )
        ORDER BY
            USER_NO,
            USER_NAME
    </select>

    <select id="selectHavePriv" resultMap="UserIdAndNameResultMap">
        select user_id,user_name from user where user_priv_other!='';
    </select>

    <select id="selectHavePriv" resultMap="UserIdAndNameResultMap" databaseId="kingbase">
        select user_id,user_name from "USER" where user_priv_other!='';
    </select>

    <select id="selectHaveDept" resultMap="UserIdAndNameResultMap">
        select user_id,user_name from user where DEPT_ID_OTHER!=''
    </select>

    <select id="selectHaveDept" resultMap="UserIdAndNameResultMap" databaseId="kingbase">
        select user_id,user_name from "USER" where DEPT_ID_OTHER!=''
    </select>

    <select id="selectuserByname" resultMap="UserResultMap" parameterType="java.lang.String">
        select <include refid="Column_List" /> from user  where USER_NAME  =#{userName}
    </select>


    <select id="getUserCountWithDept" resultType="java.lang.Integer">
        select count(u.UID) from user u  INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID ;
    </select>
    <select id="getUserCountWithDept" resultType="java.lang.Integer" databaseId="oracle">
        select count(u.UID) from USER u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
    </select>
    <select id="getUserCountWithDept" resultType="java.lang.Integer" databaseId="dm">
        select count(u."UID") from "USER" u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
    </select>
    <select id="getUserCountWithDept" resultType="java.lang.Integer" databaseId="kingbase">
        select count(u.UID) from "USER" u INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
    </select>

    <select id="selectCountUser" resultType="java.lang.Integer">
        select count(u.UID) from user u  INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
        <where>
        <if test="deptIds!=null">
        u.dept_id in
        <foreach collection="deptIds" item="deptId" open="(" close=")" separator="," >
            #{deptId}
        </foreach>
        </if>
        <if test="userPrivs!=null">
        or u.user_priv in
        <foreach collection="userPrivs" item="userPriv" open="(" close=")" separator="," >
            #{userPriv}
        </foreach>
        </if>
        <if test="userIds!=null">
         or u.user_id in
        <foreach collection="userIds" item="userId" open="(" close=")" separator="," >
            #{userId}
        </foreach>
         </if>
        </where>
    </select>


    <select id="findUserByDeptId" resultType="com.xoa.model.users.Users" >
        select u.USER_NAME as userName,u.USER_PRIV userPriv,u.user_priv_name as userPrivName,u.user_id as userId,u.dept_id as deptId,u.USER_SECRECY,d.dept_name as deptName, u.UID as uid,u.avatar as avatar,u.sex as sex
        from user u ,department d
        WHERE u.DEPT_ID = d.DEPT_ID AND u.not_login !=1 AND u.DEPT_ID !=0
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%') )
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="findUserByDeptId" resultType="com.xoa.model.users.Users"  databaseId="kingbase">
        select u.USER_NAME as userName,u.USER_PRIV userPriv,u.user_priv_name as userPrivName,u.user_id as userId,u.dept_id as deptId,u.USER_SECRECY,d.dept_name as deptName, u.UID as uid,u.avatar as avatar,u.sex as sex
        from "user" u ,department d
        WHERE u.DEPT_ID = d.DEPT_ID AND u.not_login !=1 AND u.DEPT_ID !=0
        AND (u.DEPT_ID = #{deptId} or u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')
        OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%') )
        <if test="jobId != null and jobId != '' ">
            and u.JOB_ID = #{jobId}
        </if>
        <if test="postId != null and postId != '' ">
            and u.POST_ID = #{postId}
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getAuditingUsers" resultMap="UserResultMap">
        SELECT
            USER_ID,
            USER_NAME
        FROM
            USER
        <where>
            <if test="userIds != null">
                AND USER_ID IN
                <foreach collection="userIds" open="(" close=")" separator="," item="userId">
                    #{userId}
                </foreach>
            </if>
            <if test="deptIds != null">
                AND DEPT_ID IN
                <foreach collection="deptIds" open="(" close=")" separator="," item="deptId">
                    #{deptId}
                </foreach>
            </if>
        </where>
    </select>

    <select id="getUsersByDeptIdAndModule" parameterType="map" resultMap="UserResultMap">
        select <include refid="U_Column_List" /> from user u ,department d ,user_ext ue
        WHERE  u.uid=ue.uid AND u.dept_id!=0  AND u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId},',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId},',%')
        ))
        <if test="moduleUserIds != null">
            and u.USER_ID in
            <foreach collection="moduleUserIds" item="moduleUserId" open="(" close=")" separator=",">
                #{moduleUserId}
            </foreach>
        </if>
        <if test="moduleDeptIds != null">
            and u.DEPT_ID in
            <foreach collection="moduleDeptIds" item="moduleDeptId" open="(" close=")" separator=",">
                #{moduleDeptId}
            </foreach>
        </if>
        <if test="moduleRolePrivNo != null ">
            and u.USER_PRIV_NO &gt; #{moduleRolePrivNo}
        </if>
        <if test="moduleRolePrivIds != null ">
            and u.USER_PRIV in
            <foreach collection="moduleRolePrivIds" item="roleIds" open="(" close=")" separator="," >
                #{roleIds}
            </foreach>
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>

    <select id="getUsersByDeptIdAndModule" parameterType="map" resultMap="UserResultMap" databaseId="kingbase">
        select <include refid="U_Column_List_KB" /> from "user" u ,department d ,user_ext ue
        WHERE  u.uid=ue.uid AND u.dept_id!=0  AND u.DEPT_ID = d.DEPT_ID
        AND (
        u.DEPT_ID = #{deptId}
        OR (
        u.DEPT_ID_OTHER LIKE CONCAT('%,',#{deptId}::VARCHAR,',%')  OR u.DEPT_ID_OTHER LIKE CONCAT(#{deptId}::VARCHAR,',%')
        ))
        <if test="moduleUserIds != null">
            and u.USER_ID in
            <foreach collection="moduleUserIds" item="moduleUserId" open="(" close=")" separator=",">
                #{moduleUserId}
            </foreach>
        </if>
        <if test="moduleDeptIds != null">
            and u.DEPT_ID in
            <foreach collection="moduleDeptIds" item="moduleDeptId" open="(" close=")" separator=",">
                #{moduleDeptId}
            </foreach>
        </if>
        <if test="moduleRolePrivNo != null ">
            and u.USER_PRIV_NO &gt; #{moduleRolePrivNo}
        </if>
        <if test="moduleRolePrivIds != null ">
            and u.USER_PRIV in
            <foreach collection="moduleRolePrivIds" item="roleIds" open="(" close=")" separator="," >
                #{roleIds}
            </foreach>
        </if>
        ORDER BY u.user_priv_no,u.user_no,u.user_name
    </select>
    
    <update id="editUserSecrecy" parameterType="com.xoa.model.users.Users">
        update user
        <set>
            <if test="postPriv != null">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null">
                POST_DEPT = #{postDept},
            </if>
            <if test="userSecrecy != null">
                USER_SECRECY = #{userSecrecy},
            </if>
            <if test="notLogin != null">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notMobileLogin != null">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
        </set>
        where UID = #{uid}
    </update>

    <update id="editUserSecrecy" parameterType="com.xoa.model.users.Users" databaseId="kingbase">
        update "user"
        <set>
            <if test="postPriv != null">
                POST_PRIV = #{postPriv},
            </if>
            <if test="postDept != null">
                POST_DEPT = #{postDept},
            </if>
            <if test="userSecrecy != null">
                USER_SECRECY = #{userSecrecy},
            </if>
            <if test="notLogin != null">
                NOT_LOGIN = #{notLogin},
            </if>
            <if test="notMobileLogin != null">
                NOT_MOBILE_LOGIN = #{notMobileLogin},
            </if>
        </set>
        where UID = #{uid}
    </update>

    <select id="queryUserByUserName" resultMap="UserResultMap">
        SELECT <include refid="Column_List" /> FROM USER WHERE USER_NAME = #{userName}
    </select>
</mapper>


