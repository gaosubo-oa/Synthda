<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xoa.dao.equipment.EquipCapyMapper" >
  <resultMap id="BaseResultMap" type="com.xoa.model.equipment.EquipCapy" >
  <!--
    WARNING - @mbggenerated
    This element is automatically generated by MyBatis Generator, do not modify.
  -->
  <id column="CAPY_ID" property="capyId" jdbcType="INTEGER" />
  <result column="CAPY_NAME" property="capyName" jdbcType="VARCHAR" />
  <result column="CAPY_STATUS" property="capyStatus" jdbcType="INTEGER" />
  <result column="UNIT_LIST" property="unitIds" jdbcType="VARCHAR" />
  <result column="INPUT_TYPE" property="inputType" jdbcType="VARCHAR" />
  <result column="OPERAT_MODE" property="operatMode" jdbcType="VARCHAR" />
  <result column="DATA_SOURCE" property="dataSource" jdbcType="VARCHAR" />
    <result column="TYPE_CODE" property="typeCode" jdbcType="VARCHAR" />
    <result column="PROTOCOL_FIELD" property="protocolField" jdbcType="VARCHAR" />
    <result column="MEMO" property="memo" jdbcType="VARCHAR" />
</resultMap>

  <resultMap id="CommondCodeResultMap" type="com.xoa.model.equipment.EquipCapy" >
    <id column="CODE_TYEP_ID" property="codeTypeId" jdbcType="INTEGER" />
    <result column="CODE_TYEP_NO" property="codeTypeNo" jdbcType="VARCHAR" />
    <result column="CODE_TYEP_NAME" property="codeTypeName" jdbcType="VARCHAR" />
    <result column="PARENT_TYEP_NO" property="parentTypeNo" jdbcType="VARCHAR" />
    <result column="PROJ_STATUS_ID" property="projStatusId" jdbcType="VARCHAR" />
  </resultMap>

  <resultMap id="SysCodeResultMap" type="com.xoa.model.equipment.EquipCapy" >
    <id column="CODE_ID" property="codeTypeId" jdbcType="INTEGER" />
    <result column="CODE_NO" property="codeTypeNo" jdbcType="VARCHAR" />
    <result column="CODE_NAME" property="codeTypeName" jdbcType="VARCHAR" />
    <result column="PARENT_NO" property="parentTypeNo" jdbcType="VARCHAR" />
   <!-- <result column="PROJ_STATUS_ID" property="projStatusId" jdbcType="VARCHAR" />-->
  </resultMap>


  <!--前面commoncode得东西太多，不知道写哪，所以写到我自己得方法里， -->
  <select id="selectCommonCodeByTypeNo" resultMap="SysCodeResultMap" parameterType="String">
    select CODE_ID,CODE_NO,CODE_NAME,PARENT_NO
    from sys_code
    where CODE_NO=#{codeTypeNo,jdbcType=VARCHAR}
    <if test="parentNo!=null and ''!=parentNo">
      AND PARENT_NO = #{parentNo,jdbcType=VARCHAR}
    </if>
  </select>
  <!--这是一个根据 PARENT_TYEP_NO 查询commoncode-->
<!-- 这里的联查和taskId都是为了满足操作细则模块所添加，不影响其他模块使用 -->
  <select id="selectCommonCode" resultMap="SysCodeResultMap" parameterType="map">
    SELECT
    CODE_ID,
    CODE_NO,
    CODE_NAME,
    PARENT_NO
        /*lps.PROJ_STATUS_ID*/
    FROM
    sys_code lcc
        /*LEFT JOIN lims_proj_status lps ON lcc.CODE_TYEP_NO = lps.TEST_STATUS_CODE*/
    WHERE 1=1
        AND lcc.PARENT_NO =#{parentTypeNo}
        <!--<if test="taskId!=null and ''!=taskId">
          AND lps.PROJ_TASK_ID = #{taskId}
        </if>-->
    GROUP BY
        lcc.CODE_NO
    ORDER BY
    lcc.CODE_ORDER
  </select>

  <sql id="Base_Column_List" >
    CAPY_ID, CAPY_NAME, CAPY_STATUS, UNIT_LIST, INPUT_TYPE, OPERAT_MODE, DATA_SOURCE, TYPE_CODE,PROTOCOL_FIELD,
    MEMO
  </sql>
  <select id="selectEquipCapy" resultMap="BaseResultMap">
    select
        <include refid="Base_Column_List"/>
    from
        lims_equip_capy
    where
    <!--作废和新建的数据不可以使用，所以查询不出现 -->
        CAPY_STATUS=1
    GROUP BY TYPE_CODE
  </select>
  <select id="findEquipCapybytypeCode" parameterType="map" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from
    lims_equip_capy
    where
    <!--作废和新建的数据不可以使用，所以查询不出现 -->
    CAPY_STATUS=1
    AND TYPE_CODE=#{typeCode}
  </select>

  <select id="selectAllEquipCapy" resultType="map" resultMap="BaseResultMap">
    select
        <include refid="Base_Column_List"/>
    from
        lims_equip_capy
    WHERE 1=1
    <if test="typeCode != null">
     AND  TYPE_CODE=#{typeCode}
    </if>
  </select>

  <select id="countAllEquipment" resultType="java.lang.Integer" >
    select count(CAPY_ID) total from lims_equip_capy
  </select>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from lims_equip_capy
    where CAPY_ID = #{capyId,jdbcType=INTEGER}
  </select>
  <select id="selCapyIdAndTypeCode" resultMap="BaseResultMap" parameterType="map" >
    select
    <include refid="Base_Column_List" />
    from lims_equip_capy
    where CAPY_ID = #{capyId,jdbcType=INTEGER}
    <if test="typeCode!=null">
      AND TYPE_CODE=#{typeCode}
    </if>
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from lims_equip_capy
    where CAPY_ID = #{capyId,jdbcType=INTEGER}
  </delete>

  <select id="selctByName" parameterType="String" resultMap="CommondCodeResultMap">
    SELECT
    *
    FROM lims_common_code
      WHERE
   CODE_TYEP_NAME=#{codeTypeName}
  </select>
  <insert id="insert" parameterType="com.xoa.model.equipment.EquipCapy" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into lims_equip_capy (CAPY_ID, CAPY_NAME, CAPY_STATUS, 
      UNIT_LIST, INPUT_TYPE, OPERAT_MODE, 
      DATA_SOURCE,TYPE_CODE,PROTOCOL_FIELD, MEMO)
    values (#{capyId,jdbcType=INTEGER}, #{capyName,jdbcType=VARCHAR}, #{capyStatus,jdbcType=VARCHAR}, 
      #{unitIds,jdbcType=VARCHAR}, #{inputType,jdbcType=VARCHAR}, #{operatMode,jdbcType=VARCHAR}, 
      #{dataSource,jdbcType=VARCHAR}, #{typeCode,jdbcType=VARCHAR},  #{protocolField,jdbcType=VARCHAR},#{memo,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.xoa.model.equipment.EquipCapy" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into lims_equip_capy
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="capyId != null" >
        CAPY_ID,
      </if>
      <if test="capyName != null" >
        CAPY_NAME,
      </if>
      <if test="capyStatus != null" >
        CAPY_STATUS,
      </if>
      <if test="unitIds != null" >
        UNIT_LIST,
      </if>
      <if test="inputType != null" >
        INPUT_TYPE,
      </if>
      <if test="operatMode != null" >
        OPERAT_MODE,
      </if>
      <if test="dataSource != null" >
        DATA_SOURCE,
      </if>
      <if test="typeCode != null" >
        TYPE_CODE,
      </if>
      <if test="protocolField != null" >
        PROTOCOL_FIELD,
      </if>
      <if test="memo != null" >
        MEMO,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="capyId != null" >
        #{capyId,jdbcType=INTEGER},
      </if>
      <if test="capyName != null" >
        #{capyName,jdbcType=VARCHAR},
      </if>
      <if test="capyStatus != null" >
        #{capyStatus,jdbcType=VARCHAR},
      </if>
      <if test="unitIds != null" >
        #{unitIds,jdbcType=VARCHAR},
      </if>
      <if test="inputType != null" >
        #{inputType,jdbcType=VARCHAR},
      </if>
      <if test="operatMode != null" >
        #{operatMode,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        #{dataSource,jdbcType=VARCHAR},
      </if>
      <if test="typeCode != null" >
        #{typeCode,jdbcType=VARCHAR},
      </if>
      <if test="protocolField != null" >
        #{protocolField,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="com.xoa.model.equipment.EquipCapy" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_capy
    <set >
      <if test="capyName != null" >
        CAPY_NAME = #{capyName,jdbcType=VARCHAR},
      </if>
      <if test="capyStatus != null" >
        CAPY_STATUS = #{capyStatus,jdbcType=VARCHAR},
      </if>
      <if test="unitIds != null" >
        UNIT_LIST = #{unitIds,jdbcType=VARCHAR},
      </if>
      <if test="inputType != null" >
        INPUT_TYPE = #{inputType,jdbcType=VARCHAR},
      </if>
      <if test="operatMode != null" >
        OPERAT_MODE = #{operatMode,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        DATA_SOURCE = #{dataSource,jdbcType=VARCHAR},
      </if>
      <if test="typeCode != null" >
        TYPE_CODE = #{typeCode,jdbcType=VARCHAR},
      </if>
      <if test="protocolField != null" >
        PROTOCOL_FIELD = #{protocolField,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        MEMO = #{memo,jdbcType=VARCHAR},
      </if>
    </set>
    where CAPY_ID = #{capyId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.xoa.model.equipment.EquipCapy" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_capy
    set CAPY_NAME = #{capyName,jdbcType=VARCHAR},
      CAPY_STATUS = #{capyStatus,jdbcType=VARCHAR},
      UNIT_LIST = #{unitIds,jdbcType=VARCHAR},
      INPUT_TYPE = #{inputType,jdbcType=VARCHAR},
      OPERAT_MODE = #{operatMode,jdbcType=VARCHAR},
      DATA_SOURCE = #{dataSource,jdbcType=VARCHAR},
      TYPE_CODE = #{typeCode,jdbcType=VARCHAR},
    PROTOCOL_FIELD = #{protocolField,jdbcType=VARCHAR},
    MEMO = #{memo,jdbcType=VARCHAR}
    where CAPY_ID = #{capyId,jdbcType=INTEGER}
  </update>
<!-- 更新状态 -->
  <update id="updateStatusByPrimaryKey" parameterType="int" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update
        lims_equip_capy
    set
        CAPY_STATUS = #{capyStatus,jdbcType=INTEGER}
    where
        CAPY_ID = #{capyId,jdbcType=INTEGER}
  </update>

 <!-- List<EquipCapy> findEquipCapyBaMap(Map map);-->
  <select id="findEquipCapyBaMap" resultMap="BaseResultMap" parameterType="map">
    select
    <include refid="Base_Column_List" />
    from lims_equip_capy
    where CAPY_ID in
    <foreach collection="capyIds" separator="," open="(" index="index" close=")" item="capyId">
      #{capyId}
    </foreach>
  </select>

</mapper>