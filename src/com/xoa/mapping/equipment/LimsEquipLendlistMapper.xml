<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xoa.dao.equipment.LimsEquipLendlistMapper">
  <resultMap id="BaseResultMap" type="com.xoa.model.equipment.LimsEquipLendlist">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="LEND_LIST_ID" jdbcType="INTEGER" property="lendListId" />
    <result column="LEND_ID" jdbcType="INTEGER" property="lendId" />
    <result column="EQUIP_ID" jdbcType="INTEGER" property="equipId" />
    <result column="EQUIP_NAME" jdbcType="VARCHAR" property="equipName" />
    <result column="EQUIP_NO" jdbcType="VARCHAR" property="equipNo" />
    <result column="RETURN_STATUS" jdbcType="INTEGER" property="returnStatus" />
    <result column="MODEL_NO" jdbcType="VARCHAR" property="modelNo" />
    <result column="SPEC" jdbcType="VARCHAR" property="spec" />
    <result column="FACTORY_NO" jdbcType="VARCHAR" property="factoryNo" />
    <result column="RETURN_TIME" jdbcType="VARCHAR" property="returnTime" />
    <result column="RETURN_USER" jdbcType="VARCHAR" property="returnUser" />
    <result column="RETURN_OPERATOR_USER" jdbcType="VARCHAR" property="returnOperatorUser" />
    <result column="EQUIP_STATUAS_CODE" jdbcType="VARCHAR" property="equipStatuasCode" />
    <result column="EQUIP_TYPE_ID" jdbcType="INTEGER" property="equipTypeId" />
    <result column="EQUIP_TYPE_NAME" jdbcType="VARCHAR" property="equipTypeName" />
    <result column="DEPT_ID" jdbcType="VARCHAR" property="deptId" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    LEND_LIST_ID, LEND_ID, EQUIP_ID, EQUIP_NAME, EQUIP_NO, RETURN_STATUS, MODEL_NO, SPEC,
    FACTORY_NO, RETURN_TIME, RETURN_USER, RETURN_OPERATOR_USER, EQUIP_STATUAS_CODE, EQUIP_TYPE_ID, 
    EQUIP_TYPE_NAME
  </sql>
  <select id="selectByExample" parameterType="com.xoa.model.equipment.LimsEquipLendlistExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from lims_equip_lendlist
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from lims_equip_lendlist
    where LEND_LIST_ID = #{lendListId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from lims_equip_lendlist
    where LEND_LIST_ID = #{lendListId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.xoa.model.equipment.LimsEquipLendlistExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from lims_equip_lendlist
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.xoa.model.equipment.LimsEquipLendlist">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into lims_equip_lendlist (LEND_LIST_ID, LEND_ID, EQUIP_ID, 
      EQUIP_NAME, EQUIP_NO, RETURN_STATUS, 
      MODEL_NO, SPEC, FACTORY_NO, 
      RETURN_TIME, RETURN_USER, RETURN_OPERATOR_USER, 
      EQUIP_STATUAS_CODE, EQUIP_TYPE_ID, EQUIP_TYPE_NAME
      )
    values (#{lendListId,jdbcType=INTEGER}, #{lendId,jdbcType=INTEGER}, #{equipId,jdbcType=INTEGER}, 
      #{equipName,jdbcType=VARCHAR}, #{equipNo,jdbcType=VARCHAR}, #{returnStatus,jdbcType=INTEGER}, 
      #{modelNo,jdbcType=VARCHAR}, #{spec,jdbcType=VARCHAR}, #{factoryNo,jdbcType=VARCHAR},
      #{returnTime,jdbcType=VARCHAR}, #{returnUser,jdbcType=VARCHAR}, #{returnOperatorUser,jdbcType=VARCHAR}, 
      #{equipStatuasCode,jdbcType=VARCHAR}, #{equipTypeId,jdbcType=INTEGER}, #{equipTypeName,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.xoa.model.equipment.LimsEquipLendlist">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into lims_equip_lendlist
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="lendListId != null">
        LEND_LIST_ID,
      </if>
      <if test="lendId != null">
        LEND_ID,
      </if>
      <if test="equipId != null">
        EQUIP_ID,
      </if>
      <if test="equipName != null">
        EQUIP_NAME,
      </if>
      <if test="equipNo != null">
        EQUIP_NO,
      </if>
      <if test="returnStatus != null">
        RETURN_STATUS,
      </if>
      <if test="modelNo != null">
        MODEL_NO,
      </if>
      <if test="spec != null">
        SPEC,
      </if>
      <if test="factoryNo != null">
        FACTORY_NO,
      </if>
      <if test="returnTime != null">
        RETURN_TIME,
      </if>
      <if test="returnUser != null">
        RETURN_USER,
      </if>
      <if test="returnOperatorUser != null">
        RETURN_OPERATOR_USER,
      </if>
      <if test="equipStatuasCode != null">
        EQUIP_STATUAS_CODE,
      </if>
      <if test="equipTypeId != null">
        EQUIP_TYPE_ID,
      </if>
      <if test="equipTypeName != null">
        EQUIP_TYPE_NAME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="lendListId != null">
        #{lendListId,jdbcType=INTEGER},
      </if>
      <if test="lendId != null">
        #{lendId,jdbcType=INTEGER},
      </if>
      <if test="equipId != null">
        #{equipId,jdbcType=INTEGER},
      </if>
      <if test="equipName != null">
        #{equipName,jdbcType=VARCHAR},
      </if>
      <if test="equipNo != null">
        #{equipNo,jdbcType=VARCHAR},
      </if>
      <if test="returnStatus != null">
        #{returnStatus,jdbcType=INTEGER},
      </if>
      <if test="modelNo != null">
        #{modelNo,jdbcType=VARCHAR},
      </if>
      <if test="spec != null">
        #{spec,jdbcType=VARCHAR},
      </if>
      <if test="factoryNo != null">
        #{factoryNo,jdbcType=VARCHAR},
      </if>
      <if test="returnTime != null">
        #{returnTime,jdbcType=VARCHAR},
      </if>
      <if test="returnUser != null">
        #{returnUser,jdbcType=VARCHAR},
      </if>
      <if test="returnOperatorUser != null">
        #{returnOperatorUser,jdbcType=VARCHAR},
      </if>
      <if test="equipStatuasCode != null">
        #{equipStatuasCode,jdbcType=VARCHAR},
      </if>
      <if test="equipTypeId != null">
        #{equipTypeId,jdbcType=INTEGER},
      </if>
      <if test="equipTypeName != null">
        #{equipTypeName,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.xoa.model.equipment.LimsEquipLendlistExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from lims_equip_lendlist
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_lendlist
    <set>
      <if test="record.lendListId != null">
        LEND_LIST_ID = #{record.lendListId,jdbcType=INTEGER},
      </if>
      <if test="record.lendId != null">
        LEND_ID = #{record.lendId,jdbcType=INTEGER},
      </if>
      <if test="record.equipId != null">
        EQUIP_ID = #{record.equipId,jdbcType=INTEGER},
      </if>
      <if test="record.equipName != null">
        EQUIP_NAME = #{record.equipName,jdbcType=VARCHAR},
      </if>
      <if test="record.equipNo != null">
        EQUIP_NO = #{record.equipNo,jdbcType=VARCHAR},
      </if>
      <if test="record.returnStatus != null">
        RETURN_STATUS = #{record.returnStatus,jdbcType=INTEGER},
      </if>
      <if test="record.modelNo != null">
        MODEL_NO = #{record.modelNo,jdbcType=VARCHAR},
      </if>
      <if test="record.spec != null">
        SPEC = #{record.spec,jdbcType=VARCHAR},
      </if>
      <if test="record.factoryNo != null">
        FACTORY_NO = #{record.factoryNo,jdbcType=VARCHAR},
      </if>
      <if test="record.returnTime != null">
        RETURN_TIME = #{record.returnTime,jdbcType=VARCHAR},
      </if>
      <if test="record.returnUser != null">
        RETURN_USER = #{record.returnUser,jdbcType=VARCHAR},
      </if>
      <if test="record.returnOperatorUser != null">
        RETURN_OPERATOR_USER = #{record.returnOperatorUser,jdbcType=VARCHAR},
      </if>
      <if test="record.equipStatuasCode != null">
        EQUIP_STATUAS_CODE = #{record.equipStatuasCode,jdbcType=VARCHAR},
      </if>
      <if test="record.equipTypeId != null">
        EQUIP_TYPE_ID = #{record.equipTypeId,jdbcType=INTEGER},
      </if>
      <if test="record.equipTypeName != null">
        EQUIP_TYPE_NAME = #{record.equipTypeName,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_lendlist
    set LEND_LIST_ID = #{record.lendListId,jdbcType=INTEGER},
      LEND_ID = #{record.lendId,jdbcType=INTEGER},
      EQUIP_ID = #{record.equipId,jdbcType=INTEGER},
      EQUIP_NAME = #{record.equipName,jdbcType=VARCHAR},
      EQUIP_NO = #{record.equipNo,jdbcType=VARCHAR},
      RETURN_STATUS = #{record.returnStatus,jdbcType=INTEGER},
      MODEL_NO = #{record.modelNo,jdbcType=VARCHAR},
      SPEC = #{record.spec,jdbcType=VARCHAR},
      FACTORY_NO = #{record.factoryNo,jdbcType=VARCHAR},
      RETURN_TIME = #{record.returnTime,jdbcType=VARCHAR},
      RETURN_USER = #{record.returnUser,jdbcType=VARCHAR},
      RETURN_OPERATOR_USER = #{record.returnOperatorUser,jdbcType=VARCHAR},
      EQUIP_STATUAS_CODE = #{record.equipStatuasCode,jdbcType=VARCHAR},
      EQUIP_TYPE_ID = #{record.equipTypeId,jdbcType=INTEGER},
      EQUIP_TYPE_NAME = #{record.equipTypeName,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.xoa.model.equipment.LimsEquipLendlist">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_lendlist
    <set>
      <if test="lendId != null">
        LEND_ID = #{lendId,jdbcType=INTEGER},
      </if>
      <if test="equipId != null">
        EQUIP_ID = #{equipId,jdbcType=INTEGER},
      </if>
      <if test="equipName != null">
        EQUIP_NAME = #{equipName,jdbcType=VARCHAR},
      </if>
      <if test="equipNo != null">
        EQUIP_NO = #{equipNo,jdbcType=VARCHAR},
      </if>
      <if test="returnStatus != null">
        RETURN_STATUS = #{returnStatus,jdbcType=INTEGER},
      </if>
      <if test="modelNo != null">
        MODEL_NO = #{modelNo,jdbcType=VARCHAR},
      </if>
      <if test="spec != null">
        SPEC = #{spec,jdbcType=VARCHAR},
      </if>
      <if test="factoryNo != null">
        FACTORY_NO = #{factoryNo,jdbcType=VARCHAR},
      </if>
      <if test="returnTime != null">
        RETURN_TIME = #{returnTime,jdbcType=VARCHAR},
      </if>
      <if test="returnUser != null">
        RETURN_USER = #{returnUser,jdbcType=VARCHAR},
      </if>
      <if test="returnOperatorUser != null">
        RETURN_OPERATOR_USER = #{returnOperatorUser,jdbcType=VARCHAR},
      </if>
      <if test="equipStatuasCode != null">
        EQUIP_STATUAS_CODE = #{equipStatuasCode,jdbcType=VARCHAR},
      </if>
      <if test="equipTypeId != null">
        EQUIP_TYPE_ID = #{equipTypeId,jdbcType=INTEGER},
      </if>
      <if test="equipTypeName != null">
        EQUIP_TYPE_NAME = #{equipTypeName,jdbcType=VARCHAR},
      </if>
    </set>
    where LEND_LIST_ID = #{lendListId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.xoa.model.equipment.LimsEquipLendlist">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lims_equip_lendlist
    set LEND_ID = #{lendId,jdbcType=INTEGER},
      EQUIP_ID = #{equipId,jdbcType=INTEGER},
      EQUIP_NAME = #{equipName,jdbcType=VARCHAR},
      EQUIP_NO = #{equipNo,jdbcType=VARCHAR},
      RETURN_STATUS = #{returnStatus,jdbcType=INTEGER},
      MODEL_NO = #{modelNo,jdbcType=VARCHAR},
      SPEC = #{spec,jdbcType=VARCHAR},
      FACTORY_NO = #{factoryNo,jdbcType=VARCHAR},
      RETURN_TIME = #{returnTime,jdbcType=VARCHAR},
      RETURN_USER = #{returnUser,jdbcType=VARCHAR},
      RETURN_OPERATOR_USER = #{returnOperatorUser,jdbcType=VARCHAR},
      EQUIP_STATUAS_CODE = #{equipStatuasCode,jdbcType=VARCHAR},
      EQUIP_TYPE_ID = #{equipTypeId,jdbcType=INTEGER},
      EQUIP_TYPE_NAME = #{equipTypeName,jdbcType=VARCHAR}
    where LEND_LIST_ID = #{lendListId,jdbcType=INTEGER}
  </update>

  <select id="select" parameterType="integer" resultMap="BaseResultMap">
    SELECT
    *
    FROM  lims_equip_lendlist WHERE
    <if test="lendId!=null">
      LEND_ID=#{lendId}
    </if>
    <if test="returnStatus!=null">
    AND   RETURN_STATUS=#{returnStatus}
    </if>
  </select>

  <update id="updateBylendId" parameterType="com.xoa.model.equipment.LimsEquipLendlist">
      update lims_equip_lendlist
      <set>
        <if test="returnStatus != null">
          RETURN_STATUS = #{returnStatus},
        </if>
        <if test="returnTime != null">
          RETURN_TIME = #{returnTime},
        </if>
        <if test="returnUser != null">
          RETURN_USER = #{returnUser},
        </if>
        <if test="returnOperatorUser != null">
          RETURN_OPERATOR_USER = #{returnOperatorUser},
        </if>
      </set>
    where LEND_ID = #{lendId} AND RETURN_STATUS=0
  </update>

  <delete id="deleteBylendId" parameterType="integer">
      delete from lims_equip_lendlist
     where LEND_ID = #{lendId,jdbcType=INTEGER}
  </delete>

  <select id="resulrApproval" resultMap="BaseResultMap">
   SELECT
      *
  FROM
      lims_equip_lendlist
  WHERE
      LEND_ID IN ( SELECT LEND_ID FROM lims_equip_lend WHERE APPROVAL_STATUS IN ('1') )
      AND EQUIP_ID IN ( SELECT EQUIP_ID FROM lims_equip_lendlist WHERE LEND_ID = #{lendIds} )
  </select>


  <select id="resultCult" parameterType="integer" resultMap="BaseResultMap">
   SELECT
      *
  FROM
      lims_equip_lendlist
  WHERE
      LEND_ID IN ( SELECT LEND_ID FROM lims_equip_lend WHERE APPROVAL_STATUS IN ( '1', '2' ) )  AND EQUIP_ID=#{equipId}
  </select>

  <select id="resultCult1" parameterType="map" resultMap="BaseResultMap">
    SELECT
    *
    FROM
    lims_equip_lendlist
    WHERE
    <if test="equipId!=null">
      EQUIP_ID=#{equipId}
    </if>
     and LEND_ID=#{lendId}
  </select>
<select id="findEquipIdByLendIdand0" parameterType="Integer" resultMap="BaseResultMap">
  select
  <include refid="Base_Column_List" />
  from
  lims_equip_lendlist
  WHERE
  LEND_ID=#{lendId}
  and
  RETURN_STATUS = 0

</select>
</mapper>