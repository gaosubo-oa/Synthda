<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xoa.dev.crossEmail.dao.EmailBodyplusMapper" >
  <resultMap id="BaseResultMap" type="com.xoa.dev.crossEmail.model.EmailBodyplus" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="BODY_ID" property="bodyId" jdbcType="INTEGER" />
    <result column="FROM_NAME1" property="fromName1" jdbcType="VARCHAR" />
    <result column="FROM_ID" property="fromId" jdbcType="VARCHAR" />
    <result column="SUBJECT" property="subject" jdbcType="VARCHAR" />
    <result column="SEND_TIME" property="sendTime" jdbcType="INTEGER" />
    <result column="SEND_FLAG" property="sendFlag" jdbcType="VARCHAR" />
    <result column="SMS_REMIND" property="smsRemind" jdbcType="VARCHAR" />
    <result column="IMPORTANT" property="important" jdbcType="VARCHAR" />
    <result column="SIZE" property="size" jdbcType="BIGINT" />
    <result column="FROM_WEBMAIL_ID" property="fromWebmailId" jdbcType="INTEGER" />
    <result column="FROM_WEBMAIL" property="fromWebmail" jdbcType="VARCHAR" />
    <result column="WEBMAIL_FLAG" property="webmailFlag" jdbcType="CHAR" />
    <result column="RECV_FROM_NAME" property="recvFromName" jdbcType="VARCHAR" />
    <result column="RECV_FROM" property="recvFrom" jdbcType="VARCHAR" />
    <result column="RECV_TO_ID" property="recvToId" jdbcType="INTEGER" />
    <result column="RECV_TO" property="recvTo" jdbcType="VARCHAR" />
    <result column="IS_WEBMAIL" property="isWebmail" jdbcType="CHAR" />
    <result column="IS_WF" property="isWf" jdbcType="CHAR" />
    <result column="KEYWORD" property="keyword" jdbcType="VARCHAR" />
    <result column="SECRET_LEVEL" property="secretLevel" jdbcType="INTEGER" />
    <result column="AUDIT_MAN" property="auditMan" jdbcType="VARCHAR" />
    <result column="EXAM_FLAG" property="examFlag" jdbcType="VARCHAR" />
    <result column="WORD_FLAG" property="wordFlag" jdbcType="VARCHAR" />

  </resultMap>

  <resultMap id="BaseResultMap2" type="com.xoa.dev.crossEmail.model.EmailBodyPlusModel">
    <id column="BODY_ID" property="bodyId" javaType="INTEGER" />
    <result column="FROM_ID" property="fromId" javaType="String" />
    <result column="fromName" property="fromName" javaType="String" />
    <result column="FROM_NAME1" property="fromName1" jdbcType="VARCHAR" />
    <result column="SUBJECT" property="subject" javaType="String" />
    <result column="SEND_TIME" property="sendTime" javaType="INTEGER" />
    <result column="SEND_FLAG" property="sendFlag" javaType="String" />
    <result column="SMS_REMIND" property="smsRemind" javaType="String" />
    <result column="IMPORTANT" property="important" javaType="String" />
    <result column="SIZE" property="size" javaType="Long" />
    <result column="FROM_WEBMAIL_ID" property="fromWebmailId"
            javaType="INTEGER" />
    <result column="FROM_WEBMAIL" property="fromWebmail" javaType="String" />
    <result column="WEBMAIL_FLAG" property="webmailFlag" javaType="String" />
    <result column="RECV_FROM_NAME" property="recvFromName"
            javaType="String" />
    <result column="RECV_FROM" property="recvFrom" javaType="String" />
    <result column="RECV_TO_ID" property="recvToId" javaType="INTEGER" />
    <result column="RECV_TO" property="recvTo" javaType="String" />
    <result column="IS_WEBMAIL" property="isWebmail" javaType="String" />
    <result column="IS_WF" property="isWf" javaType="String" />
    <result column="KEYWORD" property="keyword" javaType="String" />
    <result column="SECRET_LEVEL" property="secretLevel" javaType="INTEGER" />
    <result column="AUDIT_MAN" property="auditMan" javaType="String" />
    <result column="TO_ID2" property="toId2" javaType="String" />
    <result column="TO_ID2_NAME" property="toId2Name" javaType="String" />
    <result column="COPY_TO_ID" property="copyToId" javaType="String" />
    <result column="COPY_TO_ID_NAME" property="copyToIdName" javaType="String" />
    <result column="SECRET_TO_ID" property="secretToId" javaType="String" />
    <result column="SECRET_TO_ID_NAME" property="secretToIdName" javaType="String" />
    <result column="CONTENT" property="content" javaType="String" />
    <result column="ATTACHMENT_ID" property="attachmentId"
            javaType="String" />
    <result column="ATTACHMENT_NAME" property="attachmentName"
            javaType="String" />
    <result column="TO_WEBMAIL" property="toWebmail" javaType="String" />
    <result column="COMPRESS_CONTENT" property="compressContent"
            javaType="byte[]" />
    <result column="WEBMAIL_CONTENT" property="webmailContent"
            javaType="byte[]" />
    <result column="AUDIT_REMARK" property="auditRemark" javaType="String" />
    <result column="COPY_TO_WEBMAIL" property="copyToWebmail"
            javaType="String" />
    <result column="SECRET_TO_WEBMAIL" property="secretToWebmail"
            javaType="String" />
    <result column="PRAISE" property="praise" javaType="String" />
    <result property="count1" column="count1" />
    <result property="count2" column="count2" />
    <result property="count3" column="count3" />
    <result property="count4" column="count4" />
    <result property="count5" column="count5" />
    <result property="count6" column="count6" />
    <result property="count7" column="count7" />
    <result property="count8" column="count8" />
    <result property="count9" column="count9" />
    <result property="count10" column="count10" />
    <result property="count11" column="count11" />
    <result property="count12" column="count12" />
    <result property="Months" column="Months" />
    <result property="deptName" column="DEPT_NAME" />
    <result property="deptId" column="DEPT_ID" />
    <result property="examFlag" column="EXAM_FLAG" />
    <result property="wordFlag" column="WORD_FLAG" />
    <result property="sex" column="SEX" />
    <result property="avatar" column="AVATAR" />
    <result property="sexName" column="SEX_NAME" />
    <result property="userPrivName" column="USER_PRIV_NAME" />
    <association property="users" column="BODY_ID"
                 javaType="com.xoa.model.users.Users">
      <id column="UID" property="uid" />
      <result property="userId" column="USER_ID" />
      <result property="userName" column="USER_NAME" />
      <result property="sex" column="USER_SEX" />
      <result property="avatar" column="USER_AVATAR" />
    </association>
    <!-- 一对多收件人 -->
    <collection property="emailList" ofType="com.xoa.dev.crossEmail.model.EmailPlusModel"
                column="BODY_ID">
      <id column="EMAIL_ID" property="emailId" javaType="INTEGER" />
      <result column="TO_ID" property="toId" javaType="String" />
      <result column="READ_FLAG" property="readFlag" javaType="String" />
      <result column="DELETE_FLAG" property="deleteFlag" javaType="String" />
      <result column="BOX_ID" property="boxId" javaType="INTEGER" />
      <result column="BODY_ID" property="bodyId" javaType="INTEGER" />
      <result column="RECEIPT" property="receipt" javaType="String" />
      <result column="IS_F" property="isF" javaType="String" />
      <result column="IS_R" property="isR" javaType="String" />
      <result column="SIGN" property="sign" javaType="String" />
      <result column="withdraw_flag" property="withdrawFlag" javaType="String" />
    </collection>
    <!-- 一对多外部邮件 -->
    <collection property="webmailList" ofType="com.xoa.model.email.Webmail"
                column="MAIL_ID">
      <id column="MAIL_ID" property="mailId" javaType="Integer"/>
      <result column="EMAIL" property="email" javaType="String"/>
      <result column="USER_ID" property="userId" javaType="String"/>
      <result column="POP_SERVER" property="popServer" javaType="String"/>
      <result column="SMTP_SERVER" property="smtpServer" javaType="String"/>
      <result column="LOGIN_TYPE" property="loginType" javaType="String"/>
      <result column="SMTP_PASS" property="smtpPass" javaType="String"/>
      <result column="EMAIL_USER" property="emailUser" javaType="String"/>
      <result column="EMAIL_PASS" property="emailPass" javaType="String"/>
      <result column="POP3_PORT" property="pop3Port" javaType="Integer"/>
      <result column="SMTP_PORT" property="smtpPort" javaType="Integer"/>
      <result column="IS_DEFAULT" property="isDefault" javaType="String"/>
      <result column="POP3_SSL" property="pop3Ssl" javaType="String"/>
      <result column="SMTP_SSL" property="smtpSsl" javaType="String"/>
      <result column="QUOTA_LIMIT" property="quotaLimit" javaType="String"/>
      <result column="CHECK_FLAG" property="checkFlag" javaType="String"/>
      <result column="PRIORITY" property="priority" javaType="String"/>
      <result column="RECV_DEL" property="recvDel" javaType="String"/>
      <result column="RECV_REMIND" property="recvRemind" javaType="String"/>
      <result column="RECV_FW" property="recvFw" javaType="String"/>
      <result column="CREATE_USER" property="createUser" javaType="String"/>
      <result column="EMAIL_UID" property="emailUid" javaType="String"/>
    </collection>
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.xoa.dev.crossEmail.model.EmailBodyplusWithBLOBs" extends="BaseResultMap2" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="TO_ID2" property="toId2" jdbcType="LONGVARCHAR" />
    <result column="COPY_TO_ID" property="copyToId" jdbcType="LONGVARCHAR" />
    <result column="SECRET_TO_ID" property="secretToId" jdbcType="LONGVARCHAR" />
    <result column="CONTENT" property="content" jdbcType="LONGVARCHAR" />
    <result column="ATTACHMENT_ID" property="attachmentId" jdbcType="LONGVARCHAR" />
    <result column="ATTACHMENT_NAME" property="attachmentName" jdbcType="LONGVARCHAR" />
    <result column="TO_WEBMAIL" property="toWebmail" jdbcType="LONGVARCHAR" />
    <result column="COMPRESS_CONTENT" property="compressContent" jdbcType="LONGVARBINARY" />
    <result column="WEBMAIL_CONTENT" property="webmailContent" jdbcType="LONGVARBINARY" />
    <result column="AUDIT_REMARK" property="auditRemark" jdbcType="LONGVARCHAR" />
    <result column="COPY_TO_WEBMAIL" property="copyToWebmail" jdbcType="LONGVARCHAR" />
    <result column="SECRET_TO_WEBMAIL" property="secretToWebmail" jdbcType="LONGVARCHAR" />
    <result column="PRAISE" property="praise" jdbcType="LONGVARCHAR" />
  </resultMap>



  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    BODY_ID,FROM_NAME1, FROM_ID, SUBJECT, SEND_TIME, SEND_FLAG, SMS_REMIND, IMPORTANT, SIZE, FROM_WEBMAIL_ID,
    FROM_WEBMAIL, WEBMAIL_FLAG, RECV_FROM_NAME, RECV_FROM, RECV_TO_ID, RECV_TO, IS_WEBMAIL, 
    IS_WF, KEYWORD, SECRET_LEVEL, AUDIT_MAN, EXAM_FLAG, WORD_FLAG,SEX,SEX_NAME,AVATAR,USER_PRIV_NAME,COPY_TO_ID_NAME,
    SECRET_TO_ID,
    SECRET_TO_ID_NAME
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    TO_ID2, COPY_TO_ID, SECRET_TO_ID, CONTENT, ATTACHMENT_ID, ATTACHMENT_NAME, TO_WEBMAIL, 
    COMPRESS_CONTENT, WEBMAIL_CONTENT, AUDIT_REMARK, COPY_TO_WEBMAIL, SECRET_TO_WEBMAIL, 
    PRAISE
  </sql>
  <select id="selectByExampleWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from email_bodyplus
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from email_bodyplus
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <delete id="deleteByExample" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from email_bodyplus
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into email_bodyplus (BODY_ID,FROM_NAME1,FROM_ID, SUBJECT,
      SEND_TIME, SEND_FLAG, SMS_REMIND, 
      IMPORTANT, SIZE, FROM_WEBMAIL_ID, 
      FROM_WEBMAIL, WEBMAIL_FLAG, RECV_FROM_NAME, 
      RECV_FROM, RECV_TO_ID, RECV_TO, 
      IS_WEBMAIL, IS_WF, KEYWORD, 
      SECRET_LEVEL, AUDIT_MAN, EXAM_FLAG, 
      WORD_FLAG, TO_ID2, COPY_TO_ID, 
      SECRET_TO_ID, CONTENT, ATTACHMENT_ID, 
      ATTACHMENT_NAME, TO_WEBMAIL, COMPRESS_CONTENT, 
      WEBMAIL_CONTENT, AUDIT_REMARK, 
      COPY_TO_WEBMAIL, SECRET_TO_WEBMAIL, 
      PRAISE,SEX,SEX_NAME,AVATAR,USER_PRIV_NAME)
    values (#{bodyId,jdbcType=INTEGER},  #{fromName1,jdbcType=VARCHAR},#{fromId,jdbcType=VARCHAR}, #{subject,jdbcType=VARCHAR},
      #{sendTime,jdbcType=INTEGER}, #{sendFlag,jdbcType=VARCHAR}, #{smsRemind,jdbcType=VARCHAR}, 
      #{important,jdbcType=VARCHAR}, #{size,jdbcType=BIGINT}, #{fromWebmailId,jdbcType=INTEGER}, 
      #{fromWebmail,jdbcType=VARCHAR}, #{webmailFlag,jdbcType=CHAR}, #{recvFromName,jdbcType=VARCHAR}, 
      #{recvFrom,jdbcType=VARCHAR}, #{recvToId,jdbcType=INTEGER}, #{recvTo,jdbcType=VARCHAR}, 
      #{isWebmail,jdbcType=CHAR}, #{isWf,jdbcType=CHAR}, #{keyword,jdbcType=VARCHAR}, 
      #{secretLevel,jdbcType=INTEGER}, #{auditMan,jdbcType=VARCHAR}, #{examFlag,jdbcType=VARCHAR}, 
      #{wordFlag,jdbcType=VARCHAR}, #{toId2,jdbcType=LONGVARCHAR}, #{copyToId,jdbcType=LONGVARCHAR}, 
      #{secretToId,jdbcType=LONGVARCHAR}, #{content,jdbcType=LONGVARCHAR}, #{attachmentId,jdbcType=LONGVARCHAR}, 
      #{attachmentName,jdbcType=LONGVARCHAR}, #{toWebmail,jdbcType=LONGVARCHAR}, #{compressContent,jdbcType=LONGVARBINARY}, 
      #{webmailContent,jdbcType=LONGVARBINARY}, #{auditRemark,jdbcType=LONGVARCHAR}, 
      #{copyToWebmail,jdbcType=LONGVARCHAR}, #{secretToWebmail,jdbcType=LONGVARCHAR}, 
      #{praise,jdbcType=LONGVARCHAR},#{sex,jdbcType=VARCHAR},#{sexName,jdbcType=VARCHAR},#{avatar,jdbcType=VARCHAR},#{userPrivName,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into email_bodyplus
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="bodyId != null" >
        BODY_ID,
      </if>
      <if test="fromName1 != null" >
        FROM_NAME1,
      </if>
      <if test="fromId != null" >
        FROM_ID,
      </if>
      <if test="subject != null" >
        SUBJECT,
      </if>
      <if test="sendTime != null" >
        SEND_TIME,
      </if>
      <if test="sendFlag != null" >
        SEND_FLAG,
      </if>
      <if test="smsRemind != null" >
        SMS_REMIND,
      </if>
      <if test="important != null" >
        IMPORTANT,
      </if>
      <if test="size != null" >
        SIZE,
      </if>
      <if test="fromWebmailId != null" >
        FROM_WEBMAIL_ID,
      </if>
      <if test="fromWebmail != null" >
        FROM_WEBMAIL,
      </if>
      <if test="webmailFlag != null" >
        WEBMAIL_FLAG,
      </if>
      <if test="recvFromName != null" >
        RECV_FROM_NAME,
      </if>
      <if test="recvFrom != null" >
        RECV_FROM,
      </if>
      <if test="recvToId != null" >
        RECV_TO_ID,
      </if>
      <if test="recvTo != null" >
        RECV_TO,
      </if>
      <if test="isWebmail != null" >
        IS_WEBMAIL,
      </if>
      <if test="isWf != null" >
        IS_WF,
      </if>
      <if test="keyword != null" >
        KEYWORD,
      </if>
      <if test="secretLevel != null" >
        SECRET_LEVEL,
      </if>
      <if test="auditMan != null" >
        AUDIT_MAN,
      </if>
      <if test="examFlag != null" >
        EXAM_FLAG,
      </if>
      <if test="wordFlag != null" >
        WORD_FLAG,
      </if>
      <if test="toId2 != null" >
        TO_ID2,
      </if>
      <if test="copyToId != null" >
        COPY_TO_ID,
      </if>
      <if test="secretToId != null" >
        SECRET_TO_ID,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID,
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME,
      </if>
      <if test="toWebmail != null" >
        TO_WEBMAIL,
      </if>
      <if test="compressContent != null" >
        COMPRESS_CONTENT,
      </if>
      <if test="webmailContent != null" >
        WEBMAIL_CONTENT,
      </if>
      <if test="auditRemark != null" >
        AUDIT_REMARK,
      </if>
      <if test="copyToWebmail != null" >
        COPY_TO_WEBMAIL,
      </if>
      <if test="secretToWebmail != null" >
        SECRET_TO_WEBMAIL,
      </if>
      <if test="praise != null" >
        PRAISE,
      </if>
      <if test="sex != null" >
        SEX,
      </if>
      <if test="sexName != null" >
        SEX_NAME,
      </if>
      <if test="avatar != null" >
        AVATAR,
      </if>
      <if test="userPrivName != null" >
        USER_PRIV_NAME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="bodyId != null" >
        #{bodyId,jdbcType=INTEGER},
      </if>
      <if test="fromName1 != null" >
        #{fromName1,jdbcType=VARCHAR},
      </if>
      <if test="fromId != null" >
        #{fromId,jdbcType=VARCHAR},
      </if>
      <if test="subject != null" >
        #{subject,jdbcType=VARCHAR},
      </if>
      <if test="sendTime != null" >
        #{sendTime,jdbcType=INTEGER},
      </if>
      <if test="sendFlag != null" >
        #{sendFlag,jdbcType=VARCHAR},
      </if>
      <if test="smsRemind != null" >
        #{smsRemind,jdbcType=VARCHAR},
      </if>
      <if test="important != null" >
        #{important,jdbcType=VARCHAR},
      </if>
      <if test="size != null" >
        #{size,jdbcType=BIGINT},
      </if>
      <if test="fromWebmailId != null" >
        #{fromWebmailId,jdbcType=INTEGER},
      </if>
      <if test="fromWebmail != null" >
        #{fromWebmail,jdbcType=VARCHAR},
      </if>
      <if test="webmailFlag != null" >
        #{webmailFlag,jdbcType=CHAR},
      </if>
      <if test="recvFromName != null" >
        #{recvFromName,jdbcType=VARCHAR},
      </if>
      <if test="recvFrom != null" >
        #{recvFrom,jdbcType=VARCHAR},
      </if>
      <if test="recvToId != null" >
        #{recvToId,jdbcType=INTEGER},
      </if>
      <if test="recvTo != null" >
        #{recvTo,jdbcType=VARCHAR},
      </if>
      <if test="isWebmail != null" >
        #{isWebmail,jdbcType=CHAR},
      </if>
      <if test="isWf != null" >
        #{isWf,jdbcType=CHAR},
      </if>
      <if test="keyword != null" >
        #{keyword,jdbcType=VARCHAR},
      </if>
      <if test="secretLevel != null" >
        #{secretLevel,jdbcType=INTEGER},
      </if>
      <if test="auditMan != null" >
        #{auditMan,jdbcType=VARCHAR},
      </if>
      <if test="examFlag != null" >
        #{examFlag,jdbcType=VARCHAR},
      </if>
      <if test="wordFlag != null" >
        #{wordFlag,jdbcType=VARCHAR},
      </if>
      <if test="toId2 != null" >
        #{toId2,jdbcType=LONGVARCHAR},
      </if>
      <if test="copyToId != null" >
        #{copyToId,jdbcType=LONGVARCHAR},
      </if>
      <if test="secretToId != null" >
        #{secretToId,jdbcType=LONGVARCHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="toWebmail != null" >
        #{toWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="compressContent != null" >
        #{compressContent,jdbcType=LONGVARBINARY},
      </if>
      <if test="webmailContent != null" >
        #{webmailContent,jdbcType=LONGVARBINARY},
      </if>
      <if test="auditRemark != null" >
        #{auditRemark,jdbcType=LONGVARCHAR},
      </if>
      <if test="copyToWebmail != null" >
        #{copyToWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="secretToWebmail != null" >
        #{secretToWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="praise != null" >
        #{praise,jdbcType=LONGVARCHAR},
      </if>
      <if test="sex != null" >
        #{sex,jdbcType=VARCHAR},
      </if>
      <if test="sexName != null" >
        #{sexName,jdbcType=VARCHAR},
      </if>
      <if test="avatar != null" >
        #{avatar,jdbcType=VARCHAR},
      </if>
      <if test="userPrivName != null" >
        #{userPrivName,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.xoa.dev.crossEmail.model.EmailBodyplusExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from email_bodyplus
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update email_bodyplus
    <set >
      <if test="record.bodyId != null" >
        BODY_ID = #{record.bodyId,jdbcType=INTEGER},
      </if>
      <if test="record.fromName1 != null" >
        FROM_NAME1 = #{record.fromName1,jdbcType=VARCHAR},
      </if>
      <if test="record.fromId != null" >
        FROM_ID = #{record.fromId,jdbcType=VARCHAR},
      </if>
      <if test="record.subject != null" >
        SUBJECT = #{record.subject,jdbcType=VARCHAR},
      </if>
      <if test="record.sendTime != null" >
        SEND_TIME = #{record.sendTime,jdbcType=INTEGER},
      </if>
      <if test="record.sendFlag != null" >
        SEND_FLAG = #{record.sendFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.smsRemind != null" >
        SMS_REMIND = #{record.smsRemind,jdbcType=VARCHAR},
      </if>
      <if test="record.important != null" >
        IMPORTANT = #{record.important,jdbcType=VARCHAR},
      </if>
      <if test="record.size != null" >
        SIZE = #{record.size,jdbcType=BIGINT},
      </if>
      <if test="record.fromWebmailId != null" >
        FROM_WEBMAIL_ID = #{record.fromWebmailId,jdbcType=INTEGER},
      </if>
      <if test="record.fromWebmail != null" >
        FROM_WEBMAIL = #{record.fromWebmail,jdbcType=VARCHAR},
      </if>
      <if test="record.webmailFlag != null" >
        WEBMAIL_FLAG = #{record.webmailFlag,jdbcType=CHAR},
      </if>
      <if test="record.recvFromName != null" >
        RECV_FROM_NAME = #{record.recvFromName,jdbcType=VARCHAR},
      </if>
      <if test="record.recvFrom != null" >
        RECV_FROM = #{record.recvFrom,jdbcType=VARCHAR},
      </if>
      <if test="record.recvToId != null" >
        RECV_TO_ID = #{record.recvToId,jdbcType=INTEGER},
      </if>
      <if test="record.recvTo != null" >
        RECV_TO = #{record.recvTo,jdbcType=VARCHAR},
      </if>
      <if test="record.isWebmail != null" >
        IS_WEBMAIL = #{record.isWebmail,jdbcType=CHAR},
      </if>
      <if test="record.isWf != null" >
        IS_WF = #{record.isWf,jdbcType=CHAR},
      </if>
      <if test="record.keyword != null" >
        KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      </if>
      <if test="record.secretLevel != null" >
        SECRET_LEVEL = #{record.secretLevel,jdbcType=INTEGER},
      </if>
      <if test="record.auditMan != null" >
        AUDIT_MAN = #{record.auditMan,jdbcType=VARCHAR},
      </if>
      <if test="record.examFlag != null" >
        EXAM_FLAG = #{record.examFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.wordFlag != null" >
        WORD_FLAG = #{record.wordFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.toId2 != null" >
        TO_ID2 = #{record.toId2,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.copyToId != null" >
        COPY_TO_ID = #{record.copyToId,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.secretToId != null" >
        SECRET_TO_ID = #{record.secretToId,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.content != null" >
        CONTENT = #{record.content,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.attachmentId != null" >
        ATTACHMENT_ID = #{record.attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.attachmentName != null" >
        ATTACHMENT_NAME = #{record.attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.toWebmail != null" >
        TO_WEBMAIL = #{record.toWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.compressContent != null" >
        COMPRESS_CONTENT = #{record.compressContent,jdbcType=LONGVARBINARY},
      </if>
      <if test="record.webmailContent != null" >
        WEBMAIL_CONTENT = #{record.webmailContent,jdbcType=LONGVARBINARY},
      </if>
      <if test="record.auditRemark != null" >
        AUDIT_REMARK = #{record.auditRemark,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.copyToWebmail != null" >
        COPY_TO_WEBMAIL = #{record.copyToWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.secretToWebmail != null" >
        SECRET_TO_WEBMAIL = #{record.secretToWebmail,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.praise != null" >
        PRAISE = #{record.praise,jdbcType=LONGVARCHAR},
      </if>
      <if test="sex != null" >
        SEX = #{record.sex,jdbcType=VARCHAR},
      </if>
      <if test="sexName != null" >
        SEX_NAME= #{record.sexName,jdbcType=VARCHAR},
      </if>
      <if test="avatar != null" >
        AVATAR= #{record.avatar,jdbcType=VARCHAR},
      </if>
      <if test="userPrivName != null" >
        USER_PRIV_NAME= #{record.userPrivName,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update email_bodyplus
    set BODY_ID = #{record.bodyId,jdbcType=INTEGER},
      FROM_NAME1 = #{record.fromName1,jdbcType=VARCHAR},
      FROM_ID = #{record.fromId,jdbcType=VARCHAR},
      SUBJECT = #{record.subject,jdbcType=VARCHAR},
      SEND_TIME = #{record.sendTime,jdbcType=INTEGER},
      SEND_FLAG = #{record.sendFlag,jdbcType=VARCHAR},
      SMS_REMIND = #{record.smsRemind,jdbcType=VARCHAR},
      IMPORTANT = #{record.important,jdbcType=VARCHAR},
      SIZE = #{record.size,jdbcType=BIGINT},
      FROM_WEBMAIL_ID = #{record.fromWebmailId,jdbcType=INTEGER},
      FROM_WEBMAIL = #{record.fromWebmail,jdbcType=VARCHAR},
      WEBMAIL_FLAG = #{record.webmailFlag,jdbcType=CHAR},
      RECV_FROM_NAME = #{record.recvFromName,jdbcType=VARCHAR},
      RECV_FROM = #{record.recvFrom,jdbcType=VARCHAR},
      RECV_TO_ID = #{record.recvToId,jdbcType=INTEGER},
      RECV_TO = #{record.recvTo,jdbcType=VARCHAR},
      IS_WEBMAIL = #{record.isWebmail,jdbcType=CHAR},
      IS_WF = #{record.isWf,jdbcType=CHAR},
      KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      SECRET_LEVEL = #{record.secretLevel,jdbcType=INTEGER},
      AUDIT_MAN = #{record.auditMan,jdbcType=VARCHAR},
      EXAM_FLAG = #{record.examFlag,jdbcType=VARCHAR},
      WORD_FLAG = #{record.wordFlag,jdbcType=VARCHAR},
      TO_ID2 = #{record.toId2,jdbcType=LONGVARCHAR},
      COPY_TO_ID = #{record.copyToId,jdbcType=LONGVARCHAR},
      SECRET_TO_ID = #{record.secretToId,jdbcType=LONGVARCHAR},
      CONTENT = #{record.content,jdbcType=LONGVARCHAR},
      ATTACHMENT_ID = #{record.attachmentId,jdbcType=LONGVARCHAR},
      ATTACHMENT_NAME = #{record.attachmentName,jdbcType=LONGVARCHAR},
      TO_WEBMAIL = #{record.toWebmail,jdbcType=LONGVARCHAR},
      COMPRESS_CONTENT = #{record.compressContent,jdbcType=LONGVARBINARY},
      WEBMAIL_CONTENT = #{record.webmailContent,jdbcType=LONGVARBINARY},
      AUDIT_REMARK = #{record.auditRemark,jdbcType=LONGVARCHAR},
      COPY_TO_WEBMAIL = #{record.copyToWebmail,jdbcType=LONGVARCHAR},
      SECRET_TO_WEBMAIL = #{record.secretToWebmail,jdbcType=LONGVARCHAR},
      PRAISE = #{record.praise,jdbcType=LONGVARCHAR},
      SEX = #{record.sex,jdbcType=VARCHAR},
      SEX_NAME= #{record.sexName,jdbcType=VARCHAR},
      AVATAR= #{record.avatar,jdbcType=VARCHAR},
      USER_PRIV_NAME= #{record.userPrivName,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update email_bodyplus
    set BODY_ID = #{record.bodyId,jdbcType=INTEGER},
      FROM_NAME1 = #{record.fromName1,jdbcType=VARCHAR},
      FROM_ID = #{record.fromId,jdbcType=VARCHAR},
      SUBJECT = #{record.subject,jdbcType=VARCHAR},
      SEND_TIME = #{record.sendTime,jdbcType=INTEGER},
      SEND_FLAG = #{record.sendFlag,jdbcType=VARCHAR},
      SMS_REMIND = #{record.smsRemind,jdbcType=VARCHAR},
      IMPORTANT = #{record.important,jdbcType=VARCHAR},
      SIZE = #{record.size,jdbcType=BIGINT},
      FROM_WEBMAIL_ID = #{record.fromWebmailId,jdbcType=INTEGER},
      FROM_WEBMAIL = #{record.fromWebmail,jdbcType=VARCHAR},
      WEBMAIL_FLAG = #{record.webmailFlag,jdbcType=CHAR},
      RECV_FROM_NAME = #{record.recvFromName,jdbcType=VARCHAR},
      RECV_FROM = #{record.recvFrom,jdbcType=VARCHAR},
      RECV_TO_ID = #{record.recvToId,jdbcType=INTEGER},
      RECV_TO = #{record.recvTo,jdbcType=VARCHAR},
      IS_WEBMAIL = #{record.isWebmail,jdbcType=CHAR},
      IS_WF = #{record.isWf,jdbcType=CHAR},
      KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      SECRET_LEVEL = #{record.secretLevel,jdbcType=INTEGER},
      AUDIT_MAN = #{record.auditMan,jdbcType=VARCHAR},
      EXAM_FLAG = #{record.examFlag,jdbcType=VARCHAR},
      WORD_FLAG = #{record.wordFlag,jdbcType=VARCHAR},
      SEX = #{record.sex,jdbcType=VARCHAR},
      SEX_NAME= #{record.sexName,jdbcType=VARCHAR},
      AVATAR= #{record.avatar,jdbcType=VARCHAR},
      USER_PRIV_NAME= #{record.userPrivName,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>

  <sql id="Base_Column_List2">
    eb.BODY_ID,u.USER_NAME,eb.SUBJECT,eb.KEYWORD,eb.ATTACHMENT_NAME,eb.SEND_TIME,eb.SIZE,e.BOX_ID,e.READ_FLAG,e.DELETE_FLAG,e.SIGN
  </sql>
  <sql id="Page_Where_Clause">
    <if test="startTime != null and startTime != ''">
      eb.SEND_TIME &gt;= #{startTime}
    </if>
    <if test="endTime != null and endTime != ''">
      AND eb.SEND_TIME &lt;= #{endTime}
    </if>
    <if test="readFlag != null and readFlag != ''">
      AND e.READ_FLAG=#{readFlag}
    </if>
    <if test="boxId != null and boxId != ''">
      AND e.BOX_ID= #{boxId}
    </if>
    <if test="userName!=null and userName!='' ">
      AND u.USER_NAME= #{userName}
    </if>
    <if test="sign!=null and sign='' ">
      AND e.SIGN=#{sign}
    </if>
    <if test="keyword!=null and keyword='' ">
      AND eb.KEYWORD LIKE #{keyword}
    </if>
  </sql>
  <select id="listqueryEmailBody" parameterType="Map" resultMap="BaseResultMap2">
    select
    <include refid="Base_Column_List2" />
    from email_bodyplus as eb
    LEFT JOIN user as u on eb.FROM_ID=u.USER_ID
    LEFT
    JOIN
    emailModel as e on e.BODY_ID=eb.BODY_ID
    <where>
      <include refid="Page_Where_Clause" />
    </where>
    group by eb.BODY_ID
  </select>

  <!-- 发送邮件并保存到数据库 -->
  <insert id="save" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel" useGeneratedKeys="true" keyProperty="bodyId">
    <selectKey order="AFTER" keyProperty="bodyId" resultType="int">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into email_bodyplus (
    FROM_ID,
    FROM_NAME1,
    SUBJECT,
    SEND_TIME,
    SEND_FLAG,
    SMS_REMIND,
    IMPORTANT,
    SIZE,
    FROM_WEBMAIL_ID,
    FROM_WEBMAIL,
    WEBMAIL_FLAG,
    RECV_FROM_NAME,
    RECV_FROM,
    RECV_TO_ID,
    RECV_TO,
    IS_WEBMAIL,
    IS_WF,
    KEYWORD,
    SECRET_LEVEL,
    AUDIT_MAN,
    TO_ID2,
    TO_ID2_NAME,
    COPY_TO_ID,
    COPY_TO_ID_NAME,
    SECRET_TO_ID,
    SECRET_TO_ID_NAME,
    CONTENT,
    ATTACHMENT_ID,
    ATTACHMENT_NAME,
    TO_WEBMAIL,
    COMPRESS_CONTENT,
    WEBMAIL_CONTENT,
    AUDIT_REMARK,
    COPY_TO_WEBMAIL,
    SECRET_TO_WEBMAIL,
    PRAISE,EXAM_FLAG,
    WORD_FLAG,
    SEX,
    SEX_NAME,
    AVATAR,
    USER_PRIV_NAME)
    values(
    #{fromId},
    #{fromName1},
    #{subject},
    #{sendTime},
    #{sendFlag},
    #{smsRemind},
    #{important},
    #{size},
    #{fromWebmailId},
    #{fromWebmail},
    #{webmailFlag},
    #{recvFromName},
    #{recvFrom},
    #{recvToId},
    #{recvTo},
    #{isWebmail},
    #{isWf},
    #{keyword},
    #{secretLevel},
    #{auditMan},
    #{toId2},
    #{toId2Name},
    #{copyToId},
    #{copyToIdName},
    #{secretToId},
    #{secretToIdName},
    #{content},
    #{attachmentId},
    #{attachmentName},
    #{toWebmail},
    #{compressContent},
    #{webmailContent},
    #{auditRemark},
    #{copyToWebmail},
    #{secretToWebmail},
    #{praise},
    #{examFlag},
    #{wordFlag},
    #{sex},
    #{sexName},
    #{avatar},
    #{userPrivName}
    )
  </insert>

  <insert id="save" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel" useGeneratedKeys="true" keyProperty="bodyId" databaseId="dm">
    <selectKey order="AFTER" keyProperty="bodyId" resultType="int">
      SELECT IDENT_CURRENT('BODY');
    </selectKey>
    insert into email_bodyplus (
    FROM_ID,
    FROM_NAME1,
    SUBJECT,
    SEND_TIME,
    SEND_FLAG,
    SMS_REMIND,
    IMPORTANT,
    SIZE,
    FROM_WEBMAIL_ID,
    FROM_WEBMAIL,
    WEBMAIL_FLAG,
    RECV_FROM_NAME,
    RECV_FROM,
    RECV_TO_ID,
    RECV_TO,
    IS_WEBMAIL,
    IS_WF,
    KEYWORD,
    SECRET_LEVEL,
    AUDIT_MAN,
    TO_ID2,
    TO_ID2_NAME,
    COPY_TO_ID,
    COPY_TO_ID_NAME,
    SECRET_TO_ID,
    SECRET_TO_ID_NAME,
    CONTENT,
    ATTACHMENT_ID,
    ATTACHMENT_NAME,
    TO_WEBMAIL,
    COMPRESS_CONTENT,
    WEBMAIL_CONTENT,
    AUDIT_REMARK,
    COPY_TO_WEBMAIL,
    SECRET_TO_WEBMAIL,
    PRAISE,EXAM_FLAG,
    WORD_FLAG,
    SEX,
    SEX_NAME,
    AVATAR,
    USER_PRIV_NAME)
    values(
    #{fromId},
    #{fromName1},
    #{subject},
    #{sendTime},
    #{sendFlag},
    #{smsRemind},
    #{important},
    #{size},
    #{fromWebmailId},
    #{fromWebmail},
    #{webmailFlag},
    #{recvFromName},
    #{recvFrom},
    #{recvToId},
    #{recvTo},
    #{isWebmail},
    #{isWf},
    #{keyword},
    #{secretLevel},
    #{auditMan},
    #{toId2},
    #{toId2Name},
    #{copyToId},
    #{copyToIdName},
    #{secretToId},
    #{secretToIdName},
    #{content},
    #{attachmentId},
    #{attachmentName},
    #{toWebmail},
    #{compressContent},
    #{webmailContent},
    #{auditRemark},
    #{copyToWebmail},
    #{secretToWebmail},
    #{praise},
    #{examFlag},
    #{wordFlag},
    #{sex},
    #{sexName},
    #{avatar},
    #{userPrivName}
    )
  </insert>



  <insert id="save" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel" useGeneratedKeys="true" keyProperty="bodyId" databaseId="kingbase">
    insert into email_bodyplus (
    FROM_ID,
    FROM_NAME1,
    SUBJECT,
    SEND_TIME,
    SEND_FLAG,
    SMS_REMIND,
    IMPORTANT,
    SIZE,
    FROM_WEBMAIL_ID,
    FROM_WEBMAIL,
    WEBMAIL_FLAG,
    RECV_FROM_NAME,
    RECV_FROM,
    RECV_TO_ID,
    RECV_TO,
    IS_WEBMAIL,
    IS_WF,
    KEYWORD,
    SECRET_LEVEL,
    AUDIT_MAN,
    TO_ID2,
    TO_ID2_NAME,
    COPY_TO_ID,
    COPY_TO_ID_NAME,
    SECRET_TO_ID,
    SECRET_TO_ID_NAME,
    CONTENT,
    ATTACHMENT_ID,
    ATTACHMENT_NAME,
    TO_WEBMAIL,
    COMPRESS_CONTENT,
    WEBMAIL_CONTENT,
    AUDIT_REMARK,
    COPY_TO_WEBMAIL,
    SECRET_TO_WEBMAIL,
    PRAISE,EXAM_FLAG,
    WORD_FLAG,
    SEX,
    SEX_NAME,
    AVATAR,
    USER_PRIV_NAME)
    values(
    #{fromId},
    #{fromName1},
    #{subject},
    #{sendTime},
    #{sendFlag},
    #{smsRemind},
    #{important},
    #{size},
    #{fromWebmailId},
    #{fromWebmail},
    #{webmailFlag},
    #{recvFromName},
    #{recvFrom},
    #{recvToId},
    #{recvTo},
    #{isWebmail},
    #{isWf},
    #{keyword},
    #{secretLevel},
    #{auditMan},
    #{toId2},
    #{toId2Name},
    #{copyToId},
    #{copyToIdName},
    #{secretToId},
    #{secretToIdName},
    #{content},
    #{attachmentId},
    #{attachmentName},
    #{toWebmail},
    #{compressContent},
    #{webmailContent},
    #{auditRemark},
    #{copyToWebmail},
    #{secretToWebmail},
    #{praise},
    #{examFlag},
    #{wordFlag},
    #{sex},
    #{sexName},
    #{avatar},
    #{userPrivName}
    )
    RETURNING BODY_ID
  </insert>

  <!-- 邮件条件查询 废-->
  <select id="selectObjcet" resultMap="BaseResultMap2"
          parameterType="Map">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    eb.BODY_ID,eb.SUBJECT,e.EMAIL_ID,eb.SEND_TIME,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,u.USER_NAME from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    GROUP BY eb.BODY_ID ORDER BY
    eb.SEND_TIME DESC
  </select>

  <!--草稿  -->
  <select id="" resultMap="BaseResultMap2" parameterType="Map">
    select eb.FROM_ID,eb.FROM_NAME1,eb.SEX,eb.SEX_NAME,eb.AVATAR,eb.USER_PRIV_NAME,e.EMAIL_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME, eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,e.TO_ID,u.USER_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR as USER_AVATAR from email_bodyplus as eb
    LEFT
    JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    eb.FROM_ID=#{fromId}
    AND SEND_FLAG="0"
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%') )
    </if>
    GROUP BY eb.BODY_ID order by
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listDrafts" resultMap="BaseResultMap2" parameterType="Map" >
    select eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME, eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,e.TO_ID,u.USER_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR from email_bodyplus as eb
    LEFT
    JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    eb.FROM_ID=#{fromId}
    AND SEND_FLAG="0"
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    GROUP BY eb.BODY_ID order by
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listDrafts" resultMap="BaseResultMap2" parameterType="Map" databaseId="kingbase" >
    select eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME, eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,e.TO_ID,u.USER_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR from email_bodyplus as eb
    LEFT
    JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    eb.FROM_ID=#{fromId}
    AND SEND_FLAG='0'
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
      order by eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listDrafts" resultMap="BaseResultMap2" parameterType="Map" databaseId="oracle" >
    select eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME, eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,e.TO_ID,u.USER_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR from email_bodyplus as eb
    LEFT
    JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    eb.FROM_ID=#{fromId}
    AND SEND_FLAG='0'
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    order by eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>


  <!-- 发件箱查询 -->
  <select id="listSendEmail" parameterType="Map" resultMap="BaseResultMap2">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.BODY_ID,
    eb.SUBJECT,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    eb.SEND_TIME,
    E .DELETE_FLAG,
    E .READ_FLAG,
    eb.TO_ID2,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    U .USER_ID,
    E .TO_ID,
    U .USER_NAME,
    U .SEX as USER_SEX,
    U .AVATAR as USER_AVATAR,
    E .withdraw_flag
    FROM
    email_bodyplus  eb
    LEFT JOIN emailplus  E ON eb.BODY_ID = E .BODY_ID
    LEFT JOIN USER  U ON U .USER_ID = eb.FROM_ID
    LEFT JOIN WEBMAIL  wb ON wb.USER_ID = eb.FROM_ID
    WHERE
    eb.FROM_ID = #{fromId}
    AND SEND_FLAG = '1'
    AND (
    E .DELETE_FLAG = ''
    OR E .DELETE_FLAG = '0'
    OR E .DELETE_FLAG = '3'
    OR E .DELETE_FLAG = '1'
    )
    AND BOX_ID = '0'
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%') )
    </if>
    GROUP BY eb.BODY_ID
    ORDER BY
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listSendEmail" parameterType="Map" resultMap="BaseResultMap2" databaseId="oracle">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.BODY_ID,
    eb.SUBJECT,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    eb.SEND_TIME,
    E .DELETE_FLAG,
    E .READ_FLAG,
    eb.TO_ID2,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    U .USER_ID,
    E .TO_ID,
    U .USER_NAME,
    U .SEX as USER_SEX,
    U .AVATAR as USER_AVATAR,
    E .withdraw_flag
    FROM
    email_bodyplus  eb
    LEFT JOIN emailplus  E ON eb.BODY_ID = E .BODY_ID
    LEFT JOIN "USER"  U ON U .USER_ID = eb.FROM_ID
    LEFT JOIN WEBMAIL  wb ON wb.USER_ID = eb.FROM_ID
    WHERE
    eb.FROM_ID = #{fromId}
    AND SEND_FLAG = '1'
    AND (
    E .DELETE_FLAG = ''
    OR E .DELETE_FLAG = '0'
    OR E .DELETE_FLAG = '3'
    OR E .DELETE_FLAG = '1'
    )
    AND BOX_ID = '0'
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%') )
    </if>
    ORDER BY eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listSendEmail" parameterType="Map" resultMap="BaseResultMap2" databaseId="kingbase">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.BODY_ID,
    eb.SUBJECT,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    eb.SEND_TIME,
    E .DELETE_FLAG,
    E .READ_FLAG,
    eb.TO_ID2,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    U .USER_ID,
    E .TO_ID,
    U .USER_NAME,
    U .SEX as USER_SEX,
    U .AVATAR as USER_AVATAR,
    E .withdraw_flag
    FROM
    email_bodyplus  eb
    LEFT JOIN emailplus  E ON eb.BODY_ID = E .BODY_ID
    LEFT JOIN "USER"  U ON U .USER_ID = eb.FROM_ID
    LEFT JOIN WEBMAIL  wb ON wb.USER_ID = eb.FROM_ID
    WHERE
    eb.FROM_ID = #{fromId}
    AND SEND_FLAG = '1'
    AND (
    E .DELETE_FLAG = ''
    OR E .DELETE_FLAG = '0'
    OR E .DELETE_FLAG = '3'
    OR E .DELETE_FLAG = '1'
    )
    AND BOX_ID = '0'
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%') )
    </if>
    ORDER BY eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>


  <!-- 废纸篓查询 空值 -->
  <select id="listWastePaperbasket" resultMap="BaseResultMap2"
          parameterType="Map">
    SELECT eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.BODY_ID,eb.SUBJECT,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR  FROM
    email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID =eb.BODY_ID
    LEFT JOIN user as u on u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    AND (
    e.DELETE_FLAG = '3'
    OR e.DELETE_FLAG = '4'
    )
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND   eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    GROUP BY
    eb.BODY_ID
    ORDER BY
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listWastePaperbasket" resultMap="BaseResultMap2"
          parameterType="Map" databaseId="kingbase">
    SELECT eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.BODY_ID,eb.SUBJECT,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR  FROM
    email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID =eb.BODY_ID
    LEFT JOIN "USER" as u on u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    AND (
    e.DELETE_FLAG = '3'
    OR e.DELETE_FLAG = '4'
    )
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND   eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    ORDER BY eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="listWastePaperbasket" resultMap="BaseResultMap2"
          parameterType="Map" databaseId="oracle">
    SELECT eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,eb.BODY_ID,eb.SUBJECT,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR  as USER_AVATAR  FROM
    email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID =eb.BODY_ID
    LEFT JOIN "USER" as u on u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    AND (
    e.DELETE_FLAG = '3'
    OR e.DELETE_FLAG = '4'
    )
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND   eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND  (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    ORDER BY eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>


  <!--收件箱查询 -->
  <select id="selectInbox" parameterType="Map" resultMap="BaseResultMap2" databaseId="mysql">
    select
    eb.FROM_ID,eb.FROM_NAME1,
    eb.BODY_ID,eb.SUBJECT,e.EMAIL_ID,eb.SEND_TIME,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,
    eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,e.withdraw_flag,
    u.USER_NAME,u.SEX as USER_SEX ,u.AVATAR AS USER_AVATAR,u.UID from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    and (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
   /* AND (eb.EXAM_FLAG is null or eb.EXAM_FLAG='1' or  eb.EXAM_FLAG='3')*/
    <!--AND (eb.WORD_FLAG is null or eb.WORD_FLAG='1' or  eb.WORD_FLAG='3')-->
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="fromUserId != null and fromUserId != ''">
      AND (eb.FROM_ID LIKE CONCAT ('%',#{fromUserId},'%') OR (eb.FROM_ID LIKE u.USER_ID AND (select replace(u.USER_NAME,' ','')) LIKE CONCAT ('%',#{fromUserId},'%')))
    </if>
    <if test="readFlag != null and readFlag != ''">
      AND e.READ_FLAG  LIKE #{readFlag}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND   (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    GROUP BY eb.BODY_ID ORDER BY
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="selectInbox" parameterType="Map" resultMap="BaseResultMap2" databaseId="oracle">
    select
    eb.FROM_ID,eb.FROM_NAME1,
    eb.BODY_ID,eb.SUBJECT,e.EMAIL_ID,eb.SEND_TIME,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,
    eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,e.withdraw_flag,
    u.USER_NAME,u.SEX as USER_SEX ,u.AVATAR AS USER_AVATAR,u.UID from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    and (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
    /* AND (eb.EXAM_FLAG is null or eb.EXAM_FLAG='1' or  eb.EXAM_FLAG='3')*/
    <!--AND (eb.WORD_FLAG is null or eb.WORD_FLAG='1' or  eb.WORD_FLAG='3')-->
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="fromUserId != null and fromUserId != ''">
      AND (eb.FROM_ID LIKE CONCAT ('%',#{fromUserId},'%') OR (eb.FROM_ID LIKE u.USER_ID AND (select replace(u.USER_NAME,' ','')) LIKE CONCAT ('%',#{fromUserId},'%')))
    </if>
    <if test="readFlag != null and readFlag != ''">
      AND e.READ_FLAG  LIKE #{readFlag}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND   (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
    GROUP BY eb.BODY_ID ORDER BY
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <select id="selectInbox" parameterType="Map" resultMap="BaseResultMap2" databaseId="kingbase">
    select
    eb.FROM_ID,eb.FROM_NAME1,
    eb.BODY_ID,eb.SUBJECT,e.EMAIL_ID,eb.SEND_TIME,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,
    eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,e.withdraw_flag,
    u.USER_NAME,u.SEX as USER_SEX ,u.AVATAR AS USER_AVATAR,u.UID from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    and (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
    /* AND (eb.EXAM_FLAG is null or eb.EXAM_FLAG='1' or  eb.EXAM_FLAG='3')*/
    <!--AND (eb.WORD_FLAG is null or eb.WORD_FLAG='1' or  eb.WORD_FLAG='3')-->
    <if test="startTime != null and startTime != '' and endTime != null and endTime != ''">
      AND eb.SEND_TIME between #{startTime} and #{endTime}
    </if>
    <if test="subject != null and subject != ''">
      AND eb.SUBJECT like #{subject}
    </if>
    <if test="content != null and content != ''">
      AND eb.CONTENT like #{content}
    </if>
    <if test="attachmentName != null and attachmentName != ''">
      AND eb.ATTACHMENT_NAME like #{attachmentName}
    </if>
    <if test="fromUserId != null and fromUserId != ''">
      AND (eb.FROM_ID LIKE CONCAT ('%',#{fromUserId},'%') OR (eb.FROM_ID LIKE u.USER_ID AND (select replace(u.USER_NAME,' ','')) LIKE CONCAT ('%',#{fromUserId},'%')))
    </if>
    <if test="readFlag != null and readFlag != ''">
      AND e.READ_FLAG  LIKE #{readFlag}
    </if>
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    <if test="queryField != null and queryField != ''">
      AND   (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))
    </if>
     ORDER BY eb.BODY_ID,
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>

  <!--全局搜索收件箱查询 -->
  <select id="queryEmailBySubject" parameterType="String" resultMap="BaseResultMap2" databaseId="mysql">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.BODY_ID,eb.SUBJECT,e.EMAIL_ID,eb.SEND_TIME,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,e.DELETE_FLAG,
    eb.TO_ID2,e.READ_FLAG,eb.COPY_TO_ID,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,e.withdraw_flag,
    u.USER_NAME,u.SEX as USER_SEX,u.AVATAR AS USER_AVATAR,u.UID from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
    <!--<if test="startTime != null and startTime != '' and endTime != null and endTime != ''">-->
    <!--AND eb.SEND_TIME between #{startTime} and #{endTime}-->
    <!--</if>-->
    <!--<if test="subject != null and subject != ''">
        AND eb.SUBJECT like #{subject}
    </if>-->
    AND eb.SUBJECT LIKE '%' #{subject} '%' or eb.CONTENT LIKE '%' #{content} '%'
    <!--<if test="content != null and content != ''">
        AND eb.CONTENT like #{content}
    </if>-->
    <!--<if test="attachmentName != null and attachmentName != ''">-->
    <!--AND eb.ATTACHMENT_NAME like #{attachmentName}-->
    <!--</if>-->
    <!--<if test="fromUserId != null and fromUserId != ''">-->
    <!--AND (eb.FROM_ID LIKE CONCAT ('%',#{fromUserId},'%') OR (eb.FROM_ID LIKE u.USER_ID AND (select replace(u.USER_NAME,' ','')) LIKE CONCAT ('%',#{fromUserId},'%')))-->
    <!--</if>-->
    <!--<if test="readFlag != null and readFlag != ''">-->
    <!--AND e.READ_FLAG  LIKE #{readFlag}-->
    <!--</if>-->
    <!--<if test="searchCriteria != null and searchCriteria != ''">-->
    <!--AND  eb.SUBJECT like #{searchCriteria}-->
    <!--</if>-->
    <!--<if test="isWebmail != null and isWebmail != ''">-->
    <!--AND eb.IS_WEBMAIL LIKE #{isWebmail}-->
    <!--</if>-->
    <!--<if test="queryField != null and queryField != ''">-->
    <!--AND   (u.USER_NAME like CONCAT('%',#{queryField},'%') OR eb.`SUBJECT` like CONCAT('%',#{queryField},'%'))-->
    <!--</if>-->
    GROUP BY eb.BODY_ID ORDER BY
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>
  </select>
  <!--未读查询-->
  <select id="selectIsRead" parameterType="Map" resultMap="BaseResultMap2">
    select
    eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,
    eb.BODY_ID,eb.SUBJECT,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.COPY_TO_ID,e.READ_FLAG,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR as USER_AVATAR from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    AND e.BOX_ID='0'
    AND e.READ_FLAG='0'
    GROUP BY eb.BODY_ID ORDER BY
    eb.SEND_TIME DESC
  </select>


  <!--收件箱未读查询 -->
  <select id="selectInboxIsRead" parameterType="Map" resultMap="BaseResultMap2">
    select
    eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,
    eb.BODY_ID,eb.SUBJECT,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.COPY_TO_ID,e.READ_FLAG,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR as USER_AVATAR  from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    and (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
    AND e.READ_FLAG='0'
    GROUP BY eb.BODY_ID ORDER BY
    eb.SEND_TIME DESC
  </select>


  <!--收件箱未读查询 -->
  <select id="selectInboxIsReadList" parameterType="Map" resultMap="BaseResultMap2">
    select
    eb.FROM_ID,eb.FROM_NAME1,e.EMAIL_ID,
    eb.BODY_ID,eb.SUBJECT,e.DELETE_FLAG,eb.SEND_TIME,eb.TO_ID2,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.COPY_TO_ID,e.READ_FLAG,eb.SECRET_TO_ID,eb.CONTENT,u.USER_ID,e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR as USER_AVATAR from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    where
    e.TO_ID=#{fromId}
    and (e.DELETE_FLAG ='0' or e.DELETE_FLAG='' or e.DELETE_FLAG='2')
    AND e.BOX_ID='0'
    AND e.READ_FLAG='1'
    GROUP BY eb.BODY_ID ORDER BY
    eb.SEND_TIME DESC
  </select>



  <!-- 根据id查询一条邮件 -->
  <select id="queryById" resultMap="BaseResultMap2" parameterType="Map">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    e.EMAIL_ID,
    eb.TO_ID2_NAME,
    eb.COPY_TO_ID_NAME,
    eb.SECRET_TO_ID_NAME,
    eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,
    e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR AS USER_AVATAR,
    e.READ_FLAG,
    e.BOX_ID,
    e.RECEIPT,
    e.IS_F,
    e.IS_R,
    e.SIGN,
    e.withdraw_flag
    from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    <where>
      <if test="emailId != null and emailId != ''">
        e.EMAIL_ID=#{emailId}
      </if>
      <if test="bodyId != null and bodyId != ''">
        eb.BODY_ID = #{bodyId}
      </if>
    </where>
    GROUP BY eb.BODY_ID
  </select>

  <select id="queryById" resultMap="BaseResultMap2" parameterType="Map" databaseId="kingbase">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    e.EMAIL_ID,
    eb.TO_ID2_NAME,
    eb.COPY_TO_ID_NAME,
    eb.SECRET_TO_ID_NAME,
    eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,
    e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR AS USER_AVATAR,
    e.READ_FLAG,
    e.BOX_ID,
    e.RECEIPT,
    e.IS_F,
    e.IS_R,
    e.SIGN,
    e.withdraw_flag
    from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    <where>
      <if test="emailId != null and emailId != ''">
        e.EMAIL_ID=#{emailId}
      </if>
      <if test="bodyId != null and bodyId != ''">
        eb.BODY_ID = #{bodyId}
      </if>
    </where>
    ORDER BY eb.BODY_ID
  </select>

  <select id="queryById" resultMap="BaseResultMap2" parameterType="Map" databaseId="oracle">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    e.EMAIL_ID,
    eb.TO_ID2_NAME,
    eb.COPY_TO_ID_NAME,
    eb.SECRET_TO_ID_NAME,
    eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,
    e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR AS USER_AVATAR,
    e.READ_FLAG,
    e.BOX_ID,
    e.RECEIPT,
    e.IS_F,
    e.IS_R,
    e.SIGN,
    e.withdraw_flag
    from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN "USER" as u on
    u.USER_ID=eb.FROM_ID
    LEFT JOIN webmail as wb
    on wb.USER_ID = eb.FROM_ID
    <where>
      <if test="emailId != null and emailId != ''">
        e.EMAIL_ID=#{emailId}
      </if>
      <if test="bodyId != null and bodyId != ''">
        eb.BODY_ID = #{bodyId}
      </if>
    </where>
    ORDER BY eb.BODY_ID
  </select>
  

  <!--草稿箱删除，delete -->
  <delete id="deleteDrafts" parameterType="java.lang.Integer">
    delete from
    email_bodyplus where BODY_ID = #{bodyId}
  </delete>

  <!-- 发件箱删除 变为2 -->
  <update id="updateOutbox" parameterType="java.lang.Integer">
    update email_bodyplus eb LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID set e.DELETE_FLAG='2'
    where eb.BODY_ID = #{bodyId} AND (e.DELETE_FLAG !='1'  OR e.DELETE_FLAG !='2' OR e.DELETE_FLAG !='3' OR e.DELETE_FLAG !='4')
  </update>
  <!-- 发件箱删除 变为4 -->
  <update id="updateOutboxs" parameterType="java.lang.Integer">
    update email_bodyplus eb LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID set e.DELETE_FLAG='4'
    where eb.BODY_ID = #{bodyId} AND (e.DELETE_FLAG !='' OR e.DELETE_FLAG !='0' OR e.DELETE_FLAG !='1'  OR e.DELETE_FLAG !='2' OR e.DELETE_FLAG !='4')
  </update>

  <!--  发件箱为1时删除  -->
  <delete id="deleteOutbox" parameterType="java.lang.Integer">
    DELETE FROM	emailplus WHERE BODY_ID = #{bodyId}
    AND DELETE_FLAG = '1'
  </delete>

  <!-- 收件箱删除 ，变为3 -->
  <update id="updateInbox" parameterType="java.lang.Integer">
    update email_bodyplus eb LEFT JOIN emailplus  e on e.BODY_ID=eb.BODY_ID set e.DELETE_FLAG='3',e.BOX_ID = '0'
    where e.EMAIL_ID=#{emailId}  AND (e.DELETE_FLAG =''  OR e.DELETE_FLAG ='0')
  </update>


  <!-- 收件箱删除 ，变为4 -->
  <update id="updateInboxs" parameterType="java.lang.Integer">
    update email_bodyplus eb LEFT JOIN emailplus  e on e.BODY_ID=eb.BODY_ID set e.DELETE_FLAG='4',e.BOX_ID = '0'
    where e.EMAIL_ID=#{emailId}  AND e.DELETE_FLAG ='2'
  </update>

  <!-- 废纸篓删除，变为1 -->
  <update id="updateRecycle" parameterType="java.lang.Integer">
    update email_bodyplus eb LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID set e.DELETE_FLAG='1'
    where e.EMAIL_ID=#{emailId}  AND e.DELETE_FLAG ='3'
  </update>

  <!-- 废纸篓删除，delete -->
  <delete id="deleteRecycle" parameterType="java.lang.Integer">
    DELETE FROM	emailplus  WHERE EMAIL_ID=#{emailId}
    AND DELETE_FLAG = '4'
  </delete>

  <update id="updateByPrimaryKeySelective" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel">
    update email_bodyplus
    <set>
      <if test="fromId != null">
        FROM_ID = #{fromId},
      </if>
      <if test="fromName1 != null">
        FROM_NAME1 = #{fromName1},
      </if>
      <if test="subject != null">
        SUBJECT = #{subject},
      </if>
      <if test="sendTime != null">
        SEND_TIME = #{sendTime},
      </if>
      <if test="sendFlag != null">
        SEND_FLAG = #{sendFlag},
      </if>
      <if test="smsRemind != null">
        SMS_REMIND = #{smsRemind},
      </if>
      <if test="important != null">
        IMPORTANT = #{important},
      </if>
      <if test="size != null">
        SIZE = #{size},
      </if>
      <if test="fromWebmailId != null">
        FROM_WEBMAIL_ID = #{fromWebmailId},
      </if>
      <if test="fromWebmail != null">
        FROM_WEBMAIL = #{fromWebmail},
      </if>
      <if test="webmailFlag != null">
        WEBMAIL_FLAG = #{webmailFlag},
      </if>
      <if test="recvFromName != null">
        RECV_FROM_NAME = #{recvFromName},
      </if>
      <if test="recvFrom != null">
        RECV_FROM = #{recvFrom},
      </if>
      <if test="recvToId != null">
        RECV_TO_ID = #{recvToId},
      </if>
      <if test="recvTo != null">
        RECV_TO = #{recvTo},
      </if>
      <if test="isWebmail != null">
        IS_WEBMAIL = #{isWebmail},
      </if>
      <if test="isWf != null">
        IS_WF = #{isWf},
      </if>
      <if test="keyword != null">
        KEYWORD = #{keyword},
      </if>
      <if test="secretLevel != null">
        SECRET_LEVEL = #{secretLevel},
      </if>
      <if test="auditMan != null">
        AUDIT_MAN = #{auditMan},
      </if>
      <if test="toId2 != null">
        TO_ID2 = #{toId2},
      </if>
      <if test="copyToId != null">
        COPY_TO_ID = #{copyToId},
      </if>
      <if test="secretToId != null">
        SECRET_TO_ID = #{secretToId},
      </if>
      <if test="content != null">
        CONTENT = #{content},
      </if>
      <if test="attachmentId != null">
        ATTACHMENT_ID = #{attachmentId},
      </if>
      <if test="attachmentName != null">
        ATTACHMENT_NAME = #{attachmentName},
      </if>
      <if test="toWebmail != null">
        TO_WEBMAIL = #{toWebmail},
      </if>
      <if test="compressContent != null">
        COMPRESS_CONTENT =
        #{compressContent},
      </if>
      <if test="webmailContent != null">
        WEBMAIL_CONTENT =
        #{webmailContent},
      </if>
      <if test="auditRemark != null">
        AUDIT_REMARK = #{auditRemark},
      </if>
      <if test="copyToWebmail != null">
        COPY_TO_WEBMAIL = #{copyToWebmail},
      </if>
      <if test="secretToWebmail != null">
        SECRET_TO_WEBMAIL = #{secretToWebmail},
      </if>
      <if test="praise != null">
        PRAISE = #{praise},
      </if>
      <if test="sex != null" >
        SEX = #{sex},
      </if>
      <if test="sexName != null" >
        SEX_NAME= #{sexName},
      </if>
      <if test="avatar != null" >
        AVATAR= #{avatar},
      </if>
      <if test="userPrivName != null" >
        USER_PRIV_NAME= #{userPrivName},
      </if>
    </set>
    where BODY_ID = #{bodyId}
  </update>

  <!-- 草稿箱修改或发送 -->
  <update id="update" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel"  >
    UPDATE email_bodyplus SET
    FROM_ID = #{fromId},
    FROM_NAME1 = #{fromName1},
    SUBJECT = #{subject},
    SEND_TIME = #{sendTime},
    SEND_FLAG = #{sendFlag},
    SMS_REMIND = #{smsRemind},
    IMPORTANT = #{important},
    SIZE = #{size},
    FROM_WEBMAIL_ID = #{fromWebmailId},
    FROM_WEBMAIL = #{fromWebmail},
    WEBMAIL_FLAG = #{webmailFlag},
    RECV_FROM_NAME = #{recvFromName},
    RECV_FROM = #{recvFrom},
    RECV_TO_ID = #{recvToId},
    RECV_TO = #{recvTo},
    IS_WEBMAIL = #{isWebmail},
    IS_WF = #{isWf},
    KEYWORD = #{keyword},
    SECRET_LEVEL = #{secretLevel},
    AUDIT_MAN = #{auditMan},
    TO_ID2 = #{toId2},
    COPY_TO_ID = #{copyToId},
    SECRET_TO_ID = #{secretToId},
    CONTENT = #{content},
    ATTACHMENT_ID = #{attachmentId},
    ATTACHMENT_NAME = #{attachmentName},
    TO_WEBMAIL = #{toWebmail},
    COMPRESS_CONTENT = #{compressContent},
    WEBMAIL_CONTENT = #{webmailContent},
    AUDIT_REMARK = #{auditRemark},
    COPY_TO_WEBMAIL = #{copyToWebmail},
    SECRET_TO_WEBMAIL = #{secretToWebmail},
    PRAISE = #{praise},
    EXAM_FLAG=#{examFlag},
    WORD_FLAG=#{wordFlag},
    SEX = #{sex},
    SEX_NAME= #{sexName},
    AVATAR= #{avatar},
    USER_PRIV_NAME= #{userPrivName}
    WHERE
    BODY_ID = #{bodyId}
  </update>


  <!--其他邮件查询 -->
  <select id="selectBoxEmail" parameterType="Map" resultMap="BaseResultMap2">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    e.BOX_ID,
    eb.BODY_ID,
    eb. SUBJECT,
    e.EMAIL_ID,
    eb.SEND_TIME,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    e.DELETE_FLAG,
    eb.TO_ID2,
    e.READ_FLAG,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    u.USER_ID,
    e.TO_ID,
    u.USER_NAME,
    u.SEX as USER_SEX,u.AVATAR as USER_AVATAR
    FROM
    email_bodyplus AS eb
    LEFT JOIN emailplus AS e ON e.BODY_ID = eb.BODY_ID
    LEFT JOIN USER AS u ON u.USER_ID = eb.FROM_ID
    LEFT JOIN email_box ebo on ebo.BOX_ID = e.BOX_ID
    WHERE
    e.TO_ID = #{fromId}
    and e.BOX_ID=#{boxId}
    AND (
    e.DELETE_FLAG = '0'
    OR e.DELETE_FLAG = ''
    OR e.DELETE_FLAG = '2'
    )
    <if test="searchCriteria != null and searchCriteria != ''">
      AND  eb.SUBJECT like #{searchCriteria}
    </if>
    <if test="isWebmail != null and isWebmail != ''">
      AND eb.IS_WEBMAIL LIKE #{isWebmail}
    </if>
    ORDER by
    <choose>
      <when test="orderByName != null and orderByName != ''">
        ${orderByName}
      </when>
      <otherwise>
        eb.SEND_TIME
      </otherwise>
    </choose>
    <choose>
      <when test="orderWhere != null and orderWhere != ''">
        ${orderWhere}
      </when>
      <otherwise>
        DESC
      </otherwise>
    </choose>

  </select>


  <!--查询其他邮件中是否存在详细邮件 -->
  <select id="selectIsBoxEmail" parameterType="Map" resultMap="BaseResultMap2">
    SELECT
    e.EMAIL_ID,
    u.USER_NAME
    FROM
    email_bodyplus AS eb
    LEFT JOIN emailplus AS e ON e.BODY_ID = eb.BODY_ID
    LEFT JOIN USER AS u ON u.USER_ID = eb.FROM_ID
    WHERE
    e.TO_ID = #{fromId}
    and e.BOX_ID=#{boxId}
  </select>
  <select id="selectIsBoxEmail" parameterType="Map" resultMap="BaseResultMap2" databaseId="kingbase">
    SELECT
    e.EMAIL_ID,
    u.USER_NAME
    FROM
    email_bodyplus AS eb
    LEFT JOIN emailplus AS e ON e.BODY_ID = eb.BODY_ID
    LEFT JOIN "USER" AS u ON u.USER_ID = eb.FROM_ID
    WHERE
    e.TO_ID = #{fromId}
    and e.BOX_ID=#{boxId}
  </select>
  <select id="selectIsBoxEmail" parameterType="Map" resultMap="BaseResultMap2" databaseId="oracle">
    SELECT
    e.EMAIL_ID,
    u.USER_NAME
    FROM
    email_bodyplus AS eb
    LEFT JOIN emailplus AS e ON e.BODY_ID = eb.BODY_ID
    LEFT JOIN "USER" AS u ON u.USER_ID = eb.FROM_ID
    WHERE
    e.TO_ID = #{fromId}
    and e.BOX_ID=#{boxId}
  </select>
  <select id="selectCount" parameterType="map" resultMap="BaseResultMap2">

    SELECT
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '1' then 1 else 0 end) as count1,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '2' then 1 else 0 end) as count2,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '3' then 1 else 0 end) as count3,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '4' then 1 else 0 end) as count4,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '5' then 1 else 0 end) as count5,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '6' then 1 else 0 end) as count6,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '7' then 1 else 0 end) as count7,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '8' then 1 else 0 end) as count8,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '9' then 1 else 0 end) as count9,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '10' then 1 else 0 end) as count10,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '11' then 1 else 0 end) as count11,
    sum(case month(FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')) when '12' then 1 else 0 end) as count12,
    d.DEPT_NAME,u.USER_NAME,e.FROM_ID,u.uid as BODY_ID
    FROM
    department as d
    INNER JOIN `user` u ON u.DEPT_ID = d.DEPT_ID
    INNER JOIN email_bodyplus e ON u.USER_ID = e.FROM_ID
    <where>
      <if test="toId != null and toId != ''">
        and d.DEPT_ID = #{toId}
      </if>
      and
      YEAR (
      FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
      ) =  #{sendTime}

      GROUP BY u.uid
    </where>

    <!--SELECT
            MONTH (
                FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
            ) AS BODY_ID,
            count(*) AS count,
            MONTH (
                FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
            ) AS Months,
            e.FROM_ID,
            u.USER_NAME,
            d.DEPT_NAME
        FROM
            email_bodyplus e
        INNER JOIN `user` u ON u.USER_ID = e.FROM_ID
        INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
    <where>
        YEAR (
        FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
        ) = #{sendTime}
        <if test="toId != null and toId != ''">
            AND  d.DEPT_ID = #{toId}
        </if>
        GROUP BY deptId,Months
    </where>-->

  </select>


  <select id="selectListByMoths" parameterType="String" resultMap="BaseResultMap2">
    SELECT
    e.BODY_ID,
    e.SEND_TIME,
    e.`SUBJECT`,
    e.ATTACHMENT_ID,
    e.ATTACHMENT_NAME
    FROM
    email_bodyplus e
    WHERE
    MONTH (
    FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
    ) = #{sendTime}
    AND  YEAR (
    FROM_UNIXTIME(e.SEND_TIME, '%Y-%m-%d')
    ) =  #{year}
    AND e.FROM_ID=#{userId}
  </select>


  <select id="queryByBodyId" parameterType="map" resultMap="BaseResultMap2">
    select
    eb.FROM_ID,
    eb.FROM_NAME1,
    eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    e.EMAIL_ID,
    eb.BODY_ID,eb.SUBJECT,eb.SEND_TIME,eb.TO_ID2,eb.COPY_TO_ID,eb.ATTACHMENT_ID,eb.ATTACHMENT_NAME,eb.SECRET_TO_ID,u.USER_ID,eb.CONTENT,
    e.TO_ID,u.USER_NAME,u.SEX as USER_SEX,u.AVATAR as USER_AVATAR,
    e.READ_FLAG,
    e.BOX_ID,
    e.RECEIPT,
    e.IS_F,
    e.IS_R,
    e.SIGN,
    u.USER_NAME,
    d.DEPT_NAME,eb.EXAM_FLAG,eb.WORD_FLAG
    from email_bodyplus as eb
    LEFT JOIN emailplus as e on e.BODY_ID=eb.BODY_ID
    LEFT JOIN user as u on
    u.USER_ID=eb.FROM_ID
    INNER JOIN department d ON u.DEPT_ID = d.DEPT_ID
    WHERE eb.BODY_ID=#{bodyId}
    GROUP BY eb.BODY_ID
  </select>



  <select id="selExamEmail"  resultMap="BaseResultMap2">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
     eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    eb.BODY_ID,
    eb.SUBJECT,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    eb.SEND_TIME,
    eb.TO_ID2,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    u.DEPT_ID,
    u.USER_NAME as fromName
    FROM
    email_bodyplus  eb
    JOIN `user` u ON u.USER_ID=eb.FROM_ID
    WHERE
    eb.SEND_FLAG = '1'
    AND eb.EXAM_FLAG='0'
    ORDER BY eb.SEND_TIME DESC
  </select>

  <select id="selWordExamEmail"  resultMap="BaseResultMap2">
    SELECT
    eb.FROM_ID,
    eb.FROM_NAME1,
     eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    eb.BODY_ID,
    eb.SUBJECT,
    eb.ATTACHMENT_ID,
    eb.ATTACHMENT_NAME,
    eb.SEND_TIME,
    eb.TO_ID2,
    eb.COPY_TO_ID,
    eb.SECRET_TO_ID,
    eb.CONTENT,
    u.DEPT_ID,
    u.USER_NAME as fromName
    FROM
    email_bodyplus  eb
    JOIN `user` u ON u.USER_ID=eb.FROM_ID
    WHERE
    eb.SEND_FLAG = '1'
    AND eb.WORD_FLAG='0'
    ORDER BY eb.SEND_TIME DESC
  </select>

  <update id="updateExamFlag" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel">
    UPDATE email_bodyplus SET EXAM_FLAG=#{examFlag} where BODY_ID=#{bodyId}
  </update>

  <update id="updateWordFlag" parameterType="com.xoa.dev.crossEmail.model.EmailBodyPlusModel">
    UPDATE email_bodyplus
    <set>
      <if test="wordFlag!=null">
        WORD_FLAG=#{wordFlag},
      </if>
      <if test="subject!=null">
        SUBJECT=#{subject},
      </if>
      <if test="content!=null">
        CONTENT=#{content},
      </if>
    </set>
    where BODY_ID=#{bodyId}
  </update>
  <select id="selectEmail" resultType="Integer"  >
    select  count(*)  from email_bodyplus

  </select>

  <select id="selectEmailAll" resultMap="BaseResultMap2" parameterType="map">
    SELECT
    FROM_ID,
    FROM_NAME1,
     eb.SEX,
    eb.SEX_NAME,
    eb.AVATAR,
    eb.USER_PRIV_NAME,
    TO_ID2,
    SEND_TIME,
    `SUBJECT`,
    CONTENT,
    ATTACHMENT_NAME
    FROM
    email_bodyplus eb
    WHERE
    FROM_ID = 'admin'
    AND TO_ID2 LIKE  '%,'
    AND SEND_TIME &gt;= #{SEND_TIME} AND SEND_TIME &lt;= #{SEND_TIME}
    ORDER BY
    SEND_TIME
  </select>
</mapper>